ARM GAS  C:\cygwin64\tmp\ccFBQtVc.s 			page 1


   1              		.cpu cortex-m4
   2              		.eabi_attribute 27, 1
   3              		.eabi_attribute 28, 1
   4              		.eabi_attribute 20, 1
   5              		.eabi_attribute 21, 1
   6              		.eabi_attribute 23, 3
   7              		.eabi_attribute 24, 1
   8              		.eabi_attribute 25, 1
   9              		.eabi_attribute 26, 1
  10              		.eabi_attribute 30, 1
  11              		.eabi_attribute 34, 1
  12              		.eabi_attribute 18, 4
  13              		.file	"flash_l4.c"
  14              		.text
  15              	.Ltext0:
  16              		.cfi_sections	.debug_frame
  17              		.section	.text.FLASH_get_bank,"ax",%progbits
  18              		.align	1
  19              		.arch armv7e-m
  20              		.syntax unified
  21              		.thumb
  22              		.thumb_func
  23              		.fpu fpv4-sp-d16
  25              	FLASH_get_bank:
  26              	.LVL0:
  27              	.LFB320:
  28              		.file 1 "Drivers/STM32L4xx_HAL_Driver/Src/flash_l4.c"
   1:Drivers/STM32L4xx_HAL_Driver/Src/flash_l4.c **** /**
   2:Drivers/STM32L4xx_HAL_Driver/Src/flash_l4.c ****   ******************************************************************************
   3:Drivers/STM32L4xx_HAL_Driver/Src/flash_l4.c ****   * @file    flash_l4.c
   4:Drivers/STM32L4xx_HAL_Driver/Src/flash_l4.c ****   * @author  MCD Application Team
   5:Drivers/STM32L4xx_HAL_Driver/Src/flash_l4.c ****   * @brief   Management of the L4 internal flash memory.
   6:Drivers/STM32L4xx_HAL_Driver/Src/flash_l4.c ****   ******************************************************************************
   7:Drivers/STM32L4xx_HAL_Driver/Src/flash_l4.c ****   * @attention
   8:Drivers/STM32L4xx_HAL_Driver/Src/flash_l4.c ****   *
   9:Drivers/STM32L4xx_HAL_Driver/Src/flash_l4.c ****   * <h2><center>&copy; Copyright (c) 2017 STMicroelectronics International N.V. 
  10:Drivers/STM32L4xx_HAL_Driver/Src/flash_l4.c ****   * All rights reserved.</center></h2>
  11:Drivers/STM32L4xx_HAL_Driver/Src/flash_l4.c ****   *
  12:Drivers/STM32L4xx_HAL_Driver/Src/flash_l4.c ****   * Redistribution and use in source and binary forms, with or without 
  13:Drivers/STM32L4xx_HAL_Driver/Src/flash_l4.c ****   * modification, are permitted, provided that the following conditions are met:
  14:Drivers/STM32L4xx_HAL_Driver/Src/flash_l4.c ****   *
  15:Drivers/STM32L4xx_HAL_Driver/Src/flash_l4.c ****   * 1. Redistribution of source code must retain the above copyright notice, 
  16:Drivers/STM32L4xx_HAL_Driver/Src/flash_l4.c ****   *    this list of conditions and the following disclaimer.
  17:Drivers/STM32L4xx_HAL_Driver/Src/flash_l4.c ****   * 2. Redistributions in binary form must reproduce the above copyright notice,
  18:Drivers/STM32L4xx_HAL_Driver/Src/flash_l4.c ****   *    this list of conditions and the following disclaimer in the documentation
  19:Drivers/STM32L4xx_HAL_Driver/Src/flash_l4.c ****   *    and/or other materials provided with the distribution.
  20:Drivers/STM32L4xx_HAL_Driver/Src/flash_l4.c ****   * 3. Neither the name of STMicroelectronics nor the names of other 
  21:Drivers/STM32L4xx_HAL_Driver/Src/flash_l4.c ****   *    contributors to this software may be used to endorse or promote products 
  22:Drivers/STM32L4xx_HAL_Driver/Src/flash_l4.c ****   *    derived from this software without specific written permission.
  23:Drivers/STM32L4xx_HAL_Driver/Src/flash_l4.c ****   * 4. This software, including modifications and/or derivative works of this 
  24:Drivers/STM32L4xx_HAL_Driver/Src/flash_l4.c ****   *    software, must execute solely and exclusively on microcontroller or
  25:Drivers/STM32L4xx_HAL_Driver/Src/flash_l4.c ****   *    microprocessor devices manufactured by or for STMicroelectronics.
  26:Drivers/STM32L4xx_HAL_Driver/Src/flash_l4.c ****   * 5. Redistribution and use of this software other than as permitted under 
  27:Drivers/STM32L4xx_HAL_Driver/Src/flash_l4.c ****   *    this license is void and will automatically terminate your rights under 
  28:Drivers/STM32L4xx_HAL_Driver/Src/flash_l4.c ****   *    this license. 
  29:Drivers/STM32L4xx_HAL_Driver/Src/flash_l4.c ****   *
  30:Drivers/STM32L4xx_HAL_Driver/Src/flash_l4.c ****   * THIS SOFTWARE IS PROVIDED BY STMICROELECTRONICS AND CONTRIBUTORS "AS IS" 
ARM GAS  C:\cygwin64\tmp\ccFBQtVc.s 			page 2


  31:Drivers/STM32L4xx_HAL_Driver/Src/flash_l4.c ****   * AND ANY EXPRESS, IMPLIED OR STATUTORY WARRANTIES, INCLUDING, BUT NOT 
  32:Drivers/STM32L4xx_HAL_Driver/Src/flash_l4.c ****   * LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY, FITNESS FOR A 
  33:Drivers/STM32L4xx_HAL_Driver/Src/flash_l4.c ****   * PARTICULAR PURPOSE AND NON-INFRINGEMENT OF THIRD PARTY INTELLECTUAL PROPERTY
  34:Drivers/STM32L4xx_HAL_Driver/Src/flash_l4.c ****   * RIGHTS ARE DISCLAIMED TO THE FULLEST EXTENT PERMITTED BY LAW. IN NO EVENT 
  35:Drivers/STM32L4xx_HAL_Driver/Src/flash_l4.c ****   * SHALL STMICROELECTRONICS OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT,
  36:Drivers/STM32L4xx_HAL_Driver/Src/flash_l4.c ****   * INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT
  37:Drivers/STM32L4xx_HAL_Driver/Src/flash_l4.c ****   * LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, 
  38:Drivers/STM32L4xx_HAL_Driver/Src/flash_l4.c ****   * OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF 
  39:Drivers/STM32L4xx_HAL_Driver/Src/flash_l4.c ****   * LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING 
  40:Drivers/STM32L4xx_HAL_Driver/Src/flash_l4.c ****   * NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE,
  41:Drivers/STM32L4xx_HAL_Driver/Src/flash_l4.c ****   * EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
  42:Drivers/STM32L4xx_HAL_Driver/Src/flash_l4.c ****   *
  43:Drivers/STM32L4xx_HAL_Driver/Src/flash_l4.c ****   ******************************************************************************
  44:Drivers/STM32L4xx_HAL_Driver/Src/flash_l4.c ****   */
  45:Drivers/STM32L4xx_HAL_Driver/Src/flash_l4.c **** 
  46:Drivers/STM32L4xx_HAL_Driver/Src/flash_l4.c **** /* Includes ------------------------------------------------------------------*/
  47:Drivers/STM32L4xx_HAL_Driver/Src/flash_l4.c **** #include "main.h"
  48:Drivers/STM32L4xx_HAL_Driver/Src/flash_l4.c **** #include "flash.h"
  49:Drivers/STM32L4xx_HAL_Driver/Src/flash_l4.c **** #include <string.h>
  50:Drivers/STM32L4xx_HAL_Driver/Src/flash_l4.c **** #include <stdbool.h>
  51:Drivers/STM32L4xx_HAL_Driver/Src/flash_l4.c **** 
  52:Drivers/STM32L4xx_HAL_Driver/Src/flash_l4.c **** /* Private typedef -----------------------------------------------------------*/
  53:Drivers/STM32L4xx_HAL_Driver/Src/flash_l4.c **** /* Private defines -----------------------------------------------------------*/
  54:Drivers/STM32L4xx_HAL_Driver/Src/flash_l4.c **** #define ROUND_DOWN(a,b) (((a) / (b)) * (b))
  55:Drivers/STM32L4xx_HAL_Driver/Src/flash_l4.c **** #define MIN(a,b)        (((a) < (b)) ? (a) : (b))
  56:Drivers/STM32L4xx_HAL_Driver/Src/flash_l4.c **** 
  57:Drivers/STM32L4xx_HAL_Driver/Src/flash_l4.c **** /* Private variables ---------------------------------------------------------*/
  58:Drivers/STM32L4xx_HAL_Driver/Src/flash_l4.c **** /* Private function prototypes -----------------------------------------------*/
  59:Drivers/STM32L4xx_HAL_Driver/Src/flash_l4.c **** static  int FLASH_get_pageInBank(uint32_t addr);
  60:Drivers/STM32L4xx_HAL_Driver/Src/flash_l4.c **** static  uint32_t FLASH_Init(void);
  61:Drivers/STM32L4xx_HAL_Driver/Src/flash_l4.c **** static int FLASH_write_at(uint32_t address, uint64_t *pData, uint32_t len_bytes);
  62:Drivers/STM32L4xx_HAL_Driver/Src/flash_l4.c **** static int FLASH_unlock_erase(uint32_t address, uint32_t len_bytes);
  63:Drivers/STM32L4xx_HAL_Driver/Src/flash_l4.c **** static  uint32_t FLASH_get_bank(uint32_t addr);
  64:Drivers/STM32L4xx_HAL_Driver/Src/flash_l4.c **** 
  65:Drivers/STM32L4xx_HAL_Driver/Src/flash_l4.c **** 
  66:Drivers/STM32L4xx_HAL_Driver/Src/flash_l4.c **** /* Functions Definition ------------------------------------------------------*/
  67:Drivers/STM32L4xx_HAL_Driver/Src/flash_l4.c **** 
  68:Drivers/STM32L4xx_HAL_Driver/Src/flash_l4.c **** /**
  69:Drivers/STM32L4xx_HAL_Driver/Src/flash_l4.c ****   * @brief  Erase FLASH memory page(s) at address.
  70:Drivers/STM32L4xx_HAL_Driver/Src/flash_l4.c ****   * @note   The range to erase shall not cross the bank boundary.
  71:Drivers/STM32L4xx_HAL_Driver/Src/flash_l4.c ****   * @param  In: address     Start address to erase from.
  72:Drivers/STM32L4xx_HAL_Driver/Src/flash_l4.c ****   * @param  In: len_bytes   Length to be erased.
  73:Drivers/STM32L4xx_HAL_Driver/Src/flash_l4.c ****   * @retval  0:  Success.
  74:Drivers/STM32L4xx_HAL_Driver/Src/flash_l4.c ****             -1:  Failure.
  75:Drivers/STM32L4xx_HAL_Driver/Src/flash_l4.c ****   */
  76:Drivers/STM32L4xx_HAL_Driver/Src/flash_l4.c **** int FLASH_unlock_erase(uint32_t address, uint32_t len_bytes)
  77:Drivers/STM32L4xx_HAL_Driver/Src/flash_l4.c **** {
  78:Drivers/STM32L4xx_HAL_Driver/Src/flash_l4.c ****   int rc = -1;
  79:Drivers/STM32L4xx_HAL_Driver/Src/flash_l4.c ****   uint32_t PageError = 0;
  80:Drivers/STM32L4xx_HAL_Driver/Src/flash_l4.c ****   FLASH_EraseInitTypeDef EraseInit;
  81:Drivers/STM32L4xx_HAL_Driver/Src/flash_l4.c **** 
  82:Drivers/STM32L4xx_HAL_Driver/Src/flash_l4.c ****   /* L4 ROM memory map, with 2 banks split into 2kBytes pages.
  83:Drivers/STM32L4xx_HAL_Driver/Src/flash_l4.c ****    * WARN: ABW. If the passed address and size are not page-aligned,
  84:Drivers/STM32L4xx_HAL_Driver/Src/flash_l4.c ****    * the start of the first page and the end of the last page are erased anyway.
  85:Drivers/STM32L4xx_HAL_Driver/Src/flash_l4.c ****    * After erase, the flash is left in unlocked state.
  86:Drivers/STM32L4xx_HAL_Driver/Src/flash_l4.c ****    */
  87:Drivers/STM32L4xx_HAL_Driver/Src/flash_l4.c ****   EraseInit.TypeErase = FLASH_TYPEERASE_PAGES;
ARM GAS  C:\cygwin64\tmp\ccFBQtVc.s 			page 3


  88:Drivers/STM32L4xx_HAL_Driver/Src/flash_l4.c ****   
  89:Drivers/STM32L4xx_HAL_Driver/Src/flash_l4.c ****   EraseInit.Banks = FLASH_get_bank(address); 
  90:Drivers/STM32L4xx_HAL_Driver/Src/flash_l4.c ****   if (EraseInit.Banks != FLASH_get_bank(address + len_bytes))
  91:Drivers/STM32L4xx_HAL_Driver/Src/flash_l4.c ****   {
  92:Drivers/STM32L4xx_HAL_Driver/Src/flash_l4.c **** #ifndef CODE_UNDER_FIREWALL
  93:Drivers/STM32L4xx_HAL_Driver/Src/flash_l4.c ****     printf("Error: Cannot erase across FLASH banks.\n");
  94:Drivers/STM32L4xx_HAL_Driver/Src/flash_l4.c **** #endif
  95:Drivers/STM32L4xx_HAL_Driver/Src/flash_l4.c ****     return rc;
  96:Drivers/STM32L4xx_HAL_Driver/Src/flash_l4.c ****   }
  97:Drivers/STM32L4xx_HAL_Driver/Src/flash_l4.c ****   else
  98:Drivers/STM32L4xx_HAL_Driver/Src/flash_l4.c ****   {
  99:Drivers/STM32L4xx_HAL_Driver/Src/flash_l4.c ****     EraseInit.Page = FLASH_get_pageInBank(address);
 100:Drivers/STM32L4xx_HAL_Driver/Src/flash_l4.c ****     EraseInit.NbPages = FLASH_get_pageInBank(address + len_bytes - 1) - EraseInit.Page + 1;
 101:Drivers/STM32L4xx_HAL_Driver/Src/flash_l4.c ****     
 102:Drivers/STM32L4xx_HAL_Driver/Src/flash_l4.c ****     HAL_FLASH_Unlock();
 103:Drivers/STM32L4xx_HAL_Driver/Src/flash_l4.c ****     
 104:Drivers/STM32L4xx_HAL_Driver/Src/flash_l4.c ****     if (HAL_FLASHEx_Erase(&EraseInit, &PageError) == HAL_OK)
 105:Drivers/STM32L4xx_HAL_Driver/Src/flash_l4.c ****     {
 106:Drivers/STM32L4xx_HAL_Driver/Src/flash_l4.c ****       rc = 0;
 107:Drivers/STM32L4xx_HAL_Driver/Src/flash_l4.c ****     }
 108:Drivers/STM32L4xx_HAL_Driver/Src/flash_l4.c ****     else
 109:Drivers/STM32L4xx_HAL_Driver/Src/flash_l4.c ****     {
 110:Drivers/STM32L4xx_HAL_Driver/Src/flash_l4.c **** #ifndef CODE_UNDER_FIREWALL
 111:Drivers/STM32L4xx_HAL_Driver/Src/flash_l4.c ****       printf("Error erasing at 0x%08lx\n", address);
 112:Drivers/STM32L4xx_HAL_Driver/Src/flash_l4.c **** #endif
 113:Drivers/STM32L4xx_HAL_Driver/Src/flash_l4.c ****     }
 114:Drivers/STM32L4xx_HAL_Driver/Src/flash_l4.c ****   }
 115:Drivers/STM32L4xx_HAL_Driver/Src/flash_l4.c ****   return rc;
 116:Drivers/STM32L4xx_HAL_Driver/Src/flash_l4.c **** }
 117:Drivers/STM32L4xx_HAL_Driver/Src/flash_l4.c **** 
 118:Drivers/STM32L4xx_HAL_Driver/Src/flash_l4.c **** /**
 119:Drivers/STM32L4xx_HAL_Driver/Src/flash_l4.c ****   * @brief  Write to FLASH memory.
 120:Drivers/STM32L4xx_HAL_Driver/Src/flash_l4.c ****   * @param  In: address     Destination address.
 121:Drivers/STM32L4xx_HAL_Driver/Src/flash_l4.c ****   * @param  In: pData       Data to be programmed: Must be 8 byte aligned.
 122:Drivers/STM32L4xx_HAL_Driver/Src/flash_l4.c ****   * @param  In: len_bytes   Number of bytes to be programmed.
 123:Drivers/STM32L4xx_HAL_Driver/Src/flash_l4.c ****   * @retval  0: Success.
 124:Drivers/STM32L4xx_HAL_Driver/Src/flash_l4.c ****             -1: Failure.
 125:Drivers/STM32L4xx_HAL_Driver/Src/flash_l4.c ****   */
 126:Drivers/STM32L4xx_HAL_Driver/Src/flash_l4.c **** static int FLASH_write_at(uint32_t address, uint64_t *pData, uint32_t len_bytes)
 127:Drivers/STM32L4xx_HAL_Driver/Src/flash_l4.c **** {
 128:Drivers/STM32L4xx_HAL_Driver/Src/flash_l4.c ****   int i;
 129:Drivers/STM32L4xx_HAL_Driver/Src/flash_l4.c ****   int ret = -1;
 130:Drivers/STM32L4xx_HAL_Driver/Src/flash_l4.c **** #ifndef CODE_UNDER_FIREWALL    
 131:Drivers/STM32L4xx_HAL_Driver/Src/flash_l4.c ****     /* irq already mask under firewall */
 132:Drivers/STM32L4xx_HAL_Driver/Src/flash_l4.c ****   __disable_irq();
 133:Drivers/STM32L4xx_HAL_Driver/Src/flash_l4.c **** #endif
 134:Drivers/STM32L4xx_HAL_Driver/Src/flash_l4.c ****   
 135:Drivers/STM32L4xx_HAL_Driver/Src/flash_l4.c ****   for (i = 0; i < len_bytes; i += 8)
 136:Drivers/STM32L4xx_HAL_Driver/Src/flash_l4.c ****   {
 137:Drivers/STM32L4xx_HAL_Driver/Src/flash_l4.c ****     if (HAL_FLASH_Program(FLASH_TYPEPROGRAM_DOUBLEWORD,
 138:Drivers/STM32L4xx_HAL_Driver/Src/flash_l4.c ****         address + i,
 139:Drivers/STM32L4xx_HAL_Driver/Src/flash_l4.c ****         *(pData + (i/8) )) != HAL_OK)
 140:Drivers/STM32L4xx_HAL_Driver/Src/flash_l4.c ****     {
 141:Drivers/STM32L4xx_HAL_Driver/Src/flash_l4.c ****       break;
 142:Drivers/STM32L4xx_HAL_Driver/Src/flash_l4.c ****     }
 143:Drivers/STM32L4xx_HAL_Driver/Src/flash_l4.c ****   }
 144:Drivers/STM32L4xx_HAL_Driver/Src/flash_l4.c ****   /* Memory check */
ARM GAS  C:\cygwin64\tmp\ccFBQtVc.s 			page 4


 145:Drivers/STM32L4xx_HAL_Driver/Src/flash_l4.c ****   for (i = 0; i < len_bytes; i += 4)
 146:Drivers/STM32L4xx_HAL_Driver/Src/flash_l4.c ****   {
 147:Drivers/STM32L4xx_HAL_Driver/Src/flash_l4.c ****     uint32_t *dst = (uint32_t *)(address + i);
 148:Drivers/STM32L4xx_HAL_Driver/Src/flash_l4.c ****     uint32_t *src = ((uint32_t *) pData) + (i/4);
 149:Drivers/STM32L4xx_HAL_Driver/Src/flash_l4.c ****       
 150:Drivers/STM32L4xx_HAL_Driver/Src/flash_l4.c ****     if ( *dst != *src )
 151:Drivers/STM32L4xx_HAL_Driver/Src/flash_l4.c ****     {
 152:Drivers/STM32L4xx_HAL_Driver/Src/flash_l4.c **** #ifndef CODE_UNDER_FIREWALL 
 153:Drivers/STM32L4xx_HAL_Driver/Src/flash_l4.c ****       printf("Write failed @0x%08lx, read value=0x%08lx, expected=0x%08lx\n", (uint32_t) dst, *dst,
 154:Drivers/STM32L4xx_HAL_Driver/Src/flash_l4.c **** #endif
 155:Drivers/STM32L4xx_HAL_Driver/Src/flash_l4.c ****       break;
 156:Drivers/STM32L4xx_HAL_Driver/Src/flash_l4.c ****     }
 157:Drivers/STM32L4xx_HAL_Driver/Src/flash_l4.c ****     ret = 0;
 158:Drivers/STM32L4xx_HAL_Driver/Src/flash_l4.c ****   }
 159:Drivers/STM32L4xx_HAL_Driver/Src/flash_l4.c **** #ifndef CODE_UNDER_FIREWALL   
 160:Drivers/STM32L4xx_HAL_Driver/Src/flash_l4.c ****   /* irq should never be enable under firewall */ 
 161:Drivers/STM32L4xx_HAL_Driver/Src/flash_l4.c ****   __enable_irq();
 162:Drivers/STM32L4xx_HAL_Driver/Src/flash_l4.c **** #endif
 163:Drivers/STM32L4xx_HAL_Driver/Src/flash_l4.c ****   return ret;
 164:Drivers/STM32L4xx_HAL_Driver/Src/flash_l4.c **** }
 165:Drivers/STM32L4xx_HAL_Driver/Src/flash_l4.c **** 
 166:Drivers/STM32L4xx_HAL_Driver/Src/flash_l4.c **** /**
 167:Drivers/STM32L4xx_HAL_Driver/Src/flash_l4.c ****   * @brief  Get the bank of a given address.
 168:Drivers/STM32L4xx_HAL_Driver/Src/flash_l4.c ****   * @param  In: addr      Address in the FLASH Memory.
 169:Drivers/STM32L4xx_HAL_Driver/Src/flash_l4.c ****   * @retval Bank identifier.
 170:Drivers/STM32L4xx_HAL_Driver/Src/flash_l4.c ****   *           FLASH_BANK_1
 171:Drivers/STM32L4xx_HAL_Driver/Src/flash_l4.c ****   *           FLASH_BANK_2
 172:Drivers/STM32L4xx_HAL_Driver/Src/flash_l4.c ****   */
 173:Drivers/STM32L4xx_HAL_Driver/Src/flash_l4.c **** uint32_t FLASH_get_bank(uint32_t addr)
 174:Drivers/STM32L4xx_HAL_Driver/Src/flash_l4.c **** {
  29              		.loc 1 174 1 view -0
  30              		.cfi_startproc
  31              		@ args = 0, pretend = 0, frame = 0
  32              		@ frame_needed = 0, uses_anonymous_args = 0
  33              		@ link register save eliminated.
 175:Drivers/STM32L4xx_HAL_Driver/Src/flash_l4.c ****   uint32_t bank = 0;
  34              		.loc 1 175 3 view .LVU1
 176:Drivers/STM32L4xx_HAL_Driver/Src/flash_l4.c **** 
 177:Drivers/STM32L4xx_HAL_Driver/Src/flash_l4.c ****   if (READ_BIT(SYSCFG->MEMRMP, SYSCFG_MEMRMP_FB_MODE) == 0)
  35              		.loc 1 177 3 view .LVU2
  36              		.loc 1 177 7 is_stmt 0 view .LVU3
  37 0000 164B     		ldr	r3, .L11
  38 0002 1B68     		ldr	r3, [r3]
  39              		.loc 1 177 6 view .LVU4
  40 0004 13F4807F 		tst	r3, #256
  41 0008 11D1     		bne	.L2
 178:Drivers/STM32L4xx_HAL_Driver/Src/flash_l4.c ****   {
 179:Drivers/STM32L4xx_HAL_Driver/Src/flash_l4.c ****     /* No Bank swap */
 180:Drivers/STM32L4xx_HAL_Driver/Src/flash_l4.c ****     bank = (addr < (FLASH_BASE + FLASH_BANK_SIZE)) ? FLASH_BANK_1 : FLASH_BANK_2;
  42              		.loc 1 180 5 is_stmt 1 view .LVU5
  43              		.loc 1 180 34 is_stmt 0 view .LVU6
  44 000a 154B     		ldr	r3, .L11+4
  45 000c 1A68     		ldr	r2, [r3]
  46 000e 91B2     		uxth	r1, r2
  47              		.loc 1 180 32 view .LVU7
  48 0010 4FF6FF73 		movw	r3, #65535
  49 0014 9942     		cmp	r1, r3
ARM GAS  C:\cygwin64\tmp\ccFBQtVc.s 			page 5


  50 0016 08D0     		beq	.L6
  51              		.loc 1 180 34 discriminator 1 view .LVU8
  52 0018 124B     		ldr	r3, .L11+8
  53 001a 03EA4223 		and	r3, r3, r2, lsl #9
  54              		.loc 1 180 32 discriminator 1 view .LVU9
  55 001e 03F10063 		add	r3, r3, #134217728
  56              	.L3:
  57              		.loc 1 180 67 discriminator 4 view .LVU10
  58 0022 8342     		cmp	r3, r0
  59 0024 17D9     		bls	.L7
  60              		.loc 1 180 67 view .LVU11
  61 0026 0120     		movs	r0, #1
  62              	.LVL1:
  63              		.loc 1 180 67 view .LVU12
  64 0028 7047     		bx	lr
  65              	.LVL2:
  66              	.L6:
  67              		.loc 1 180 32 view .LVU13
  68 002a 0F4B     		ldr	r3, .L11+12
  69 002c F9E7     		b	.L3
  70              	.L2:
 181:Drivers/STM32L4xx_HAL_Driver/Src/flash_l4.c ****   }
 182:Drivers/STM32L4xx_HAL_Driver/Src/flash_l4.c ****   else
 183:Drivers/STM32L4xx_HAL_Driver/Src/flash_l4.c ****   {
 184:Drivers/STM32L4xx_HAL_Driver/Src/flash_l4.c ****     /* Bank swap */
 185:Drivers/STM32L4xx_HAL_Driver/Src/flash_l4.c ****     bank = (addr < (FLASH_BASE + FLASH_BANK_SIZE)) ? FLASH_BANK_2 : FLASH_BANK_1;
  71              		.loc 1 185 5 is_stmt 1 view .LVU14
  72              		.loc 1 185 34 is_stmt 0 view .LVU15
  73 002e 0C4B     		ldr	r3, .L11+4
  74 0030 1A68     		ldr	r2, [r3]
  75 0032 91B2     		uxth	r1, r2
  76              		.loc 1 185 32 view .LVU16
  77 0034 4FF6FF73 		movw	r3, #65535
  78 0038 9942     		cmp	r1, r3
  79 003a 08D0     		beq	.L8
  80              		.loc 1 185 34 discriminator 1 view .LVU17
  81 003c 094B     		ldr	r3, .L11+8
  82 003e 03EA4223 		and	r3, r3, r2, lsl #9
  83              		.loc 1 185 32 discriminator 1 view .LVU18
  84 0042 03F10063 		add	r3, r3, #134217728
  85              	.L5:
  86              		.loc 1 185 67 discriminator 4 view .LVU19
  87 0046 8342     		cmp	r3, r0
  88 0048 03D8     		bhi	.L10
  89              		.loc 1 185 67 view .LVU20
  90 004a 0120     		movs	r0, #1
  91              	.LVL3:
 186:Drivers/STM32L4xx_HAL_Driver/Src/flash_l4.c ****   }
 187:Drivers/STM32L4xx_HAL_Driver/Src/flash_l4.c ****   
 188:Drivers/STM32L4xx_HAL_Driver/Src/flash_l4.c ****   return bank;
  92              		.loc 1 188 3 is_stmt 1 view .LVU21
 189:Drivers/STM32L4xx_HAL_Driver/Src/flash_l4.c **** }
  93              		.loc 1 189 1 is_stmt 0 view .LVU22
  94 004c 7047     		bx	lr
  95              	.LVL4:
  96              	.L8:
 185:Drivers/STM32L4xx_HAL_Driver/Src/flash_l4.c ****   }
ARM GAS  C:\cygwin64\tmp\ccFBQtVc.s 			page 6


  97              		.loc 1 185 32 view .LVU23
  98 004e 064B     		ldr	r3, .L11+12
  99 0050 F9E7     		b	.L5
 100              	.L10:
 185:Drivers/STM32L4xx_HAL_Driver/Src/flash_l4.c ****   }
 101              		.loc 1 185 67 view .LVU24
 102 0052 0220     		movs	r0, #2
 103              	.LVL5:
 185:Drivers/STM32L4xx_HAL_Driver/Src/flash_l4.c ****   }
 104              		.loc 1 185 67 view .LVU25
 105 0054 7047     		bx	lr
 106              	.LVL6:
 107              	.L7:
 180:Drivers/STM32L4xx_HAL_Driver/Src/flash_l4.c ****   }
 108              		.loc 1 180 67 view .LVU26
 109 0056 0220     		movs	r0, #2
 110              	.LVL7:
 180:Drivers/STM32L4xx_HAL_Driver/Src/flash_l4.c ****   }
 111              		.loc 1 180 67 view .LVU27
 112 0058 7047     		bx	lr
 113              	.L12:
 114 005a 00BF     		.align	2
 115              	.L11:
 116 005c 00000140 		.word	1073807360
 117 0060 E075FF1F 		.word	536835552
 118 0064 00FEFF01 		.word	33553920
 119 0068 00000808 		.word	134742016
 120              		.cfi_endproc
 121              	.LFE320:
 123              		.section	.text.FLASH_get_pageInBank,"ax",%progbits
 124              		.align	1
 125              		.syntax unified
 126              		.thumb
 127              		.thumb_func
 128              		.fpu fpv4-sp-d16
 130              	FLASH_get_pageInBank:
 131              	.LVL8:
 132              	.LFB321:
 190:Drivers/STM32L4xx_HAL_Driver/Src/flash_l4.c **** 
 191:Drivers/STM32L4xx_HAL_Driver/Src/flash_l4.c **** /**
 192:Drivers/STM32L4xx_HAL_Driver/Src/flash_l4.c ****   * @brief  Get the page of a given address within its FLASH bank.
 193:Drivers/STM32L4xx_HAL_Driver/Src/flash_l4.c ****   * @param  In: addr    Address in the FLASH memory.
 194:Drivers/STM32L4xx_HAL_Driver/Src/flash_l4.c ****   * @retval >=0 Success: Page number.
 195:Drivers/STM32L4xx_HAL_Driver/Src/flash_l4.c ****   *          <0 Failure: The address in not mapped in the internal FLASH memory.
 196:Drivers/STM32L4xx_HAL_Driver/Src/flash_l4.c ****   */
 197:Drivers/STM32L4xx_HAL_Driver/Src/flash_l4.c **** static int FLASH_get_pageInBank(uint32_t addr)
 198:Drivers/STM32L4xx_HAL_Driver/Src/flash_l4.c **** {
 133              		.loc 1 198 1 is_stmt 1 view -0
 134              		.cfi_startproc
 135              		@ args = 0, pretend = 0, frame = 0
 136              		@ frame_needed = 0, uses_anonymous_args = 0
 137              		@ link register save eliminated.
 199:Drivers/STM32L4xx_HAL_Driver/Src/flash_l4.c ****   int page = -1;
 138              		.loc 1 199 3 view .LVU29
 200:Drivers/STM32L4xx_HAL_Driver/Src/flash_l4.c **** 
 201:Drivers/STM32L4xx_HAL_Driver/Src/flash_l4.c ****   if ( ((FLASH_BASE + FLASH_SIZE) > addr) && (addr >= FLASH_BASE) )
 139              		.loc 1 201 3 view .LVU30
ARM GAS  C:\cygwin64\tmp\ccFBQtVc.s 			page 7


 140              		.loc 1 201 23 is_stmt 0 view .LVU31
 141 0000 1C4B     		ldr	r3, .L24
 142 0002 1A68     		ldr	r2, [r3]
 143 0004 91B2     		uxth	r1, r2
 144              		.loc 1 201 21 view .LVU32
 145 0006 4FF6FF73 		movw	r3, #65535
 146 000a 9942     		cmp	r1, r3
 147 000c 18D0     		beq	.L19
 148              		.loc 1 201 23 discriminator 1 view .LVU33
 149 000e 1A4B     		ldr	r3, .L24+4
 150 0010 03EA8223 		and	r3, r3, r2, lsl #10
 151              		.loc 1 201 21 discriminator 1 view .LVU34
 152 0014 03F10063 		add	r3, r3, #134217728
 153              	.L14:
 154              		.loc 1 201 6 discriminator 4 view .LVU35
 155 0018 8342     		cmp	r3, r0
 156 001a 25D9     		bls	.L20
 157              		.loc 1 201 43 discriminator 5 view .LVU36
 158 001c B0F1006F 		cmp	r0, #134217728
 159 0020 25D3     		bcc	.L21
 202:Drivers/STM32L4xx_HAL_Driver/Src/flash_l4.c ****   {
 203:Drivers/STM32L4xx_HAL_Driver/Src/flash_l4.c ****     /* The address is in internal FLASH range. */
 204:Drivers/STM32L4xx_HAL_Driver/Src/flash_l4.c ****     if ( addr < (FLASH_BASE + FLASH_BANK_SIZE) )
 160              		.loc 1 204 5 is_stmt 1 view .LVU37
 161              		.loc 1 204 29 is_stmt 0 view .LVU38
 162 0022 4FF6FF73 		movw	r3, #65535
 163 0026 9942     		cmp	r1, r3
 164 0028 0DD0     		beq	.L22
 165              		.loc 1 204 31 discriminator 1 view .LVU39
 166 002a 144B     		ldr	r3, .L24+8
 167 002c 03EA4223 		and	r3, r3, r2, lsl #9
 168              		.loc 1 204 29 discriminator 1 view .LVU40
 169 0030 03F10063 		add	r3, r3, #134217728
 170              	.L16:
 171              		.loc 1 204 8 discriminator 4 view .LVU41
 172 0034 8342     		cmp	r3, r0
 173 0036 08D9     		bls	.L17
 205:Drivers/STM32L4xx_HAL_Driver/Src/flash_l4.c ****     { 
 206:Drivers/STM32L4xx_HAL_Driver/Src/flash_l4.c ****       /* Addr in the first bank */
 207:Drivers/STM32L4xx_HAL_Driver/Src/flash_l4.c ****       page = (addr - FLASH_BASE) / FLASH_PAGE_SIZE;
 174              		.loc 1 207 7 is_stmt 1 view .LVU42
 175              		.loc 1 207 20 is_stmt 0 view .LVU43
 176 0038 00F17840 		add	r0, r0, #-134217728
 177              	.LVL9:
 178              		.loc 1 207 34 view .LVU44
 179 003c C00A     		lsrs	r0, r0, #11
 180              	.LVL10:
 181              		.loc 1 207 34 view .LVU45
 182 003e 7047     		bx	lr
 183              	.LVL11:
 184              	.L19:
 201:Drivers/STM32L4xx_HAL_Driver/Src/flash_l4.c ****   {
 185              		.loc 1 201 21 view .LVU46
 186 0040 4FF00163 		mov	r3, #135266304
 187 0044 E8E7     		b	.L14
 188              	.L22:
 204:Drivers/STM32L4xx_HAL_Driver/Src/flash_l4.c ****     { 
ARM GAS  C:\cygwin64\tmp\ccFBQtVc.s 			page 8


 189              		.loc 1 204 29 view .LVU47
 190 0046 0E4B     		ldr	r3, .L24+12
 191 0048 F4E7     		b	.L16
 192              	.L17:
 208:Drivers/STM32L4xx_HAL_Driver/Src/flash_l4.c ****     }
 209:Drivers/STM32L4xx_HAL_Driver/Src/flash_l4.c ****     else 
 210:Drivers/STM32L4xx_HAL_Driver/Src/flash_l4.c ****     {
 211:Drivers/STM32L4xx_HAL_Driver/Src/flash_l4.c ****       /* Addr in the second bank */
 212:Drivers/STM32L4xx_HAL_Driver/Src/flash_l4.c ****       page = (addr - FLASH_BASE - FLASH_BANK_SIZE) / FLASH_PAGE_SIZE;
 193              		.loc 1 212 7 is_stmt 1 view .LVU48
 194              		.loc 1 212 35 is_stmt 0 view .LVU49
 195 004a 4FF6FF73 		movw	r3, #65535
 196 004e 9942     		cmp	r1, r3
 197 0050 07D0     		beq	.L23
 198              		.loc 1 212 35 discriminator 1 view .LVU50
 199 0052 0A4B     		ldr	r3, .L24+8
 200 0054 03EA4222 		and	r2, r3, r2, lsl #9
 201              	.L18:
 202              		.loc 1 212 33 discriminator 4 view .LVU51
 203 0058 801A     		subs	r0, r0, r2
 204              	.LVL12:
 205              		.loc 1 212 33 discriminator 4 view .LVU52
 206 005a 00F17840 		add	r0, r0, #-134217728
 207              		.loc 1 212 52 discriminator 4 view .LVU53
 208 005e C00A     		lsrs	r0, r0, #11
 209              	.LVL13:
 210              		.loc 1 212 52 discriminator 4 view .LVU54
 211 0060 7047     		bx	lr
 212              	.LVL14:
 213              	.L23:
 214              		.loc 1 212 35 view .LVU55
 215 0062 4FF40022 		mov	r2, #524288
 216 0066 F7E7     		b	.L18
 217              	.L20:
 199:Drivers/STM32L4xx_HAL_Driver/Src/flash_l4.c **** 
 218              		.loc 1 199 7 view .LVU56
 219 0068 4FF0FF30 		mov	r0, #-1
 220              	.LVL15:
 199:Drivers/STM32L4xx_HAL_Driver/Src/flash_l4.c **** 
 221              		.loc 1 199 7 view .LVU57
 222 006c 7047     		bx	lr
 223              	.LVL16:
 224              	.L21:
 199:Drivers/STM32L4xx_HAL_Driver/Src/flash_l4.c **** 
 225              		.loc 1 199 7 view .LVU58
 226 006e 4FF0FF30 		mov	r0, #-1
 227              	.LVL17:
 213:Drivers/STM32L4xx_HAL_Driver/Src/flash_l4.c ****     }
 214:Drivers/STM32L4xx_HAL_Driver/Src/flash_l4.c ****   }
 215:Drivers/STM32L4xx_HAL_Driver/Src/flash_l4.c ****   
 216:Drivers/STM32L4xx_HAL_Driver/Src/flash_l4.c ****   return page;
 228              		.loc 1 216 3 is_stmt 1 view .LVU59
 217:Drivers/STM32L4xx_HAL_Driver/Src/flash_l4.c **** }
 229              		.loc 1 217 1 is_stmt 0 view .LVU60
 230 0072 7047     		bx	lr
 231              	.L25:
 232              		.align	2
ARM GAS  C:\cygwin64\tmp\ccFBQtVc.s 			page 9


 233              	.L24:
 234 0074 E075FF1F 		.word	536835552
 235 0078 00FCFF03 		.word	67107840
 236 007c 00FEFF01 		.word	33553920
 237 0080 00000808 		.word	134742016
 238              		.cfi_endproc
 239              	.LFE321:
 241              		.section	.text.GetPage,"ax",%progbits
 242              		.align	1
 243              		.syntax unified
 244              		.thumb
 245              		.thumb_func
 246              		.fpu fpv4-sp-d16
 248              	GetPage:
 249              	.LVL18:
 250              	.LFB323:
 218:Drivers/STM32L4xx_HAL_Driver/Src/flash_l4.c **** 
 219:Drivers/STM32L4xx_HAL_Driver/Src/flash_l4.c **** /**
 220:Drivers/STM32L4xx_HAL_Driver/Src/flash_l4.c ****   * @brief  Update a chunk of the FLASH memory.
 221:Drivers/STM32L4xx_HAL_Driver/Src/flash_l4.c ****   * @note   The FLASH chunk must no cross a FLASH bank boundary.
 222:Drivers/STM32L4xx_HAL_Driver/Src/flash_l4.c ****   * @note   The source and destination buffers have no specific alignment constraints.
 223:Drivers/STM32L4xx_HAL_Driver/Src/flash_l4.c ****   * @param  In: dst_addr    Destination address in the FLASH memory.
 224:Drivers/STM32L4xx_HAL_Driver/Src/flash_l4.c ****   * @param  In: data        Source address. 
 225:Drivers/STM32L4xx_HAL_Driver/Src/flash_l4.c ****   * @param  In: size        Number of bytes to update.
 226:Drivers/STM32L4xx_HAL_Driver/Src/flash_l4.c ****   * @retval  0:  Success.
 227:Drivers/STM32L4xx_HAL_Driver/Src/flash_l4.c ****   *         <0:  Failure.
 228:Drivers/STM32L4xx_HAL_Driver/Src/flash_l4.c ****   */
 229:Drivers/STM32L4xx_HAL_Driver/Src/flash_l4.c **** int FLASH_update(uint32_t dst_addr, const void *data, uint32_t size)
 230:Drivers/STM32L4xx_HAL_Driver/Src/flash_l4.c **** {
 231:Drivers/STM32L4xx_HAL_Driver/Src/flash_l4.c ****   int ret = 0;
 232:Drivers/STM32L4xx_HAL_Driver/Src/flash_l4.c ****   int remaining = size;
 233:Drivers/STM32L4xx_HAL_Driver/Src/flash_l4.c ****   uint8_t * src_addr = (uint8_t *) data;
 234:Drivers/STM32L4xx_HAL_Driver/Src/flash_l4.c ****   uint64_t page_cache[FLASH_PAGE_SIZE/sizeof(uint64_t)];
 235:Drivers/STM32L4xx_HAL_Driver/Src/flash_l4.c ****  
 236:Drivers/STM32L4xx_HAL_Driver/Src/flash_l4.c ****   __HAL_FLASH_CLEAR_FLAG(FLASH_FLAG_ALL_ERRORS);
 237:Drivers/STM32L4xx_HAL_Driver/Src/flash_l4.c **** 
 238:Drivers/STM32L4xx_HAL_Driver/Src/flash_l4.c ****   do {
 239:Drivers/STM32L4xx_HAL_Driver/Src/flash_l4.c ****     uint32_t fl_addr = ROUND_DOWN(dst_addr, FLASH_PAGE_SIZE);
 240:Drivers/STM32L4xx_HAL_Driver/Src/flash_l4.c ****     int fl_offset = dst_addr - fl_addr;
 241:Drivers/STM32L4xx_HAL_Driver/Src/flash_l4.c ****     int len = MIN(FLASH_PAGE_SIZE - fl_offset, size);
 242:Drivers/STM32L4xx_HAL_Driver/Src/flash_l4.c ****     
 243:Drivers/STM32L4xx_HAL_Driver/Src/flash_l4.c ****     /* Load from the flash into the cache */
 244:Drivers/STM32L4xx_HAL_Driver/Src/flash_l4.c ****     memcpy(page_cache, (void *) fl_addr, FLASH_PAGE_SIZE);  
 245:Drivers/STM32L4xx_HAL_Driver/Src/flash_l4.c ****     /* Update the cache from the source */
 246:Drivers/STM32L4xx_HAL_Driver/Src/flash_l4.c ****     memcpy((uint8_t *)page_cache + fl_offset, src_addr, len);
 247:Drivers/STM32L4xx_HAL_Driver/Src/flash_l4.c ****     /* Erase the page, and write the cache */
 248:Drivers/STM32L4xx_HAL_Driver/Src/flash_l4.c ****     ret = FLASH_unlock_erase(fl_addr, FLASH_PAGE_SIZE);
 249:Drivers/STM32L4xx_HAL_Driver/Src/flash_l4.c ****     if (ret != 0)
 250:Drivers/STM32L4xx_HAL_Driver/Src/flash_l4.c ****     {
 251:Drivers/STM32L4xx_HAL_Driver/Src/flash_l4.c **** #ifndef CODE_UNDER_FIREWALL
 252:Drivers/STM32L4xx_HAL_Driver/Src/flash_l4.c ****       printf("Error erasing at 0x%08lx\n", fl_addr);
 253:Drivers/STM32L4xx_HAL_Driver/Src/flash_l4.c **** #endif
 254:Drivers/STM32L4xx_HAL_Driver/Src/flash_l4.c ****     }
 255:Drivers/STM32L4xx_HAL_Driver/Src/flash_l4.c ****     else
 256:Drivers/STM32L4xx_HAL_Driver/Src/flash_l4.c ****     {
 257:Drivers/STM32L4xx_HAL_Driver/Src/flash_l4.c ****       ret = FLASH_write_at(fl_addr, page_cache, FLASH_PAGE_SIZE);
 258:Drivers/STM32L4xx_HAL_Driver/Src/flash_l4.c ****       if(ret != 0)
ARM GAS  C:\cygwin64\tmp\ccFBQtVc.s 			page 10


 259:Drivers/STM32L4xx_HAL_Driver/Src/flash_l4.c ****       {
 260:Drivers/STM32L4xx_HAL_Driver/Src/flash_l4.c **** #ifndef CODE_UNDER_FIREWALL
 261:Drivers/STM32L4xx_HAL_Driver/Src/flash_l4.c ****         printf("Error writing %lu bytes at 0x%08lx\n", FLASH_PAGE_SIZE, fl_addr);
 262:Drivers/STM32L4xx_HAL_Driver/Src/flash_l4.c **** #endif
 263:Drivers/STM32L4xx_HAL_Driver/Src/flash_l4.c ****       }
 264:Drivers/STM32L4xx_HAL_Driver/Src/flash_l4.c ****       else
 265:Drivers/STM32L4xx_HAL_Driver/Src/flash_l4.c ****       {
 266:Drivers/STM32L4xx_HAL_Driver/Src/flash_l4.c ****         dst_addr += len;
 267:Drivers/STM32L4xx_HAL_Driver/Src/flash_l4.c ****         src_addr += len;
 268:Drivers/STM32L4xx_HAL_Driver/Src/flash_l4.c ****         remaining -= len;
 269:Drivers/STM32L4xx_HAL_Driver/Src/flash_l4.c ****       }
 270:Drivers/STM32L4xx_HAL_Driver/Src/flash_l4.c ****     }
 271:Drivers/STM32L4xx_HAL_Driver/Src/flash_l4.c ****   } while ((ret == 0) && (remaining > 0));
 272:Drivers/STM32L4xx_HAL_Driver/Src/flash_l4.c ****   
 273:Drivers/STM32L4xx_HAL_Driver/Src/flash_l4.c ****   return ret;
 274:Drivers/STM32L4xx_HAL_Driver/Src/flash_l4.c **** }
 275:Drivers/STM32L4xx_HAL_Driver/Src/flash_l4.c **** 
 276:Drivers/STM32L4xx_HAL_Driver/Src/flash_l4.c **** 
 277:Drivers/STM32L4xx_HAL_Driver/Src/flash_l4.c **** static uint32_t GetPage(uint32_t uAddr);
 278:Drivers/STM32L4xx_HAL_Driver/Src/flash_l4.c **** static uint32_t GetBank(uint32_t uAddr);
 279:Drivers/STM32L4xx_HAL_Driver/Src/flash_l4.c **** /* Private functions ---------------------------------------------------------*/
 280:Drivers/STM32L4xx_HAL_Driver/Src/flash_l4.c **** /**
 281:Drivers/STM32L4xx_HAL_Driver/Src/flash_l4.c ****   * @brief  Gets the page of a given address
 282:Drivers/STM32L4xx_HAL_Driver/Src/flash_l4.c ****   * @param  uAddr: Address of the FLASH Memory
 283:Drivers/STM32L4xx_HAL_Driver/Src/flash_l4.c ****   * @retval The page of a given address
 284:Drivers/STM32L4xx_HAL_Driver/Src/flash_l4.c ****   */
 285:Drivers/STM32L4xx_HAL_Driver/Src/flash_l4.c **** static uint32_t GetPage(uint32_t uAddr)
 286:Drivers/STM32L4xx_HAL_Driver/Src/flash_l4.c **** {
 251              		.loc 1 286 1 is_stmt 1 view -0
 252              		.cfi_startproc
 253              		@ args = 0, pretend = 0, frame = 0
 254              		@ frame_needed = 0, uses_anonymous_args = 0
 255              		@ link register save eliminated.
 287:Drivers/STM32L4xx_HAL_Driver/Src/flash_l4.c ****   uint32_t page = 0U;
 256              		.loc 1 287 3 view .LVU62
 288:Drivers/STM32L4xx_HAL_Driver/Src/flash_l4.c **** 
 289:Drivers/STM32L4xx_HAL_Driver/Src/flash_l4.c ****   if (uAddr < (FLASH_BASE + FLASH_BANK_SIZE))
 257              		.loc 1 289 3 view .LVU63
 258              		.loc 1 289 29 is_stmt 0 view .LVU64
 259 0000 0B4B     		ldr	r3, .L31
 260 0002 1A68     		ldr	r2, [r3]
 261 0004 91B2     		uxth	r1, r2
 262              		.loc 1 289 27 view .LVU65
 263 0006 4FF6FF73 		movw	r3, #65535
 264 000a 9942     		cmp	r1, r3
 265 000c 0AD0     		beq	.L30
 266              		.loc 1 289 29 discriminator 1 view .LVU66
 267 000e 094B     		ldr	r3, .L31+4
 268 0010 03EA4223 		and	r3, r3, r2, lsl #9
 269              		.loc 1 289 27 discriminator 1 view .LVU67
 270 0014 03F10063 		add	r3, r3, #134217728
 271              	.L27:
 272              		.loc 1 289 6 discriminator 4 view .LVU68
 273 0018 8342     		cmp	r3, r0
 274 001a 05D9     		bls	.L28
 290:Drivers/STM32L4xx_HAL_Driver/Src/flash_l4.c ****   {
 291:Drivers/STM32L4xx_HAL_Driver/Src/flash_l4.c ****     /* Bank 1 */
ARM GAS  C:\cygwin64\tmp\ccFBQtVc.s 			page 11


 292:Drivers/STM32L4xx_HAL_Driver/Src/flash_l4.c ****     page = (uAddr - FLASH_BASE) / FLASH_PAGE_SIZE;
 275              		.loc 1 292 5 is_stmt 1 view .LVU69
 276              		.loc 1 292 19 is_stmt 0 view .LVU70
 277 001c 00F17840 		add	r0, r0, #-134217728
 278              	.LVL19:
 279              		.loc 1 292 10 view .LVU71
 280 0020 C00A     		lsrs	r0, r0, #11
 281              	.LVL20:
 282              		.loc 1 292 10 view .LVU72
 283 0022 7047     		bx	lr
 284              	.LVL21:
 285              	.L30:
 289:Drivers/STM32L4xx_HAL_Driver/Src/flash_l4.c ****   {
 286              		.loc 1 289 27 view .LVU73
 287 0024 044B     		ldr	r3, .L31+8
 288 0026 F7E7     		b	.L27
 289              	.L28:
 293:Drivers/STM32L4xx_HAL_Driver/Src/flash_l4.c ****   }
 294:Drivers/STM32L4xx_HAL_Driver/Src/flash_l4.c ****   else
 295:Drivers/STM32L4xx_HAL_Driver/Src/flash_l4.c ****   {
 296:Drivers/STM32L4xx_HAL_Driver/Src/flash_l4.c ****     /* Bank 2 */
 297:Drivers/STM32L4xx_HAL_Driver/Src/flash_l4.c ****     page = (uAddr - (FLASH_BASE + FLASH_BANK_SIZE)) / FLASH_PAGE_SIZE;
 290              		.loc 1 297 5 is_stmt 1 discriminator 4 view .LVU74
 291              		.loc 1 297 19 is_stmt 0 discriminator 4 view .LVU75
 292 0028 C01A     		subs	r0, r0, r3
 293              	.LVL22:
 294              		.loc 1 297 10 discriminator 4 view .LVU76
 295 002a C00A     		lsrs	r0, r0, #11
 296              	.LVL23:
 298:Drivers/STM32L4xx_HAL_Driver/Src/flash_l4.c ****   }
 299:Drivers/STM32L4xx_HAL_Driver/Src/flash_l4.c **** 
 300:Drivers/STM32L4xx_HAL_Driver/Src/flash_l4.c ****   return page;
 297              		.loc 1 300 3 is_stmt 1 discriminator 4 view .LVU77
 301:Drivers/STM32L4xx_HAL_Driver/Src/flash_l4.c **** }
 298              		.loc 1 301 1 is_stmt 0 discriminator 4 view .LVU78
 299 002c 7047     		bx	lr
 300              	.L32:
 301 002e 00BF     		.align	2
 302              	.L31:
 303 0030 E075FF1F 		.word	536835552
 304 0034 00FEFF01 		.word	33553920
 305 0038 00000808 		.word	134742016
 306              		.cfi_endproc
 307              	.LFE323:
 309              		.section	.text.GetBank,"ax",%progbits
 310              		.align	1
 311              		.syntax unified
 312              		.thumb
 313              		.thumb_func
 314              		.fpu fpv4-sp-d16
 316              	GetBank:
 317              	.LVL24:
 318              	.LFB324:
 302:Drivers/STM32L4xx_HAL_Driver/Src/flash_l4.c **** 
 303:Drivers/STM32L4xx_HAL_Driver/Src/flash_l4.c **** /**
 304:Drivers/STM32L4xx_HAL_Driver/Src/flash_l4.c ****   * @brief  Gets the bank of a given address
 305:Drivers/STM32L4xx_HAL_Driver/Src/flash_l4.c ****   * @param  uAddr: Address of the FLASH Memory
ARM GAS  C:\cygwin64\tmp\ccFBQtVc.s 			page 12


 306:Drivers/STM32L4xx_HAL_Driver/Src/flash_l4.c ****   * @retval The bank of a given address
 307:Drivers/STM32L4xx_HAL_Driver/Src/flash_l4.c ****   */
 308:Drivers/STM32L4xx_HAL_Driver/Src/flash_l4.c **** static uint32_t GetBank(uint32_t uAddr)
 309:Drivers/STM32L4xx_HAL_Driver/Src/flash_l4.c **** {
 319              		.loc 1 309 1 is_stmt 1 view -0
 320              		.cfi_startproc
 321              		@ args = 0, pretend = 0, frame = 0
 322              		@ frame_needed = 0, uses_anonymous_args = 0
 323              		@ link register save eliminated.
 310:Drivers/STM32L4xx_HAL_Driver/Src/flash_l4.c ****   uint32_t bank = 0U;
 324              		.loc 1 310 3 view .LVU80
 311:Drivers/STM32L4xx_HAL_Driver/Src/flash_l4.c **** 
 312:Drivers/STM32L4xx_HAL_Driver/Src/flash_l4.c ****   if (READ_BIT(SYSCFG->MEMRMP, SYSCFG_MEMRMP_FB_MODE) == 0U)
 325              		.loc 1 312 3 view .LVU81
 326              		.loc 1 312 7 is_stmt 0 view .LVU82
 327 0000 164B     		ldr	r3, .L43
 328 0002 1B68     		ldr	r3, [r3]
 329              		.loc 1 312 6 view .LVU83
 330 0004 13F4807F 		tst	r3, #256
 331 0008 11D1     		bne	.L34
 313:Drivers/STM32L4xx_HAL_Driver/Src/flash_l4.c ****   {
 314:Drivers/STM32L4xx_HAL_Driver/Src/flash_l4.c ****     /* No Bank swap */
 315:Drivers/STM32L4xx_HAL_Driver/Src/flash_l4.c ****     if (uAddr < (FLASH_BASE + FLASH_BANK_SIZE))
 332              		.loc 1 315 5 is_stmt 1 view .LVU84
 333              		.loc 1 315 31 is_stmt 0 view .LVU85
 334 000a 154B     		ldr	r3, .L43+4
 335 000c 1A68     		ldr	r2, [r3]
 336 000e 91B2     		uxth	r1, r2
 337              		.loc 1 315 29 view .LVU86
 338 0010 4FF6FF73 		movw	r3, #65535
 339 0014 9942     		cmp	r1, r3
 340 0016 08D0     		beq	.L38
 341              		.loc 1 315 31 discriminator 1 view .LVU87
 342 0018 124B     		ldr	r3, .L43+8
 343 001a 03EA4223 		and	r3, r3, r2, lsl #9
 344              		.loc 1 315 29 discriminator 1 view .LVU88
 345 001e 03F10063 		add	r3, r3, #134217728
 346              	.L35:
 347              		.loc 1 315 8 discriminator 4 view .LVU89
 348 0022 8342     		cmp	r3, r0
 349 0024 17D9     		bls	.L39
 316:Drivers/STM32L4xx_HAL_Driver/Src/flash_l4.c ****     {
 317:Drivers/STM32L4xx_HAL_Driver/Src/flash_l4.c ****       bank = FLASH_BANK_1;
 350              		.loc 1 317 12 view .LVU90
 351 0026 0120     		movs	r0, #1
 352              	.LVL25:
 353              		.loc 1 317 12 view .LVU91
 354 0028 7047     		bx	lr
 355              	.LVL26:
 356              	.L38:
 315:Drivers/STM32L4xx_HAL_Driver/Src/flash_l4.c ****     {
 357              		.loc 1 315 29 view .LVU92
 358 002a 0F4B     		ldr	r3, .L43+12
 359 002c F9E7     		b	.L35
 360              	.L34:
 318:Drivers/STM32L4xx_HAL_Driver/Src/flash_l4.c ****     }
 319:Drivers/STM32L4xx_HAL_Driver/Src/flash_l4.c ****     else
ARM GAS  C:\cygwin64\tmp\ccFBQtVc.s 			page 13


 320:Drivers/STM32L4xx_HAL_Driver/Src/flash_l4.c ****     {
 321:Drivers/STM32L4xx_HAL_Driver/Src/flash_l4.c ****       bank = FLASH_BANK_2;
 322:Drivers/STM32L4xx_HAL_Driver/Src/flash_l4.c ****     }
 323:Drivers/STM32L4xx_HAL_Driver/Src/flash_l4.c ****   }
 324:Drivers/STM32L4xx_HAL_Driver/Src/flash_l4.c ****   else
 325:Drivers/STM32L4xx_HAL_Driver/Src/flash_l4.c ****   {
 326:Drivers/STM32L4xx_HAL_Driver/Src/flash_l4.c ****     /* Bank swap */
 327:Drivers/STM32L4xx_HAL_Driver/Src/flash_l4.c ****     if (uAddr < (FLASH_BASE + FLASH_BANK_SIZE))
 361              		.loc 1 327 5 is_stmt 1 view .LVU93
 362              		.loc 1 327 31 is_stmt 0 view .LVU94
 363 002e 0C4B     		ldr	r3, .L43+4
 364 0030 1A68     		ldr	r2, [r3]
 365 0032 91B2     		uxth	r1, r2
 366              		.loc 1 327 29 view .LVU95
 367 0034 4FF6FF73 		movw	r3, #65535
 368 0038 9942     		cmp	r1, r3
 369 003a 08D0     		beq	.L40
 370              		.loc 1 327 31 discriminator 1 view .LVU96
 371 003c 094B     		ldr	r3, .L43+8
 372 003e 03EA4223 		and	r3, r3, r2, lsl #9
 373              		.loc 1 327 29 discriminator 1 view .LVU97
 374 0042 03F10063 		add	r3, r3, #134217728
 375              	.L37:
 376              		.loc 1 327 8 discriminator 4 view .LVU98
 377 0046 8342     		cmp	r3, r0
 378 0048 03D8     		bhi	.L42
 328:Drivers/STM32L4xx_HAL_Driver/Src/flash_l4.c ****     {
 329:Drivers/STM32L4xx_HAL_Driver/Src/flash_l4.c ****       bank = FLASH_BANK_2;
 330:Drivers/STM32L4xx_HAL_Driver/Src/flash_l4.c ****     }
 331:Drivers/STM32L4xx_HAL_Driver/Src/flash_l4.c ****     else
 332:Drivers/STM32L4xx_HAL_Driver/Src/flash_l4.c ****     {
 333:Drivers/STM32L4xx_HAL_Driver/Src/flash_l4.c ****       bank = FLASH_BANK_1;
 379              		.loc 1 333 12 view .LVU99
 380 004a 0120     		movs	r0, #1
 381              	.LVL27:
 334:Drivers/STM32L4xx_HAL_Driver/Src/flash_l4.c ****     }
 335:Drivers/STM32L4xx_HAL_Driver/Src/flash_l4.c ****   }
 336:Drivers/STM32L4xx_HAL_Driver/Src/flash_l4.c **** 
 337:Drivers/STM32L4xx_HAL_Driver/Src/flash_l4.c ****   return bank;
 382              		.loc 1 337 3 is_stmt 1 view .LVU100
 338:Drivers/STM32L4xx_HAL_Driver/Src/flash_l4.c **** }
 383              		.loc 1 338 1 is_stmt 0 view .LVU101
 384 004c 7047     		bx	lr
 385              	.LVL28:
 386              	.L40:
 327:Drivers/STM32L4xx_HAL_Driver/Src/flash_l4.c ****     {
 387              		.loc 1 327 29 view .LVU102
 388 004e 064B     		ldr	r3, .L43+12
 389 0050 F9E7     		b	.L37
 390              	.L42:
 329:Drivers/STM32L4xx_HAL_Driver/Src/flash_l4.c ****     }
 391              		.loc 1 329 12 view .LVU103
 392 0052 0220     		movs	r0, #2
 393              	.LVL29:
 329:Drivers/STM32L4xx_HAL_Driver/Src/flash_l4.c ****     }
 394              		.loc 1 329 12 view .LVU104
 395 0054 7047     		bx	lr
ARM GAS  C:\cygwin64\tmp\ccFBQtVc.s 			page 14


 396              	.LVL30:
 397              	.L39:
 321:Drivers/STM32L4xx_HAL_Driver/Src/flash_l4.c ****     }
 398              		.loc 1 321 12 view .LVU105
 399 0056 0220     		movs	r0, #2
 400              	.LVL31:
 321:Drivers/STM32L4xx_HAL_Driver/Src/flash_l4.c ****     }
 401              		.loc 1 321 12 view .LVU106
 402 0058 7047     		bx	lr
 403              	.L44:
 404 005a 00BF     		.align	2
 405              	.L43:
 406 005c 00000140 		.word	1073807360
 407 0060 E075FF1F 		.word	536835552
 408 0064 00FEFF01 		.word	33553920
 409 0068 00000808 		.word	134742016
 410              		.cfi_endproc
 411              	.LFE324:
 413              		.section	.rodata.FLASH_unlock_erase.str1.4,"aMS",%progbits,1
 414              		.align	2
 415              	.LC0:
 416 0000 4572726F 		.ascii	"Error: Cannot erase across FLASH banks.\000"
 416      723A2043 
 416      616E6E6F 
 416      74206572 
 416      61736520 
 417              		.align	2
 418              	.LC1:
 419 0028 4572726F 		.ascii	"Error erasing at 0x%08lx\012\000"
 419      72206572 
 419      6173696E 
 419      67206174 
 419      20307825 
 420              		.section	.text.FLASH_unlock_erase,"ax",%progbits
 421              		.align	1
 422              		.syntax unified
 423              		.thumb
 424              		.thumb_func
 425              		.fpu fpv4-sp-d16
 427              	FLASH_unlock_erase:
 428              	.LVL32:
 429              	.LFB318:
  77:Drivers/STM32L4xx_HAL_Driver/Src/flash_l4.c ****   int rc = -1;
 430              		.loc 1 77 1 is_stmt 1 view -0
 431              		.cfi_startproc
 432              		@ args = 0, pretend = 0, frame = 24
 433              		@ frame_needed = 0, uses_anonymous_args = 0
  77:Drivers/STM32L4xx_HAL_Driver/Src/flash_l4.c ****   int rc = -1;
 434              		.loc 1 77 1 is_stmt 0 view .LVU108
 435 0000 70B5     		push	{r4, r5, r6, lr}
 436              	.LCFI0:
 437              		.cfi_def_cfa_offset 16
 438              		.cfi_offset 4, -16
 439              		.cfi_offset 5, -12
 440              		.cfi_offset 6, -8
 441              		.cfi_offset 14, -4
 442 0002 86B0     		sub	sp, sp, #24
ARM GAS  C:\cygwin64\tmp\ccFBQtVc.s 			page 15


 443              	.LCFI1:
 444              		.cfi_def_cfa_offset 40
 445 0004 0646     		mov	r6, r0
 446 0006 0C46     		mov	r4, r1
  78:Drivers/STM32L4xx_HAL_Driver/Src/flash_l4.c ****   uint32_t PageError = 0;
 447              		.loc 1 78 3 is_stmt 1 view .LVU109
 448              	.LVL33:
  79:Drivers/STM32L4xx_HAL_Driver/Src/flash_l4.c ****   FLASH_EraseInitTypeDef EraseInit;
 449              		.loc 1 79 3 view .LVU110
  79:Drivers/STM32L4xx_HAL_Driver/Src/flash_l4.c ****   FLASH_EraseInitTypeDef EraseInit;
 450              		.loc 1 79 12 is_stmt 0 view .LVU111
 451 0008 0023     		movs	r3, #0
 452 000a 0593     		str	r3, [sp, #20]
  80:Drivers/STM32L4xx_HAL_Driver/Src/flash_l4.c **** 
 453              		.loc 1 80 3 is_stmt 1 view .LVU112
  87:Drivers/STM32L4xx_HAL_Driver/Src/flash_l4.c ****   
 454              		.loc 1 87 3 view .LVU113
  87:Drivers/STM32L4xx_HAL_Driver/Src/flash_l4.c ****   
 455              		.loc 1 87 23 is_stmt 0 view .LVU114
 456 000c 0193     		str	r3, [sp, #4]
  89:Drivers/STM32L4xx_HAL_Driver/Src/flash_l4.c ****   if (EraseInit.Banks != FLASH_get_bank(address + len_bytes))
 457              		.loc 1 89 3 is_stmt 1 view .LVU115
  89:Drivers/STM32L4xx_HAL_Driver/Src/flash_l4.c ****   if (EraseInit.Banks != FLASH_get_bank(address + len_bytes))
 458              		.loc 1 89 21 is_stmt 0 view .LVU116
 459 000e FFF7FEFF 		bl	FLASH_get_bank
 460              	.LVL34:
  89:Drivers/STM32L4xx_HAL_Driver/Src/flash_l4.c ****   if (EraseInit.Banks != FLASH_get_bank(address + len_bytes))
 461              		.loc 1 89 21 view .LVU117
 462 0012 0546     		mov	r5, r0
  89:Drivers/STM32L4xx_HAL_Driver/Src/flash_l4.c ****   if (EraseInit.Banks != FLASH_get_bank(address + len_bytes))
 463              		.loc 1 89 19 view .LVU118
 464 0014 0290     		str	r0, [sp, #8]
  90:Drivers/STM32L4xx_HAL_Driver/Src/flash_l4.c ****   {
 465              		.loc 1 90 3 is_stmt 1 view .LVU119
  90:Drivers/STM32L4xx_HAL_Driver/Src/flash_l4.c ****   {
 466              		.loc 1 90 26 is_stmt 0 view .LVU120
 467 0016 3444     		add	r4, r4, r6
 468              	.LVL35:
  90:Drivers/STM32L4xx_HAL_Driver/Src/flash_l4.c ****   {
 469              		.loc 1 90 26 view .LVU121
 470 0018 2046     		mov	r0, r4
 471 001a FFF7FEFF 		bl	FLASH_get_bank
 472              	.LVL36:
  90:Drivers/STM32L4xx_HAL_Driver/Src/flash_l4.c ****   {
 473              		.loc 1 90 6 view .LVU122
 474 001e 8542     		cmp	r5, r0
 475 0020 14D1     		bne	.L50
  99:Drivers/STM32L4xx_HAL_Driver/Src/flash_l4.c ****     EraseInit.NbPages = FLASH_get_pageInBank(address + len_bytes - 1) - EraseInit.Page + 1;
 476              		.loc 1 99 5 is_stmt 1 view .LVU123
  99:Drivers/STM32L4xx_HAL_Driver/Src/flash_l4.c ****     EraseInit.NbPages = FLASH_get_pageInBank(address + len_bytes - 1) - EraseInit.Page + 1;
 477              		.loc 1 99 22 is_stmt 0 view .LVU124
 478 0022 3046     		mov	r0, r6
 479 0024 FFF7FEFF 		bl	FLASH_get_pageInBank
 480              	.LVL37:
 481 0028 0546     		mov	r5, r0
  99:Drivers/STM32L4xx_HAL_Driver/Src/flash_l4.c ****     EraseInit.NbPages = FLASH_get_pageInBank(address + len_bytes - 1) - EraseInit.Page + 1;
 482              		.loc 1 99 20 view .LVU125
ARM GAS  C:\cygwin64\tmp\ccFBQtVc.s 			page 16


 483 002a 0390     		str	r0, [sp, #12]
 100:Drivers/STM32L4xx_HAL_Driver/Src/flash_l4.c ****     
 484              		.loc 1 100 5 is_stmt 1 view .LVU126
 100:Drivers/STM32L4xx_HAL_Driver/Src/flash_l4.c ****     
 485              		.loc 1 100 25 is_stmt 0 view .LVU127
 486 002c 601E     		subs	r0, r4, #1
 487 002e FFF7FEFF 		bl	FLASH_get_pageInBank
 488              	.LVL38:
 100:Drivers/STM32L4xx_HAL_Driver/Src/flash_l4.c ****     
 489              		.loc 1 100 71 view .LVU128
 490 0032 431B     		subs	r3, r0, r5
 100:Drivers/STM32L4xx_HAL_Driver/Src/flash_l4.c ****     
 491              		.loc 1 100 88 view .LVU129
 492 0034 0133     		adds	r3, r3, #1
 100:Drivers/STM32L4xx_HAL_Driver/Src/flash_l4.c ****     
 493              		.loc 1 100 23 view .LVU130
 494 0036 0493     		str	r3, [sp, #16]
 102:Drivers/STM32L4xx_HAL_Driver/Src/flash_l4.c ****     
 495              		.loc 1 102 5 is_stmt 1 view .LVU131
 496 0038 FFF7FEFF 		bl	HAL_FLASH_Unlock
 497              	.LVL39:
 104:Drivers/STM32L4xx_HAL_Driver/Src/flash_l4.c ****     {
 498              		.loc 1 104 5 view .LVU132
 104:Drivers/STM32L4xx_HAL_Driver/Src/flash_l4.c ****     {
 499              		.loc 1 104 9 is_stmt 0 view .LVU133
 500 003c 05A9     		add	r1, sp, #20
 501 003e 01A8     		add	r0, sp, #4
 502 0040 FFF7FEFF 		bl	HAL_FLASHEx_Erase
 503              	.LVL40:
 104:Drivers/STM32L4xx_HAL_Driver/Src/flash_l4.c ****     {
 504              		.loc 1 104 8 view .LVU134
 505 0044 40B9     		cbnz	r0, .L51
 106:Drivers/STM32L4xx_HAL_Driver/Src/flash_l4.c ****     }
 506              		.loc 1 106 10 view .LVU135
 507 0046 0020     		movs	r0, #0
 508              	.LVL41:
 509              	.L45:
 116:Drivers/STM32L4xx_HAL_Driver/Src/flash_l4.c **** 
 510              		.loc 1 116 1 view .LVU136
 511 0048 06B0     		add	sp, sp, #24
 512              	.LCFI2:
 513              		.cfi_remember_state
 514              		.cfi_def_cfa_offset 16
 515              		@ sp needed
 516 004a 70BD     		pop	{r4, r5, r6, pc}
 517              	.LVL42:
 518              	.L50:
 519              	.LCFI3:
 520              		.cfi_restore_state
  93:Drivers/STM32L4xx_HAL_Driver/Src/flash_l4.c **** #endif
 521              		.loc 1 93 5 is_stmt 1 view .LVU137
 522 004c 0648     		ldr	r0, .L52
 523 004e FFF7FEFF 		bl	puts
 524              	.LVL43:
  95:Drivers/STM32L4xx_HAL_Driver/Src/flash_l4.c ****   }
 525              		.loc 1 95 5 view .LVU138
  95:Drivers/STM32L4xx_HAL_Driver/Src/flash_l4.c ****   }
ARM GAS  C:\cygwin64\tmp\ccFBQtVc.s 			page 17


 526              		.loc 1 95 12 is_stmt 0 view .LVU139
 527 0052 4FF0FF30 		mov	r0, #-1
 528 0056 F7E7     		b	.L45
 529              	.L51:
 111:Drivers/STM32L4xx_HAL_Driver/Src/flash_l4.c **** #endif
 530              		.loc 1 111 7 is_stmt 1 view .LVU140
 531 0058 3146     		mov	r1, r6
 532 005a 0448     		ldr	r0, .L52+4
 533 005c FFF7FEFF 		bl	printf
 534              	.LVL44:
  78:Drivers/STM32L4xx_HAL_Driver/Src/flash_l4.c ****   uint32_t PageError = 0;
 535              		.loc 1 78 7 is_stmt 0 view .LVU141
 536 0060 4FF0FF30 		mov	r0, #-1
 537 0064 F0E7     		b	.L45
 538              	.L53:
 539 0066 00BF     		.align	2
 540              	.L52:
 541 0068 00000000 		.word	.LC0
 542 006c 28000000 		.word	.LC1
 543              		.cfi_endproc
 544              	.LFE318:
 546              		.section	.rodata.FLASH_write_at.str1.4,"aMS",%progbits,1
 547              		.align	2
 548              	.LC2:
 549 0000 57726974 		.ascii	"Write failed @0x%08lx, read value=0x%08lx, expected"
 549      65206661 
 549      696C6564 
 549      20403078 
 549      2530386C 
 550 0033 3D307825 		.ascii	"=0x%08lx\012\000"
 550      30386C78 
 550      0A00
 551              		.section	.text.FLASH_write_at,"ax",%progbits
 552              		.align	1
 553              		.syntax unified
 554              		.thumb
 555              		.thumb_func
 556              		.fpu fpv4-sp-d16
 558              	FLASH_write_at:
 559              	.LVL45:
 560              	.LFB319:
 127:Drivers/STM32L4xx_HAL_Driver/Src/flash_l4.c ****   int i;
 561              		.loc 1 127 1 is_stmt 1 view -0
 562              		.cfi_startproc
 563              		@ args = 0, pretend = 0, frame = 0
 564              		@ frame_needed = 0, uses_anonymous_args = 0
 127:Drivers/STM32L4xx_HAL_Driver/Src/flash_l4.c ****   int i;
 565              		.loc 1 127 1 is_stmt 0 view .LVU143
 566 0000 2DE9F041 		push	{r4, r5, r6, r7, r8, lr}
 567              	.LCFI4:
 568              		.cfi_def_cfa_offset 24
 569              		.cfi_offset 4, -24
 570              		.cfi_offset 5, -20
 571              		.cfi_offset 6, -16
 572              		.cfi_offset 7, -12
 573              		.cfi_offset 8, -8
 574              		.cfi_offset 14, -4
ARM GAS  C:\cygwin64\tmp\ccFBQtVc.s 			page 18


 575 0004 0646     		mov	r6, r0
 576 0006 0F46     		mov	r7, r1
 577 0008 1546     		mov	r5, r2
 128:Drivers/STM32L4xx_HAL_Driver/Src/flash_l4.c ****   int ret = -1;
 578              		.loc 1 128 3 is_stmt 1 view .LVU144
 129:Drivers/STM32L4xx_HAL_Driver/Src/flash_l4.c **** #ifndef CODE_UNDER_FIREWALL    
 579              		.loc 1 129 3 view .LVU145
 580              	.LVL46:
 132:Drivers/STM32L4xx_HAL_Driver/Src/flash_l4.c **** #endif
 581              		.loc 1 132 3 view .LVU146
 582              	.LBB7:
 583              	.LBI7:
 584              		.file 2 "Drivers/CMSIS/Include/cmsis_gcc.h"
   1:Drivers/CMSIS/Include/cmsis_gcc.h **** /**************************************************************************//**
   2:Drivers/CMSIS/Include/cmsis_gcc.h ****  * @file     cmsis_gcc.h
   3:Drivers/CMSIS/Include/cmsis_gcc.h ****  * @brief    CMSIS compiler GCC header file
   4:Drivers/CMSIS/Include/cmsis_gcc.h ****  * @version  V5.0.4
   5:Drivers/CMSIS/Include/cmsis_gcc.h ****  * @date     09. April 2018
   6:Drivers/CMSIS/Include/cmsis_gcc.h ****  ******************************************************************************/
   7:Drivers/CMSIS/Include/cmsis_gcc.h **** /*
   8:Drivers/CMSIS/Include/cmsis_gcc.h ****  * Copyright (c) 2009-2018 Arm Limited. All rights reserved.
   9:Drivers/CMSIS/Include/cmsis_gcc.h ****  *
  10:Drivers/CMSIS/Include/cmsis_gcc.h ****  * SPDX-License-Identifier: Apache-2.0
  11:Drivers/CMSIS/Include/cmsis_gcc.h ****  *
  12:Drivers/CMSIS/Include/cmsis_gcc.h ****  * Licensed under the Apache License, Version 2.0 (the License); you may
  13:Drivers/CMSIS/Include/cmsis_gcc.h ****  * not use this file except in compliance with the License.
  14:Drivers/CMSIS/Include/cmsis_gcc.h ****  * You may obtain a copy of the License at
  15:Drivers/CMSIS/Include/cmsis_gcc.h ****  *
  16:Drivers/CMSIS/Include/cmsis_gcc.h ****  * www.apache.org/licenses/LICENSE-2.0
  17:Drivers/CMSIS/Include/cmsis_gcc.h ****  *
  18:Drivers/CMSIS/Include/cmsis_gcc.h ****  * Unless required by applicable law or agreed to in writing, software
  19:Drivers/CMSIS/Include/cmsis_gcc.h ****  * distributed under the License is distributed on an AS IS BASIS, WITHOUT
  20:Drivers/CMSIS/Include/cmsis_gcc.h ****  * WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
  21:Drivers/CMSIS/Include/cmsis_gcc.h ****  * See the License for the specific language governing permissions and
  22:Drivers/CMSIS/Include/cmsis_gcc.h ****  * limitations under the License.
  23:Drivers/CMSIS/Include/cmsis_gcc.h ****  */
  24:Drivers/CMSIS/Include/cmsis_gcc.h **** 
  25:Drivers/CMSIS/Include/cmsis_gcc.h **** #ifndef __CMSIS_GCC_H
  26:Drivers/CMSIS/Include/cmsis_gcc.h **** #define __CMSIS_GCC_H
  27:Drivers/CMSIS/Include/cmsis_gcc.h **** 
  28:Drivers/CMSIS/Include/cmsis_gcc.h **** /* ignore some GCC warnings */
  29:Drivers/CMSIS/Include/cmsis_gcc.h **** #pragma GCC diagnostic push
  30:Drivers/CMSIS/Include/cmsis_gcc.h **** #pragma GCC diagnostic ignored "-Wsign-conversion"
  31:Drivers/CMSIS/Include/cmsis_gcc.h **** #pragma GCC diagnostic ignored "-Wconversion"
  32:Drivers/CMSIS/Include/cmsis_gcc.h **** #pragma GCC diagnostic ignored "-Wunused-parameter"
  33:Drivers/CMSIS/Include/cmsis_gcc.h **** 
  34:Drivers/CMSIS/Include/cmsis_gcc.h **** /* Fallback for __has_builtin */
  35:Drivers/CMSIS/Include/cmsis_gcc.h **** #ifndef __has_builtin
  36:Drivers/CMSIS/Include/cmsis_gcc.h ****   #define __has_builtin(x) (0)
  37:Drivers/CMSIS/Include/cmsis_gcc.h **** #endif
  38:Drivers/CMSIS/Include/cmsis_gcc.h **** 
  39:Drivers/CMSIS/Include/cmsis_gcc.h **** /* CMSIS compiler specific defines */
  40:Drivers/CMSIS/Include/cmsis_gcc.h **** #ifndef   __ASM
  41:Drivers/CMSIS/Include/cmsis_gcc.h ****   #define __ASM                                  __asm
  42:Drivers/CMSIS/Include/cmsis_gcc.h **** #endif
  43:Drivers/CMSIS/Include/cmsis_gcc.h **** #ifndef   __INLINE
  44:Drivers/CMSIS/Include/cmsis_gcc.h ****   #define __INLINE                               inline
ARM GAS  C:\cygwin64\tmp\ccFBQtVc.s 			page 19


  45:Drivers/CMSIS/Include/cmsis_gcc.h **** #endif
  46:Drivers/CMSIS/Include/cmsis_gcc.h **** #ifndef   __STATIC_INLINE
  47:Drivers/CMSIS/Include/cmsis_gcc.h ****   #define __STATIC_INLINE                        static inline
  48:Drivers/CMSIS/Include/cmsis_gcc.h **** #endif
  49:Drivers/CMSIS/Include/cmsis_gcc.h **** #ifndef   __STATIC_FORCEINLINE                 
  50:Drivers/CMSIS/Include/cmsis_gcc.h ****   #define __STATIC_FORCEINLINE                   __attribute__((always_inline)) static inline
  51:Drivers/CMSIS/Include/cmsis_gcc.h **** #endif                                           
  52:Drivers/CMSIS/Include/cmsis_gcc.h **** #ifndef   __NO_RETURN
  53:Drivers/CMSIS/Include/cmsis_gcc.h ****   #define __NO_RETURN                            __attribute__((__noreturn__))
  54:Drivers/CMSIS/Include/cmsis_gcc.h **** #endif
  55:Drivers/CMSIS/Include/cmsis_gcc.h **** #ifndef   __USED
  56:Drivers/CMSIS/Include/cmsis_gcc.h ****   #define __USED                                 __attribute__((used))
  57:Drivers/CMSIS/Include/cmsis_gcc.h **** #endif
  58:Drivers/CMSIS/Include/cmsis_gcc.h **** #ifndef   __WEAK
  59:Drivers/CMSIS/Include/cmsis_gcc.h ****   #define __WEAK                                 __attribute__((weak))
  60:Drivers/CMSIS/Include/cmsis_gcc.h **** #endif
  61:Drivers/CMSIS/Include/cmsis_gcc.h **** #ifndef   __PACKED
  62:Drivers/CMSIS/Include/cmsis_gcc.h ****   #define __PACKED                               __attribute__((packed, aligned(1)))
  63:Drivers/CMSIS/Include/cmsis_gcc.h **** #endif
  64:Drivers/CMSIS/Include/cmsis_gcc.h **** #ifndef   __PACKED_STRUCT
  65:Drivers/CMSIS/Include/cmsis_gcc.h ****   #define __PACKED_STRUCT                        struct __attribute__((packed, aligned(1)))
  66:Drivers/CMSIS/Include/cmsis_gcc.h **** #endif
  67:Drivers/CMSIS/Include/cmsis_gcc.h **** #ifndef   __PACKED_UNION
  68:Drivers/CMSIS/Include/cmsis_gcc.h ****   #define __PACKED_UNION                         union __attribute__((packed, aligned(1)))
  69:Drivers/CMSIS/Include/cmsis_gcc.h **** #endif
  70:Drivers/CMSIS/Include/cmsis_gcc.h **** #ifndef   __UNALIGNED_UINT32        /* deprecated */
  71:Drivers/CMSIS/Include/cmsis_gcc.h ****   #pragma GCC diagnostic push
  72:Drivers/CMSIS/Include/cmsis_gcc.h ****   #pragma GCC diagnostic ignored "-Wpacked"
  73:Drivers/CMSIS/Include/cmsis_gcc.h ****   #pragma GCC diagnostic ignored "-Wattributes"
  74:Drivers/CMSIS/Include/cmsis_gcc.h ****   struct __attribute__((packed)) T_UINT32 { uint32_t v; };
  75:Drivers/CMSIS/Include/cmsis_gcc.h ****   #pragma GCC diagnostic pop
  76:Drivers/CMSIS/Include/cmsis_gcc.h ****   #define __UNALIGNED_UINT32(x)                  (((struct T_UINT32 *)(x))->v)
  77:Drivers/CMSIS/Include/cmsis_gcc.h **** #endif
  78:Drivers/CMSIS/Include/cmsis_gcc.h **** #ifndef   __UNALIGNED_UINT16_WRITE
  79:Drivers/CMSIS/Include/cmsis_gcc.h ****   #pragma GCC diagnostic push
  80:Drivers/CMSIS/Include/cmsis_gcc.h ****   #pragma GCC diagnostic ignored "-Wpacked"
  81:Drivers/CMSIS/Include/cmsis_gcc.h ****   #pragma GCC diagnostic ignored "-Wattributes"
  82:Drivers/CMSIS/Include/cmsis_gcc.h ****   __PACKED_STRUCT T_UINT16_WRITE { uint16_t v; };
  83:Drivers/CMSIS/Include/cmsis_gcc.h ****   #pragma GCC diagnostic pop
  84:Drivers/CMSIS/Include/cmsis_gcc.h ****   #define __UNALIGNED_UINT16_WRITE(addr, val)    (void)((((struct T_UINT16_WRITE *)(void *)(addr))-
  85:Drivers/CMSIS/Include/cmsis_gcc.h **** #endif
  86:Drivers/CMSIS/Include/cmsis_gcc.h **** #ifndef   __UNALIGNED_UINT16_READ
  87:Drivers/CMSIS/Include/cmsis_gcc.h ****   #pragma GCC diagnostic push
  88:Drivers/CMSIS/Include/cmsis_gcc.h ****   #pragma GCC diagnostic ignored "-Wpacked"
  89:Drivers/CMSIS/Include/cmsis_gcc.h ****   #pragma GCC diagnostic ignored "-Wattributes"
  90:Drivers/CMSIS/Include/cmsis_gcc.h ****   __PACKED_STRUCT T_UINT16_READ { uint16_t v; };
  91:Drivers/CMSIS/Include/cmsis_gcc.h ****   #pragma GCC diagnostic pop
  92:Drivers/CMSIS/Include/cmsis_gcc.h ****   #define __UNALIGNED_UINT16_READ(addr)          (((const struct T_UINT16_READ *)(const void *)(add
  93:Drivers/CMSIS/Include/cmsis_gcc.h **** #endif
  94:Drivers/CMSIS/Include/cmsis_gcc.h **** #ifndef   __UNALIGNED_UINT32_WRITE
  95:Drivers/CMSIS/Include/cmsis_gcc.h ****   #pragma GCC diagnostic push
  96:Drivers/CMSIS/Include/cmsis_gcc.h ****   #pragma GCC diagnostic ignored "-Wpacked"
  97:Drivers/CMSIS/Include/cmsis_gcc.h ****   #pragma GCC diagnostic ignored "-Wattributes"
  98:Drivers/CMSIS/Include/cmsis_gcc.h ****   __PACKED_STRUCT T_UINT32_WRITE { uint32_t v; };
  99:Drivers/CMSIS/Include/cmsis_gcc.h ****   #pragma GCC diagnostic pop
 100:Drivers/CMSIS/Include/cmsis_gcc.h ****   #define __UNALIGNED_UINT32_WRITE(addr, val)    (void)((((struct T_UINT32_WRITE *)(void *)(addr))-
 101:Drivers/CMSIS/Include/cmsis_gcc.h **** #endif
ARM GAS  C:\cygwin64\tmp\ccFBQtVc.s 			page 20


 102:Drivers/CMSIS/Include/cmsis_gcc.h **** #ifndef   __UNALIGNED_UINT32_READ
 103:Drivers/CMSIS/Include/cmsis_gcc.h ****   #pragma GCC diagnostic push
 104:Drivers/CMSIS/Include/cmsis_gcc.h ****   #pragma GCC diagnostic ignored "-Wpacked"
 105:Drivers/CMSIS/Include/cmsis_gcc.h ****   #pragma GCC diagnostic ignored "-Wattributes"
 106:Drivers/CMSIS/Include/cmsis_gcc.h ****   __PACKED_STRUCT T_UINT32_READ { uint32_t v; };
 107:Drivers/CMSIS/Include/cmsis_gcc.h ****   #pragma GCC diagnostic pop
 108:Drivers/CMSIS/Include/cmsis_gcc.h ****   #define __UNALIGNED_UINT32_READ(addr)          (((const struct T_UINT32_READ *)(const void *)(add
 109:Drivers/CMSIS/Include/cmsis_gcc.h **** #endif
 110:Drivers/CMSIS/Include/cmsis_gcc.h **** #ifndef   __ALIGNED
 111:Drivers/CMSIS/Include/cmsis_gcc.h ****   #define __ALIGNED(x)                           __attribute__((aligned(x)))
 112:Drivers/CMSIS/Include/cmsis_gcc.h **** #endif
 113:Drivers/CMSIS/Include/cmsis_gcc.h **** #ifndef   __RESTRICT
 114:Drivers/CMSIS/Include/cmsis_gcc.h ****   #define __RESTRICT                             __restrict
 115:Drivers/CMSIS/Include/cmsis_gcc.h **** #endif
 116:Drivers/CMSIS/Include/cmsis_gcc.h **** 
 117:Drivers/CMSIS/Include/cmsis_gcc.h **** 
 118:Drivers/CMSIS/Include/cmsis_gcc.h **** /* ###########################  Core Function Access  ########################### */
 119:Drivers/CMSIS/Include/cmsis_gcc.h **** /** \ingroup  CMSIS_Core_FunctionInterface
 120:Drivers/CMSIS/Include/cmsis_gcc.h ****     \defgroup CMSIS_Core_RegAccFunctions CMSIS Core Register Access Functions
 121:Drivers/CMSIS/Include/cmsis_gcc.h ****   @{
 122:Drivers/CMSIS/Include/cmsis_gcc.h ****  */
 123:Drivers/CMSIS/Include/cmsis_gcc.h **** 
 124:Drivers/CMSIS/Include/cmsis_gcc.h **** /**
 125:Drivers/CMSIS/Include/cmsis_gcc.h ****   \brief   Enable IRQ Interrupts
 126:Drivers/CMSIS/Include/cmsis_gcc.h ****   \details Enables IRQ interrupts by clearing the I-bit in the CPSR.
 127:Drivers/CMSIS/Include/cmsis_gcc.h ****            Can only be executed in Privileged modes.
 128:Drivers/CMSIS/Include/cmsis_gcc.h ****  */
 129:Drivers/CMSIS/Include/cmsis_gcc.h **** __STATIC_FORCEINLINE void __enable_irq(void)
 130:Drivers/CMSIS/Include/cmsis_gcc.h **** {
 131:Drivers/CMSIS/Include/cmsis_gcc.h ****   __ASM volatile ("cpsie i" : : : "memory");
 132:Drivers/CMSIS/Include/cmsis_gcc.h **** }
 133:Drivers/CMSIS/Include/cmsis_gcc.h **** 
 134:Drivers/CMSIS/Include/cmsis_gcc.h **** 
 135:Drivers/CMSIS/Include/cmsis_gcc.h **** /**
 136:Drivers/CMSIS/Include/cmsis_gcc.h ****   \brief   Disable IRQ Interrupts
 137:Drivers/CMSIS/Include/cmsis_gcc.h ****   \details Disables IRQ interrupts by setting the I-bit in the CPSR.
 138:Drivers/CMSIS/Include/cmsis_gcc.h ****            Can only be executed in Privileged modes.
 139:Drivers/CMSIS/Include/cmsis_gcc.h ****  */
 140:Drivers/CMSIS/Include/cmsis_gcc.h **** __STATIC_FORCEINLINE void __disable_irq(void)
 585              		.loc 2 140 27 view .LVU147
 586              	.LBB8:
 141:Drivers/CMSIS/Include/cmsis_gcc.h **** {
 142:Drivers/CMSIS/Include/cmsis_gcc.h ****   __ASM volatile ("cpsid i" : : : "memory");
 587              		.loc 2 142 3 view .LVU148
 588              		.syntax unified
 589              	@ 142 "Drivers/CMSIS/Include/cmsis_gcc.h" 1
 590 000a 72B6     		cpsid i
 591              	@ 0 "" 2
 592              		.thumb
 593              		.syntax unified
 594              	.LBE8:
 595              	.LBE7:
 135:Drivers/STM32L4xx_HAL_Driver/Src/flash_l4.c ****   {
 596              		.loc 1 135 3 view .LVU149
 597              	.LVL47:
 135:Drivers/STM32L4xx_HAL_Driver/Src/flash_l4.c ****   {
 598              		.loc 1 135 10 is_stmt 0 view .LVU150
ARM GAS  C:\cygwin64\tmp\ccFBQtVc.s 			page 21


 599 000c 0024     		movs	r4, #0
 135:Drivers/STM32L4xx_HAL_Driver/Src/flash_l4.c ****   {
 600              		.loc 1 135 3 view .LVU151
 601 000e 0AE0     		b	.L55
 602              	.LVL48:
 603              	.L56:
 139:Drivers/STM32L4xx_HAL_Driver/Src/flash_l4.c ****     {
 604              		.loc 1 139 17 view .LVU152
 605 0010 23F00703 		bic	r3, r3, #7
 606 0014 3B44     		add	r3, r3, r7
 137:Drivers/STM32L4xx_HAL_Driver/Src/flash_l4.c ****         address + i,
 607              		.loc 1 137 9 view .LVU153
 608 0016 D3E90023 		ldrd	r2, [r3]
 609 001a 3144     		add	r1, r1, r6
 610              	.LVL49:
 137:Drivers/STM32L4xx_HAL_Driver/Src/flash_l4.c ****         address + i,
 611              		.loc 1 137 9 view .LVU154
 612 001c 0020     		movs	r0, #0
 613 001e FFF7FEFF 		bl	HAL_FLASH_Program
 614              	.LVL50:
 137:Drivers/STM32L4xx_HAL_Driver/Src/flash_l4.c ****         address + i,
 615              		.loc 1 137 8 view .LVU155
 616 0022 40B9     		cbnz	r0, .L57
 135:Drivers/STM32L4xx_HAL_Driver/Src/flash_l4.c ****   {
 617              		.loc 1 135 30 is_stmt 1 discriminator 2 view .LVU156
 135:Drivers/STM32L4xx_HAL_Driver/Src/flash_l4.c ****   {
 618              		.loc 1 135 32 is_stmt 0 discriminator 2 view .LVU157
 619 0024 0834     		adds	r4, r4, #8
 620              	.LVL51:
 621              	.L55:
 135:Drivers/STM32L4xx_HAL_Driver/Src/flash_l4.c ****   {
 622              		.loc 1 135 15 is_stmt 1 discriminator 1 view .LVU158
 135:Drivers/STM32L4xx_HAL_Driver/Src/flash_l4.c ****   {
 623              		.loc 1 135 17 is_stmt 0 discriminator 1 view .LVU159
 624 0026 2146     		mov	r1, r4
 135:Drivers/STM32L4xx_HAL_Driver/Src/flash_l4.c ****   {
 625              		.loc 1 135 3 discriminator 1 view .LVU160
 626 0028 AC42     		cmp	r4, r5
 627 002a 04D2     		bcs	.L57
 137:Drivers/STM32L4xx_HAL_Driver/Src/flash_l4.c ****         address + i,
 628              		.loc 1 137 5 is_stmt 1 view .LVU161
 139:Drivers/STM32L4xx_HAL_Driver/Src/flash_l4.c ****     {
 629              		.loc 1 139 21 is_stmt 0 view .LVU162
 630 002c 2346     		mov	r3, r4
 631 002e 002C     		cmp	r4, #0
 632 0030 EEDA     		bge	.L56
 633 0032 E31D     		adds	r3, r4, #7
 634 0034 ECE7     		b	.L56
 635              	.L57:
 145:Drivers/STM32L4xx_HAL_Driver/Src/flash_l4.c ****   {
 636              		.loc 1 145 3 is_stmt 1 view .LVU163
 637              	.LVL52:
 129:Drivers/STM32L4xx_HAL_Driver/Src/flash_l4.c **** #ifndef CODE_UNDER_FIREWALL    
 638              		.loc 1 129 7 is_stmt 0 view .LVU164
 639 0036 4FF0FF38 		mov	r8, #-1
 145:Drivers/STM32L4xx_HAL_Driver/Src/flash_l4.c ****   {
 640              		.loc 1 145 10 view .LVU165
ARM GAS  C:\cygwin64\tmp\ccFBQtVc.s 			page 22


 641 003a 0024     		movs	r4, #0
 145:Drivers/STM32L4xx_HAL_Driver/Src/flash_l4.c ****   {
 642              		.loc 1 145 3 view .LVU166
 643 003c 08E0     		b	.L59
 644              	.LVL53:
 645              	.L60:
 646              	.LBB9:
 148:Drivers/STM32L4xx_HAL_Driver/Src/flash_l4.c ****       
 647              		.loc 1 148 46 view .LVU167
 648 003e 9B10     		asrs	r3, r3, #2
 649              	.LVL54:
 150:Drivers/STM32L4xx_HAL_Driver/Src/flash_l4.c ****     {
 650              		.loc 1 150 5 is_stmt 1 view .LVU168
 150:Drivers/STM32L4xx_HAL_Driver/Src/flash_l4.c ****     {
 651              		.loc 1 150 10 is_stmt 0 view .LVU169
 652 0040 0A68     		ldr	r2, [r1]
 150:Drivers/STM32L4xx_HAL_Driver/Src/flash_l4.c ****     {
 653              		.loc 1 150 18 view .LVU170
 654 0042 57F82330 		ldr	r3, [r7, r3, lsl #2]
 655              	.LVL55:
 150:Drivers/STM32L4xx_HAL_Driver/Src/flash_l4.c ****     {
 656              		.loc 1 150 8 view .LVU171
 657 0046 9A42     		cmp	r2, r3
 658 0048 0AD1     		bne	.L65
 157:Drivers/STM32L4xx_HAL_Driver/Src/flash_l4.c ****   }
 659              		.loc 1 157 5 is_stmt 1 discriminator 2 view .LVU172
 660              	.LVL56:
 157:Drivers/STM32L4xx_HAL_Driver/Src/flash_l4.c ****   }
 661              		.loc 1 157 5 is_stmt 0 discriminator 2 view .LVU173
 662              	.LBE9:
 145:Drivers/STM32L4xx_HAL_Driver/Src/flash_l4.c ****   {
 663              		.loc 1 145 30 is_stmt 1 discriminator 2 view .LVU174
 145:Drivers/STM32L4xx_HAL_Driver/Src/flash_l4.c ****   {
 664              		.loc 1 145 32 is_stmt 0 discriminator 2 view .LVU175
 665 004a 0434     		adds	r4, r4, #4
 666              	.LVL57:
 667              	.LBB10:
 157:Drivers/STM32L4xx_HAL_Driver/Src/flash_l4.c ****   }
 668              		.loc 1 157 9 discriminator 2 view .LVU176
 669 004c 4FF00008 		mov	r8, #0
 670              	.LVL58:
 671              	.L59:
 157:Drivers/STM32L4xx_HAL_Driver/Src/flash_l4.c ****   }
 672              		.loc 1 157 9 discriminator 2 view .LVU177
 673              	.LBE10:
 145:Drivers/STM32L4xx_HAL_Driver/Src/flash_l4.c ****   {
 674              		.loc 1 145 15 is_stmt 1 discriminator 1 view .LVU178
 145:Drivers/STM32L4xx_HAL_Driver/Src/flash_l4.c ****   {
 675              		.loc 1 145 3 is_stmt 0 discriminator 1 view .LVU179
 676 0050 AC42     		cmp	r4, r5
 677 0052 08D2     		bcs	.L62
 678              	.LBB11:
 147:Drivers/STM32L4xx_HAL_Driver/Src/flash_l4.c ****     uint32_t *src = ((uint32_t *) pData) + (i/4);
 679              		.loc 1 147 5 is_stmt 1 view .LVU180
 147:Drivers/STM32L4xx_HAL_Driver/Src/flash_l4.c ****     uint32_t *src = ((uint32_t *) pData) + (i/4);
 680              		.loc 1 147 42 is_stmt 0 view .LVU181
 681 0054 A119     		adds	r1, r4, r6
ARM GAS  C:\cygwin64\tmp\ccFBQtVc.s 			page 23


 682              	.LVL59:
 148:Drivers/STM32L4xx_HAL_Driver/Src/flash_l4.c ****       
 683              		.loc 1 148 5 is_stmt 1 view .LVU182
 148:Drivers/STM32L4xx_HAL_Driver/Src/flash_l4.c ****       
 684              		.loc 1 148 46 is_stmt 0 view .LVU183
 685 0056 2346     		mov	r3, r4
 686 0058 002C     		cmp	r4, #0
 687 005a F0DA     		bge	.L60
 688 005c E31C     		adds	r3, r4, #3
 689 005e EEE7     		b	.L60
 690              	.L65:
 153:Drivers/STM32L4xx_HAL_Driver/Src/flash_l4.c **** #endif
 691              		.loc 1 153 7 is_stmt 1 view .LVU184
 692 0060 0348     		ldr	r0, .L66
 693 0062 FFF7FEFF 		bl	printf
 694              	.LVL60:
 155:Drivers/STM32L4xx_HAL_Driver/Src/flash_l4.c ****     }
 695              		.loc 1 155 7 view .LVU185
 696              	.L62:
 155:Drivers/STM32L4xx_HAL_Driver/Src/flash_l4.c ****     }
 697              		.loc 1 155 7 is_stmt 0 view .LVU186
 698              	.LBE11:
 161:Drivers/STM32L4xx_HAL_Driver/Src/flash_l4.c **** #endif
 699              		.loc 1 161 3 is_stmt 1 view .LVU187
 700              	.LBB12:
 701              	.LBI12:
 129:Drivers/CMSIS/Include/cmsis_gcc.h **** {
 702              		.loc 2 129 27 view .LVU188
 703              	.LBB13:
 131:Drivers/CMSIS/Include/cmsis_gcc.h **** }
 704              		.loc 2 131 3 view .LVU189
 705              		.syntax unified
 706              	@ 131 "Drivers/CMSIS/Include/cmsis_gcc.h" 1
 707 0066 62B6     		cpsie i
 708              	@ 0 "" 2
 709              		.thumb
 710              		.syntax unified
 711              	.LBE13:
 712              	.LBE12:
 163:Drivers/STM32L4xx_HAL_Driver/Src/flash_l4.c **** }
 713              		.loc 1 163 3 view .LVU190
 164:Drivers/STM32L4xx_HAL_Driver/Src/flash_l4.c **** 
 714              		.loc 1 164 1 is_stmt 0 view .LVU191
 715 0068 4046     		mov	r0, r8
 716 006a BDE8F081 		pop	{r4, r5, r6, r7, r8, pc}
 717              	.LVL61:
 718              	.L67:
 164:Drivers/STM32L4xx_HAL_Driver/Src/flash_l4.c **** 
 719              		.loc 1 164 1 view .LVU192
 720 006e 00BF     		.align	2
 721              	.L66:
 722 0070 00000000 		.word	.LC2
 723              		.cfi_endproc
 724              	.LFE319:
 726              		.section	.rodata.FLASH_Init.str1.4,"aMS",%progbits,1
 727              		.align	2
 728              	.LC3:
ARM GAS  C:\cygwin64\tmp\ccFBQtVc.s 			page 24


 729 0000 464C4153 		.ascii	"FLASH_If_Init : failed to lock\000"
 729      485F4966 
 729      5F496E69 
 729      74203A20 
 729      6661696C 
 730 001f 00       		.align	2
 731              	.LC4:
 732 0020 464C4153 		.ascii	"FLASH_If_Init : failed to unlock\000"
 732      485F4966 
 732      5F496E69 
 732      74203A20 
 732      6661696C 
 733              		.section	.text.FLASH_Init,"ax",%progbits
 734              		.align	1
 735              		.syntax unified
 736              		.thumb
 737              		.thumb_func
 738              		.fpu fpv4-sp-d16
 740              	FLASH_Init:
 741              	.LFB325:
 339:Drivers/STM32L4xx_HAL_Driver/Src/flash_l4.c **** 
 340:Drivers/STM32L4xx_HAL_Driver/Src/flash_l4.c **** /* Public functions ---------------------------------------------------------*/
 341:Drivers/STM32L4xx_HAL_Driver/Src/flash_l4.c **** /**
 342:Drivers/STM32L4xx_HAL_Driver/Src/flash_l4.c ****   * @brief  Unlocks Flash for write access
 343:Drivers/STM32L4xx_HAL_Driver/Src/flash_l4.c ****   * @param  None
 344:Drivers/STM32L4xx_HAL_Driver/Src/flash_l4.c ****   * @retval HAL Status.
 345:Drivers/STM32L4xx_HAL_Driver/Src/flash_l4.c ****   */
 346:Drivers/STM32L4xx_HAL_Driver/Src/flash_l4.c **** uint32_t FLASH_Init(void)
 347:Drivers/STM32L4xx_HAL_Driver/Src/flash_l4.c **** {
 742              		.loc 1 347 1 is_stmt 1 view -0
 743              		.cfi_startproc
 744              		@ args = 0, pretend = 0, frame = 0
 745              		@ frame_needed = 0, uses_anonymous_args = 0
 746 0000 08B5     		push	{r3, lr}
 747              	.LCFI5:
 748              		.cfi_def_cfa_offset 8
 749              		.cfi_offset 3, -8
 750              		.cfi_offset 14, -4
 348:Drivers/STM32L4xx_HAL_Driver/Src/flash_l4.c ****   uint32_t ret = HAL_ERROR;
 751              		.loc 1 348 3 view .LVU194
 752              	.LVL62:
 349:Drivers/STM32L4xx_HAL_Driver/Src/flash_l4.c **** 
 350:Drivers/STM32L4xx_HAL_Driver/Src/flash_l4.c ****   /* Unlock the Program memory */
 351:Drivers/STM32L4xx_HAL_Driver/Src/flash_l4.c ****   if (HAL_FLASH_Unlock() == HAL_OK)
 753              		.loc 1 351 3 view .LVU195
 754              		.loc 1 351 7 is_stmt 0 view .LVU196
 755 0002 FFF7FEFF 		bl	HAL_FLASH_Unlock
 756              	.LVL63:
 757              		.loc 1 351 6 view .LVU197
 758 0006 A0B9     		cbnz	r0, .L69
 352:Drivers/STM32L4xx_HAL_Driver/Src/flash_l4.c ****   {
 353:Drivers/STM32L4xx_HAL_Driver/Src/flash_l4.c **** 
 354:Drivers/STM32L4xx_HAL_Driver/Src/flash_l4.c ****     /* Clear all FLASH flags */
 355:Drivers/STM32L4xx_HAL_Driver/Src/flash_l4.c ****     __HAL_FLASH_CLEAR_FLAG(FLASH_FLAG_ALL_ERRORS);
 759              		.loc 1 355 5 is_stmt 1 discriminator 1 view .LVU198
 760              		.loc 1 355 5 discriminator 1 view .LVU199
 761              		.loc 1 355 5 discriminator 1 view .LVU200
ARM GAS  C:\cygwin64\tmp\ccFBQtVc.s 			page 25


 762 0008 0C4B     		ldr	r3, .L74
 763 000a 9A69     		ldr	r2, [r3, #24]
 764 000c 42F04042 		orr	r2, r2, #-1073741824
 765 0010 9A61     		str	r2, [r3, #24]
 766              		.loc 1 355 5 discriminator 1 view .LVU201
 767              		.loc 1 355 5 discriminator 1 view .LVU202
 768 0012 4CF2FA32 		movw	r2, #50170
 769 0016 1A61     		str	r2, [r3, #16]
 770              		.loc 1 355 5 discriminator 1 view .LVU203
 356:Drivers/STM32L4xx_HAL_Driver/Src/flash_l4.c ****     __HAL_FLASH_CLEAR_FLAG(FLASH_FLAG_EOP | FLASH_FLAG_PGSERR | FLASH_FLAG_WRPERR | FLASH_FLAG_OPTV
 771              		.loc 1 356 5 discriminator 1 view .LVU204
 772              		.loc 1 356 5 discriminator 1 view .LVU205
 773              		.loc 1 356 5 discriminator 1 view .LVU206
 774              		.loc 1 356 5 discriminator 1 view .LVU207
 775 0018 48F29102 		movw	r2, #32913
 776 001c 1A61     		str	r2, [r3, #16]
 777              		.loc 1 356 5 discriminator 1 view .LVU208
 357:Drivers/STM32L4xx_HAL_Driver/Src/flash_l4.c **** 
 358:Drivers/STM32L4xx_HAL_Driver/Src/flash_l4.c ****     /* Unlock the Program memory */
 359:Drivers/STM32L4xx_HAL_Driver/Src/flash_l4.c ****     if (HAL_FLASH_Lock() == HAL_OK)
 778              		.loc 1 359 5 discriminator 1 view .LVU209
 779              		.loc 1 359 9 is_stmt 0 discriminator 1 view .LVU210
 780 001e FFF7FEFF 		bl	HAL_FLASH_Lock
 781              	.LVL64:
 782              		.loc 1 359 8 discriminator 1 view .LVU211
 783 0022 08B9     		cbnz	r0, .L73
 360:Drivers/STM32L4xx_HAL_Driver/Src/flash_l4.c ****     {
 361:Drivers/STM32L4xx_HAL_Driver/Src/flash_l4.c ****       ret = HAL_OK;
 784              		.loc 1 361 11 view .LVU212
 785 0024 0020     		movs	r0, #0
 786              	.LVL65:
 362:Drivers/STM32L4xx_HAL_Driver/Src/flash_l4.c ****     }
 363:Drivers/STM32L4xx_HAL_Driver/Src/flash_l4.c ****     else
 364:Drivers/STM32L4xx_HAL_Driver/Src/flash_l4.c ****     {
 365:Drivers/STM32L4xx_HAL_Driver/Src/flash_l4.c ****          printf("FLASH_If_Init : failed to lock\n");
 366:Drivers/STM32L4xx_HAL_Driver/Src/flash_l4.c ****     }
 367:Drivers/STM32L4xx_HAL_Driver/Src/flash_l4.c ****   }
 368:Drivers/STM32L4xx_HAL_Driver/Src/flash_l4.c ****   else
 369:Drivers/STM32L4xx_HAL_Driver/Src/flash_l4.c ****   {
 370:Drivers/STM32L4xx_HAL_Driver/Src/flash_l4.c ****     printf("FLASH_If_Init : failed to unlock\n");
 371:Drivers/STM32L4xx_HAL_Driver/Src/flash_l4.c ****   }
 372:Drivers/STM32L4xx_HAL_Driver/Src/flash_l4.c ****   return ret;
 787              		.loc 1 372 3 is_stmt 1 view .LVU213
 788              		.loc 1 372 10 is_stmt 0 view .LVU214
 789 0026 08E0     		b	.L68
 790              	.LVL66:
 791              	.L73:
 365:Drivers/STM32L4xx_HAL_Driver/Src/flash_l4.c ****     }
 792              		.loc 1 365 10 is_stmt 1 view .LVU215
 793 0028 0548     		ldr	r0, .L74+4
 794 002a FFF7FEFF 		bl	puts
 795              	.LVL67:
 348:Drivers/STM32L4xx_HAL_Driver/Src/flash_l4.c **** 
 796              		.loc 1 348 12 is_stmt 0 view .LVU216
 797 002e 0120     		movs	r0, #1
 798 0030 03E0     		b	.L68
 799              	.L69:
ARM GAS  C:\cygwin64\tmp\ccFBQtVc.s 			page 26


 370:Drivers/STM32L4xx_HAL_Driver/Src/flash_l4.c ****   }
 800              		.loc 1 370 5 is_stmt 1 view .LVU217
 801 0032 0448     		ldr	r0, .L74+8
 802 0034 FFF7FEFF 		bl	puts
 803              	.LVL68:
 348:Drivers/STM32L4xx_HAL_Driver/Src/flash_l4.c **** 
 804              		.loc 1 348 12 is_stmt 0 view .LVU218
 805 0038 0120     		movs	r0, #1
 806              	.LVL69:
 807              	.L68:
 373:Drivers/STM32L4xx_HAL_Driver/Src/flash_l4.c **** }
 808              		.loc 1 373 1 view .LVU219
 809 003a 08BD     		pop	{r3, pc}
 810              	.L75:
 811              		.align	2
 812              	.L74:
 813 003c 00200240 		.word	1073881088
 814 0040 00000000 		.word	.LC3
 815 0044 20000000 		.word	.LC4
 816              		.cfi_endproc
 817              	.LFE325:
 819              		.section	.rodata.FLASH_update.str1.4,"aMS",%progbits,1
 820              		.align	2
 821              	.LC5:
 822 0000 4572726F 		.ascii	"Error writing %lu bytes at 0x%08lx\012\000"
 822      72207772 
 822      6974696E 
 822      6720256C 
 822      75206279 
 823              		.section	.text.FLASH_update,"ax",%progbits
 824              		.align	1
 825              		.global	FLASH_update
 826              		.syntax unified
 827              		.thumb
 828              		.thumb_func
 829              		.fpu fpv4-sp-d16
 831              	FLASH_update:
 832              	.LVL70:
 833              	.LFB322:
 230:Drivers/STM32L4xx_HAL_Driver/Src/flash_l4.c ****   int ret = 0;
 834              		.loc 1 230 1 is_stmt 1 view -0
 835              		.cfi_startproc
 836              		@ args = 0, pretend = 0, frame = 2048
 837              		@ frame_needed = 0, uses_anonymous_args = 0
 230:Drivers/STM32L4xx_HAL_Driver/Src/flash_l4.c ****   int ret = 0;
 838              		.loc 1 230 1 is_stmt 0 view .LVU221
 839 0000 2DE9F04F 		push	{r4, r5, r6, r7, r8, r9, r10, fp, lr}
 840              	.LCFI6:
 841              		.cfi_def_cfa_offset 36
 842              		.cfi_offset 4, -36
 843              		.cfi_offset 5, -32
 844              		.cfi_offset 6, -28
 845              		.cfi_offset 7, -24
 846              		.cfi_offset 8, -20
 847              		.cfi_offset 9, -16
 848              		.cfi_offset 10, -12
 849              		.cfi_offset 11, -8
ARM GAS  C:\cygwin64\tmp\ccFBQtVc.s 			page 27


 850              		.cfi_offset 14, -4
 851 0004 ADF6040D 		subw	sp, sp, #2052
 852              	.LCFI7:
 853              		.cfi_def_cfa_offset 2088
 854 0008 0746     		mov	r7, r0
 855 000a 8946     		mov	r9, r1
 856 000c 9346     		mov	fp, r2
 231:Drivers/STM32L4xx_HAL_Driver/Src/flash_l4.c ****   int remaining = size;
 857              		.loc 1 231 3 is_stmt 1 view .LVU222
 858              	.LVL71:
 232:Drivers/STM32L4xx_HAL_Driver/Src/flash_l4.c ****   uint8_t * src_addr = (uint8_t *) data;
 859              		.loc 1 232 3 view .LVU223
 232:Drivers/STM32L4xx_HAL_Driver/Src/flash_l4.c ****   uint8_t * src_addr = (uint8_t *) data;
 860              		.loc 1 232 7 is_stmt 0 view .LVU224
 861 000e 9246     		mov	r10, r2
 862              	.LVL72:
 233:Drivers/STM32L4xx_HAL_Driver/Src/flash_l4.c ****   uint64_t page_cache[FLASH_PAGE_SIZE/sizeof(uint64_t)];
 863              		.loc 1 233 3 is_stmt 1 view .LVU225
 234:Drivers/STM32L4xx_HAL_Driver/Src/flash_l4.c ****  
 864              		.loc 1 234 3 view .LVU226
 236:Drivers/STM32L4xx_HAL_Driver/Src/flash_l4.c **** 
 865              		.loc 1 236 3 view .LVU227
 236:Drivers/STM32L4xx_HAL_Driver/Src/flash_l4.c **** 
 866              		.loc 1 236 3 view .LVU228
 236:Drivers/STM32L4xx_HAL_Driver/Src/flash_l4.c **** 
 867              		.loc 1 236 3 view .LVU229
 868 0010 244B     		ldr	r3, .L84
 869 0012 9A69     		ldr	r2, [r3, #24]
 870              	.LVL73:
 236:Drivers/STM32L4xx_HAL_Driver/Src/flash_l4.c **** 
 871              		.loc 1 236 3 is_stmt 0 view .LVU230
 872 0014 42F04042 		orr	r2, r2, #-1073741824
 873 0018 9A61     		str	r2, [r3, #24]
 236:Drivers/STM32L4xx_HAL_Driver/Src/flash_l4.c **** 
 874              		.loc 1 236 3 is_stmt 1 view .LVU231
 236:Drivers/STM32L4xx_HAL_Driver/Src/flash_l4.c **** 
 875              		.loc 1 236 3 view .LVU232
 876 001a 4CF2FA32 		movw	r2, #50170
 877 001e 1A61     		str	r2, [r3, #16]
 878 0020 0FE0     		b	.L81
 879              	.LVL74:
 880              	.L77:
 881              	.LBB14:
 257:Drivers/STM32L4xx_HAL_Driver/Src/flash_l4.c ****       if(ret != 0)
 882              		.loc 1 257 7 view .LVU233
 257:Drivers/STM32L4xx_HAL_Driver/Src/flash_l4.c ****       if(ret != 0)
 883              		.loc 1 257 13 is_stmt 0 view .LVU234
 884 0022 4FF40062 		mov	r2, #2048
 885 0026 6946     		mov	r1, sp
 886 0028 2046     		mov	r0, r4
 887              	.LVL75:
 257:Drivers/STM32L4xx_HAL_Driver/Src/flash_l4.c ****       if(ret != 0)
 888              		.loc 1 257 13 view .LVU235
 889 002a FFF7FEFF 		bl	FLASH_write_at
 890              	.LVL76:
 258:Drivers/STM32L4xx_HAL_Driver/Src/flash_l4.c ****       {
 891              		.loc 1 258 7 is_stmt 1 view .LVU236
ARM GAS  C:\cygwin64\tmp\ccFBQtVc.s 			page 28


 258:Drivers/STM32L4xx_HAL_Driver/Src/flash_l4.c ****       {
 892              		.loc 1 258 9 is_stmt 0 view .LVU237
 893 002e 0646     		mov	r6, r0
 894 0030 60BB     		cbnz	r0, .L83
 266:Drivers/STM32L4xx_HAL_Driver/Src/flash_l4.c ****         src_addr += len;
 895              		.loc 1 266 9 is_stmt 1 view .LVU238
 266:Drivers/STM32L4xx_HAL_Driver/Src/flash_l4.c ****         src_addr += len;
 896              		.loc 1 266 18 is_stmt 0 view .LVU239
 897 0032 2F44     		add	r7, r7, r5
 898              	.LVL77:
 267:Drivers/STM32L4xx_HAL_Driver/Src/flash_l4.c ****         remaining -= len;
 899              		.loc 1 267 9 is_stmt 1 view .LVU240
 267:Drivers/STM32L4xx_HAL_Driver/Src/flash_l4.c ****         remaining -= len;
 900              		.loc 1 267 18 is_stmt 0 view .LVU241
 901 0034 A944     		add	r9, r9, r5
 902              	.LVL78:
 268:Drivers/STM32L4xx_HAL_Driver/Src/flash_l4.c ****       }
 903              		.loc 1 268 9 is_stmt 1 view .LVU242
 268:Drivers/STM32L4xx_HAL_Driver/Src/flash_l4.c ****       }
 904              		.loc 1 268 19 is_stmt 0 view .LVU243
 905 0036 AAEB050A 		sub	r10, r10, r5
 906              	.LVL79:
 907              	.L78:
 268:Drivers/STM32L4xx_HAL_Driver/Src/flash_l4.c ****       }
 908              		.loc 1 268 19 view .LVU244
 909              	.LBE14:
 271:Drivers/STM32L4xx_HAL_Driver/Src/flash_l4.c ****   
 910              		.loc 1 271 11 is_stmt 1 view .LVU245
 271:Drivers/STM32L4xx_HAL_Driver/Src/flash_l4.c ****   
 911              		.loc 1 271 3 is_stmt 0 view .LVU246
 912 003a 76BB     		cbnz	r6, .L76
 271:Drivers/STM32L4xx_HAL_Driver/Src/flash_l4.c ****   
 913              		.loc 1 271 23 discriminator 1 view .LVU247
 914 003c BAF1000F 		cmp	r10, #0
 915 0040 2BDD     		ble	.L76
 916              	.LVL80:
 917              	.L81:
 236:Drivers/STM32L4xx_HAL_Driver/Src/flash_l4.c **** 
 918              		.loc 1 236 3 is_stmt 1 discriminator 6 view .LVU248
 238:Drivers/STM32L4xx_HAL_Driver/Src/flash_l4.c ****     uint32_t fl_addr = ROUND_DOWN(dst_addr, FLASH_PAGE_SIZE);
 919              		.loc 1 238 3 discriminator 6 view .LVU249
 920              	.LBB15:
 239:Drivers/STM32L4xx_HAL_Driver/Src/flash_l4.c ****     int fl_offset = dst_addr - fl_addr;
 921              		.loc 1 239 5 discriminator 6 view .LVU250
 239:Drivers/STM32L4xx_HAL_Driver/Src/flash_l4.c ****     int fl_offset = dst_addr - fl_addr;
 922              		.loc 1 239 14 is_stmt 0 discriminator 6 view .LVU251
 923 0042 27F4FF64 		bic	r4, r7, #2040
 924 0046 24F00704 		bic	r4, r4, #7
 925              	.LVL81:
 240:Drivers/STM32L4xx_HAL_Driver/Src/flash_l4.c ****     int len = MIN(FLASH_PAGE_SIZE - fl_offset, size);
 926              		.loc 1 240 5 is_stmt 1 discriminator 6 view .LVU252
 240:Drivers/STM32L4xx_HAL_Driver/Src/flash_l4.c ****     int len = MIN(FLASH_PAGE_SIZE - fl_offset, size);
 927              		.loc 1 240 30 is_stmt 0 discriminator 6 view .LVU253
 928 004a C7F30A06 		ubfx	r6, r7, #0, #11
 241:Drivers/STM32L4xx_HAL_Driver/Src/flash_l4.c ****     
 929              		.loc 1 241 5 is_stmt 1 discriminator 6 view .LVU254
 241:Drivers/STM32L4xx_HAL_Driver/Src/flash_l4.c ****     
ARM GAS  C:\cygwin64\tmp\ccFBQtVc.s 			page 29


 930              		.loc 1 241 15 is_stmt 0 discriminator 6 view .LVU255
 931 004e E51B     		subs	r5, r4, r7
 932 0050 05F50065 		add	r5, r5, #2048
 933 0054 5D45     		cmp	r5, fp
 934 0056 28BF     		it	cs
 935 0058 5D46     		movcs	r5, fp
 936              	.LVL82:
 244:Drivers/STM32L4xx_HAL_Driver/Src/flash_l4.c ****     /* Update the cache from the source */
 937              		.loc 1 244 5 is_stmt 1 discriminator 6 view .LVU256
 938 005a 4FF40068 		mov	r8, #2048
 939 005e 4246     		mov	r2, r8
 940 0060 2146     		mov	r1, r4
 941 0062 6846     		mov	r0, sp
 942 0064 FFF7FEFF 		bl	memcpy
 943              	.LVL83:
 246:Drivers/STM32L4xx_HAL_Driver/Src/flash_l4.c ****     /* Erase the page, and write the cache */
 944              		.loc 1 246 5 discriminator 6 view .LVU257
 945 0068 2A46     		mov	r2, r5
 946 006a 4946     		mov	r1, r9
 947 006c 0DEB0600 		add	r0, sp, r6
 948 0070 FFF7FEFF 		bl	memcpy
 949              	.LVL84:
 248:Drivers/STM32L4xx_HAL_Driver/Src/flash_l4.c ****     if (ret != 0)
 950              		.loc 1 248 5 discriminator 6 view .LVU258
 248:Drivers/STM32L4xx_HAL_Driver/Src/flash_l4.c ****     if (ret != 0)
 951              		.loc 1 248 11 is_stmt 0 discriminator 6 view .LVU259
 952 0074 4146     		mov	r1, r8
 953 0076 2046     		mov	r0, r4
 954 0078 FFF7FEFF 		bl	FLASH_unlock_erase
 955              	.LVL85:
 249:Drivers/STM32L4xx_HAL_Driver/Src/flash_l4.c ****     {
 956              		.loc 1 249 5 is_stmt 1 discriminator 6 view .LVU260
 249:Drivers/STM32L4xx_HAL_Driver/Src/flash_l4.c ****     {
 957              		.loc 1 249 8 is_stmt 0 discriminator 6 view .LVU261
 958 007c 0646     		mov	r6, r0
 959 007e 0028     		cmp	r0, #0
 960 0080 CFD0     		beq	.L77
 252:Drivers/STM32L4xx_HAL_Driver/Src/flash_l4.c **** #endif
 961              		.loc 1 252 7 is_stmt 1 view .LVU262
 962 0082 2146     		mov	r1, r4
 963 0084 0848     		ldr	r0, .L84+4
 964              	.LVL86:
 252:Drivers/STM32L4xx_HAL_Driver/Src/flash_l4.c **** #endif
 965              		.loc 1 252 7 is_stmt 0 view .LVU263
 966 0086 FFF7FEFF 		bl	printf
 967              	.LVL87:
 968 008a D6E7     		b	.L78
 969              	.LVL88:
 970              	.L83:
 261:Drivers/STM32L4xx_HAL_Driver/Src/flash_l4.c **** #endif
 971              		.loc 1 261 9 is_stmt 1 view .LVU264
 972 008c 2246     		mov	r2, r4
 973 008e 4FF40061 		mov	r1, #2048
 974 0092 0648     		ldr	r0, .L84+8
 975              	.LVL89:
 261:Drivers/STM32L4xx_HAL_Driver/Src/flash_l4.c **** #endif
 976              		.loc 1 261 9 is_stmt 0 view .LVU265
ARM GAS  C:\cygwin64\tmp\ccFBQtVc.s 			page 30


 977 0094 FFF7FEFF 		bl	printf
 978              	.LVL90:
 979 0098 CFE7     		b	.L78
 980              	.L76:
 261:Drivers/STM32L4xx_HAL_Driver/Src/flash_l4.c **** #endif
 981              		.loc 1 261 9 view .LVU266
 982              	.LBE15:
 274:Drivers/STM32L4xx_HAL_Driver/Src/flash_l4.c **** 
 983              		.loc 1 274 1 view .LVU267
 984 009a 3046     		mov	r0, r6
 985 009c 0DF6040D 		addw	sp, sp, #2052
 986              	.LCFI8:
 987              		.cfi_def_cfa_offset 36
 988              		@ sp needed
 989 00a0 BDE8F08F 		pop	{r4, r5, r6, r7, r8, r9, r10, fp, pc}
 990              	.LVL91:
 991              	.L85:
 274:Drivers/STM32L4xx_HAL_Driver/Src/flash_l4.c **** 
 992              		.loc 1 274 1 view .LVU268
 993              		.align	2
 994              	.L84:
 995 00a4 00200240 		.word	1073881088
 996 00a8 28000000 		.word	.LC1
 997 00ac 00000000 		.word	.LC5
 998              		.cfi_endproc
 999              	.LFE322:
 1001              		.section	.rodata.FLASH_Erase_Size.str1.4,"aMS",%progbits,1
 1002              		.align	2
 1003              	.LC6:
 1004 0000 4552524F 		.ascii	"ERROR flash erase\000"
 1004      5220666C 
 1004      61736820 
 1004      65726173 
 1004      6500
 1005 0012 0000     		.align	2
 1006              	.LC7:
 1007 0014 4552524F 		.ascii	"ERROR cannot unlock\000"
 1007      52206361 
 1007      6E6E6F74 
 1007      20756E6C 
 1007      6F636B00 
 1008              		.align	2
 1009              	.LC8:
 1010 0028 63616E6E 		.ascii	"cannot init\000"
 1010      6F742069 
 1010      6E697400 
 1011              		.section	.text.FLASH_Erase_Size,"ax",%progbits
 1012              		.align	1
 1013              		.global	FLASH_Erase_Size
 1014              		.syntax unified
 1015              		.thumb
 1016              		.thumb_func
 1017              		.fpu fpv4-sp-d16
 1019              	FLASH_Erase_Size:
 1020              	.LVL92:
 1021              	.LFB326:
 374:Drivers/STM32L4xx_HAL_Driver/Src/flash_l4.c **** 
ARM GAS  C:\cygwin64\tmp\ccFBQtVc.s 			page 31


 375:Drivers/STM32L4xx_HAL_Driver/Src/flash_l4.c **** /**
 376:Drivers/STM32L4xx_HAL_Driver/Src/flash_l4.c ****   * @brief  This function erases bytes in user flash area
 377:Drivers/STM32L4xx_HAL_Driver/Src/flash_l4.c ****   * @param  Start: Start of user flash area
 378:Drivers/STM32L4xx_HAL_Driver/Src/flash_l4.c ****   * @param  uLength: number of bytes.
 379:Drivers/STM32L4xx_HAL_Driver/Src/flash_l4.c ****   * @retval HAL status.
 380:Drivers/STM32L4xx_HAL_Driver/Src/flash_l4.c ****   */
 381:Drivers/STM32L4xx_HAL_Driver/Src/flash_l4.c **** uint32_t FLASH_Erase_Size(uint32_t uStart, uint32_t uLength)
 382:Drivers/STM32L4xx_HAL_Driver/Src/flash_l4.c **** {
 1022              		.loc 1 382 1 is_stmt 1 view -0
 1023              		.cfi_startproc
 1024              		@ args = 0, pretend = 0, frame = 24
 1025              		@ frame_needed = 0, uses_anonymous_args = 0
 1026              		.loc 1 382 1 is_stmt 0 view .LVU270
 1027 0000 F0B5     		push	{r4, r5, r6, r7, lr}
 1028              	.LCFI9:
 1029              		.cfi_def_cfa_offset 20
 1030              		.cfi_offset 4, -20
 1031              		.cfi_offset 5, -16
 1032              		.cfi_offset 6, -12
 1033              		.cfi_offset 7, -8
 1034              		.cfi_offset 14, -4
 1035 0002 87B0     		sub	sp, sp, #28
 1036              	.LCFI10:
 1037              		.cfi_def_cfa_offset 48
 1038 0004 0646     		mov	r6, r0
 1039 0006 0C46     		mov	r4, r1
 383:Drivers/STM32L4xx_HAL_Driver/Src/flash_l4.c ****   uint32_t page_error = 0U;
 1040              		.loc 1 383 3 is_stmt 1 view .LVU271
 1041              		.loc 1 383 12 is_stmt 0 view .LVU272
 1042 0008 0023     		movs	r3, #0
 1043 000a 0593     		str	r3, [sp, #20]
 384:Drivers/STM32L4xx_HAL_Driver/Src/flash_l4.c ****   FLASH_EraseInitTypeDef x_erase_init;
 1044              		.loc 1 384 3 is_stmt 1 view .LVU273
 385:Drivers/STM32L4xx_HAL_Driver/Src/flash_l4.c ****   uint32_t e_ret_status = HAL_ERROR;
 1045              		.loc 1 385 3 view .LVU274
 1046              	.LVL93:
 386:Drivers/STM32L4xx_HAL_Driver/Src/flash_l4.c ****   uint32_t first_page = 0U, nb_of_pages = 0U, bank_number = 0U;
 1047              		.loc 1 386 3 view .LVU275
 387:Drivers/STM32L4xx_HAL_Driver/Src/flash_l4.c **** 
 388:Drivers/STM32L4xx_HAL_Driver/Src/flash_l4.c ****   /* Initialize Flash */
 389:Drivers/STM32L4xx_HAL_Driver/Src/flash_l4.c ****   e_ret_status = FLASH_Init();
 1048              		.loc 1 389 3 view .LVU276
 1049              		.loc 1 389 18 is_stmt 0 view .LVU277
 1050 000c FFF7FEFF 		bl	FLASH_Init
 1051              	.LVL94:
 390:Drivers/STM32L4xx_HAL_Driver/Src/flash_l4.c **** 
 391:Drivers/STM32L4xx_HAL_Driver/Src/flash_l4.c ****   if (e_ret_status == HAL_OK)
 1052              		.loc 1 391 3 is_stmt 1 view .LVU278
 1053              		.loc 1 391 6 is_stmt 0 view .LVU279
 1054 0010 0546     		mov	r5, r0
 1055 0012 38BB     		cbnz	r0, .L87
 392:Drivers/STM32L4xx_HAL_Driver/Src/flash_l4.c ****   {
 393:Drivers/STM32L4xx_HAL_Driver/Src/flash_l4.c ****     /* Unlock the Flash to enable the flash control register access *************/
 394:Drivers/STM32L4xx_HAL_Driver/Src/flash_l4.c ****     if (HAL_FLASH_Unlock() == HAL_OK)
 1056              		.loc 1 394 5 is_stmt 1 view .LVU280
 1057              		.loc 1 394 9 is_stmt 0 view .LVU281
 1058 0014 FFF7FEFF 		bl	HAL_FLASH_Unlock
ARM GAS  C:\cygwin64\tmp\ccFBQtVc.s 			page 32


 1059              	.LVL95:
 1060              		.loc 1 394 8 view .LVU282
 1061 0018 00BB     		cbnz	r0, .L88
 395:Drivers/STM32L4xx_HAL_Driver/Src/flash_l4.c ****     {
 396:Drivers/STM32L4xx_HAL_Driver/Src/flash_l4.c ****       /* Get the 1st page to erase */
 397:Drivers/STM32L4xx_HAL_Driver/Src/flash_l4.c ****       first_page = GetPage(uStart);
 1062              		.loc 1 397 7 is_stmt 1 view .LVU283
 1063              		.loc 1 397 20 is_stmt 0 view .LVU284
 1064 001a 3046     		mov	r0, r6
 1065 001c FFF7FEFF 		bl	GetPage
 1066              	.LVL96:
 1067 0020 0746     		mov	r7, r0
 1068              	.LVL97:
 398:Drivers/STM32L4xx_HAL_Driver/Src/flash_l4.c ****       /* Get the number of pages to erase from 1st page */
 399:Drivers/STM32L4xx_HAL_Driver/Src/flash_l4.c ****       nb_of_pages = GetPage(uStart + uLength - 1U) - first_page + 1U;
 1069              		.loc 1 399 7 is_stmt 1 view .LVU285
 1070              		.loc 1 399 36 is_stmt 0 view .LVU286
 1071 0022 3019     		adds	r0, r6, r4
 1072              	.LVL98:
 1073              		.loc 1 399 21 view .LVU287
 1074 0024 0138     		subs	r0, r0, #1
 1075 0026 FFF7FEFF 		bl	GetPage
 1076              	.LVL99:
 1077              		.loc 1 399 52 view .LVU288
 1078 002a C41B     		subs	r4, r0, r7
 1079              	.LVL100:
 1080              		.loc 1 399 19 view .LVU289
 1081 002c 0134     		adds	r4, r4, #1
 1082              	.LVL101:
 400:Drivers/STM32L4xx_HAL_Driver/Src/flash_l4.c ****       /* Get the bank */
 401:Drivers/STM32L4xx_HAL_Driver/Src/flash_l4.c ****       bank_number = GetBank(uStart);
 1083              		.loc 1 401 7 is_stmt 1 view .LVU290
 1084              		.loc 1 401 21 is_stmt 0 view .LVU291
 1085 002e 3046     		mov	r0, r6
 1086 0030 FFF7FEFF 		bl	GetBank
 1087              	.LVL102:
 402:Drivers/STM32L4xx_HAL_Driver/Src/flash_l4.c **** 
 403:Drivers/STM32L4xx_HAL_Driver/Src/flash_l4.c ****       /* Fill EraseInit structure*/
 404:Drivers/STM32L4xx_HAL_Driver/Src/flash_l4.c ****       x_erase_init.TypeErase   = FLASH_TYPEERASE_PAGES;
 1088              		.loc 1 404 7 is_stmt 1 view .LVU292
 1089              		.loc 1 404 32 is_stmt 0 view .LVU293
 1090 0034 0023     		movs	r3, #0
 1091 0036 0193     		str	r3, [sp, #4]
 405:Drivers/STM32L4xx_HAL_Driver/Src/flash_l4.c ****       x_erase_init.Banks       = bank_number;
 1092              		.loc 1 405 7 is_stmt 1 view .LVU294
 1093              		.loc 1 405 32 is_stmt 0 view .LVU295
 1094 0038 0290     		str	r0, [sp, #8]
 406:Drivers/STM32L4xx_HAL_Driver/Src/flash_l4.c ****       x_erase_init.Page        = first_page;
 1095              		.loc 1 406 7 is_stmt 1 view .LVU296
 1096              		.loc 1 406 32 is_stmt 0 view .LVU297
 1097 003a 0397     		str	r7, [sp, #12]
 407:Drivers/STM32L4xx_HAL_Driver/Src/flash_l4.c ****       x_erase_init.NbPages     = nb_of_pages;
 1098              		.loc 1 407 7 is_stmt 1 view .LVU298
 1099              		.loc 1 407 32 is_stmt 0 view .LVU299
 1100 003c 0494     		str	r4, [sp, #16]
 408:Drivers/STM32L4xx_HAL_Driver/Src/flash_l4.c **** 
 409:Drivers/STM32L4xx_HAL_Driver/Src/flash_l4.c ****       if (HAL_FLASHEx_Erase(&x_erase_init, &page_error) != HAL_OK)
ARM GAS  C:\cygwin64\tmp\ccFBQtVc.s 			page 33


 1101              		.loc 1 409 7 is_stmt 1 view .LVU300
 1102              		.loc 1 409 11 is_stmt 0 view .LVU301
 1103 003e 05A9     		add	r1, sp, #20
 1104 0040 01A8     		add	r0, sp, #4
 1105              	.LVL103:
 1106              		.loc 1 409 11 view .LVU302
 1107 0042 FFF7FEFF 		bl	HAL_FLASHEx_Erase
 1108              	.LVL104:
 1109              		.loc 1 409 10 view .LVU303
 1110 0046 10B9     		cbnz	r0, .L92
 1111              	.LVL105:
 1112              	.L89:
 410:Drivers/STM32L4xx_HAL_Driver/Src/flash_l4.c ****       {
 411:Drivers/STM32L4xx_HAL_Driver/Src/flash_l4.c ****         /* Error occurred while page erase */
 412:Drivers/STM32L4xx_HAL_Driver/Src/flash_l4.c ****         HAL_FLASH_GetError();
 413:Drivers/STM32L4xx_HAL_Driver/Src/flash_l4.c ****         printf("ERROR flash erase\n");
 414:Drivers/STM32L4xx_HAL_Driver/Src/flash_l4.c ****         e_ret_status = HAL_ERROR;
 415:Drivers/STM32L4xx_HAL_Driver/Src/flash_l4.c ****       }
 416:Drivers/STM32L4xx_HAL_Driver/Src/flash_l4.c **** 
 417:Drivers/STM32L4xx_HAL_Driver/Src/flash_l4.c ****       /* Lock the Flash to disable the flash control register access (recommended
 418:Drivers/STM32L4xx_HAL_Driver/Src/flash_l4.c ****       to protect the FLASH memory against possible unwanted operation) *********/
 419:Drivers/STM32L4xx_HAL_Driver/Src/flash_l4.c ****       HAL_FLASH_Lock();
 1113              		.loc 1 419 7 is_stmt 1 view .LVU304
 1114 0048 FFF7FEFF 		bl	HAL_FLASH_Lock
 1115              	.LVL106:
 1116 004c 0DE0     		b	.L86
 1117              	.L92:
 412:Drivers/STM32L4xx_HAL_Driver/Src/flash_l4.c ****         printf("ERROR flash erase\n");
 1118              		.loc 1 412 9 view .LVU305
 1119 004e FFF7FEFF 		bl	HAL_FLASH_GetError
 1120              	.LVL107:
 413:Drivers/STM32L4xx_HAL_Driver/Src/flash_l4.c ****         e_ret_status = HAL_ERROR;
 1121              		.loc 1 413 9 view .LVU306
 1122 0052 0748     		ldr	r0, .L93
 1123 0054 FFF7FEFF 		bl	puts
 1124              	.LVL108:
 414:Drivers/STM32L4xx_HAL_Driver/Src/flash_l4.c ****       }
 1125              		.loc 1 414 9 view .LVU307
 414:Drivers/STM32L4xx_HAL_Driver/Src/flash_l4.c ****       }
 1126              		.loc 1 414 22 is_stmt 0 view .LVU308
 1127 0058 0125     		movs	r5, #1
 1128 005a F5E7     		b	.L89
 1129              	.LVL109:
 1130              	.L88:
 420:Drivers/STM32L4xx_HAL_Driver/Src/flash_l4.c ****     }
 421:Drivers/STM32L4xx_HAL_Driver/Src/flash_l4.c ****     else
 422:Drivers/STM32L4xx_HAL_Driver/Src/flash_l4.c ****     {
 423:Drivers/STM32L4xx_HAL_Driver/Src/flash_l4.c ****       printf("ERROR cannot unlock\n");
 1131              		.loc 1 423 7 is_stmt 1 view .LVU309
 1132 005c 0548     		ldr	r0, .L93+4
 1133 005e FFF7FEFF 		bl	puts
 1134              	.LVL110:
 1135 0062 02E0     		b	.L86
 1136              	.LVL111:
 1137              	.L87:
 424:Drivers/STM32L4xx_HAL_Driver/Src/flash_l4.c ****     }
 425:Drivers/STM32L4xx_HAL_Driver/Src/flash_l4.c ****   }
ARM GAS  C:\cygwin64\tmp\ccFBQtVc.s 			page 34


 426:Drivers/STM32L4xx_HAL_Driver/Src/flash_l4.c ****   else
 427:Drivers/STM32L4xx_HAL_Driver/Src/flash_l4.c ****   {
 428:Drivers/STM32L4xx_HAL_Driver/Src/flash_l4.c ****     printf("cannot init\n");
 1138              		.loc 1 428 5 view .LVU310
 1139 0064 0448     		ldr	r0, .L93+8
 1140              	.LVL112:
 1141              		.loc 1 428 5 is_stmt 0 view .LVU311
 1142 0066 FFF7FEFF 		bl	puts
 1143              	.LVL113:
 429:Drivers/STM32L4xx_HAL_Driver/Src/flash_l4.c ****   }
 430:Drivers/STM32L4xx_HAL_Driver/Src/flash_l4.c ****   return e_ret_status;
 1144              		.loc 1 430 3 is_stmt 1 view .LVU312
 1145              	.L86:
 431:Drivers/STM32L4xx_HAL_Driver/Src/flash_l4.c **** }
 1146              		.loc 1 431 1 is_stmt 0 view .LVU313
 1147 006a 2846     		mov	r0, r5
 1148 006c 07B0     		add	sp, sp, #28
 1149              	.LCFI11:
 1150              		.cfi_def_cfa_offset 20
 1151              		@ sp needed
 1152 006e F0BD     		pop	{r4, r5, r6, r7, pc}
 1153              	.LVL114:
 1154              	.L94:
 1155              		.loc 1 431 1 view .LVU314
 1156              		.align	2
 1157              	.L93:
 1158 0070 00000000 		.word	.LC6
 1159 0074 14000000 		.word	.LC7
 1160 0078 28000000 		.word	.LC8
 1161              		.cfi_endproc
 1162              	.LFE326:
 1164              		.section	.text.FLASH_Write,"ax",%progbits
 1165              		.align	1
 1166              		.global	FLASH_Write
 1167              		.syntax unified
 1168              		.thumb
 1169              		.thumb_func
 1170              		.fpu fpv4-sp-d16
 1172              	FLASH_Write:
 1173              	.LVL115:
 1174              	.LFB327:
 432:Drivers/STM32L4xx_HAL_Driver/Src/flash_l4.c **** 
 433:Drivers/STM32L4xx_HAL_Driver/Src/flash_l4.c **** 
 434:Drivers/STM32L4xx_HAL_Driver/Src/flash_l4.c **** /**
 435:Drivers/STM32L4xx_HAL_Driver/Src/flash_l4.c ****   * @brief  This function writes a data buffer in flash (data are 32-bit aligned).
 436:Drivers/STM32L4xx_HAL_Driver/Src/flash_l4.c ****   * @note   After writing data buffer, the flash content is checked.
 437:Drivers/STM32L4xx_HAL_Driver/Src/flash_l4.c ****   * @param  uDestination: Start address for target location
 438:Drivers/STM32L4xx_HAL_Driver/Src/flash_l4.c ****   * @param  pSource: pointer on buffer with data to write
 439:Drivers/STM32L4xx_HAL_Driver/Src/flash_l4.c ****   * @param  uLength: Length of data buffer in byte. It has to be 64-bit aligned.
 440:Drivers/STM32L4xx_HAL_Driver/Src/flash_l4.c ****   * @retval uint32_t 0: Data successfully written to Flash memory
 441:Drivers/STM32L4xx_HAL_Driver/Src/flash_l4.c ****   *         1: Error occurred while writing data in Flash memory
 442:Drivers/STM32L4xx_HAL_Driver/Src/flash_l4.c ****   *         2: Written Data in flash memory is different from expected one
 443:Drivers/STM32L4xx_HAL_Driver/Src/flash_l4.c ****   */
 444:Drivers/STM32L4xx_HAL_Driver/Src/flash_l4.c **** uint32_t FLASH_Write(uint32_t uDestination, uint32_t *pSource, uint32_t uLength)
 445:Drivers/STM32L4xx_HAL_Driver/Src/flash_l4.c **** {
 1175              		.loc 1 445 1 is_stmt 1 view -0
 1176              		.cfi_startproc
ARM GAS  C:\cygwin64\tmp\ccFBQtVc.s 			page 35


 1177              		@ args = 0, pretend = 0, frame = 0
 1178              		@ frame_needed = 0, uses_anonymous_args = 0
 1179              		.loc 1 445 1 is_stmt 0 view .LVU316
 1180 0000 2DE9F843 		push	{r3, r4, r5, r6, r7, r8, r9, lr}
 1181              	.LCFI12:
 1182              		.cfi_def_cfa_offset 32
 1183              		.cfi_offset 3, -32
 1184              		.cfi_offset 4, -28
 1185              		.cfi_offset 5, -24
 1186              		.cfi_offset 6, -20
 1187              		.cfi_offset 7, -16
 1188              		.cfi_offset 8, -12
 1189              		.cfi_offset 9, -8
 1190              		.cfi_offset 14, -4
 1191 0004 0446     		mov	r4, r0
 1192 0006 8846     		mov	r8, r1
 1193 0008 1746     		mov	r7, r2
 446:Drivers/STM32L4xx_HAL_Driver/Src/flash_l4.c ****   uint32_t e_ret_status = HAL_ERROR;
 1194              		.loc 1 446 3 is_stmt 1 view .LVU317
 1195              	.LVL116:
 447:Drivers/STM32L4xx_HAL_Driver/Src/flash_l4.c ****   uint32_t i = 0U;
 1196              		.loc 1 447 3 view .LVU318
 448:Drivers/STM32L4xx_HAL_Driver/Src/flash_l4.c **** 
 449:Drivers/STM32L4xx_HAL_Driver/Src/flash_l4.c ****   /* Initialize Flash */
 450:Drivers/STM32L4xx_HAL_Driver/Src/flash_l4.c ****   e_ret_status = FLASH_Init();
 1197              		.loc 1 450 3 view .LVU319
 1198              		.loc 1 450 18 is_stmt 0 view .LVU320
 1199 000a FFF7FEFF 		bl	FLASH_Init
 1200              	.LVL117:
 451:Drivers/STM32L4xx_HAL_Driver/Src/flash_l4.c **** 
 452:Drivers/STM32L4xx_HAL_Driver/Src/flash_l4.c ****   if (e_ret_status == HAL_OK)
 1201              		.loc 1 452 3 is_stmt 1 view .LVU321
 1202              		.loc 1 452 6 is_stmt 0 view .LVU322
 1203 000e 8146     		mov	r9, r0
 1204 0010 10B1     		cbz	r0, .L104
 1205              	.LVL118:
 1206              	.L95:
 453:Drivers/STM32L4xx_HAL_Driver/Src/flash_l4.c ****   {
 454:Drivers/STM32L4xx_HAL_Driver/Src/flash_l4.c ****     /* Unlock the Flash to enable the flash control register access *************/
 455:Drivers/STM32L4xx_HAL_Driver/Src/flash_l4.c ****     if (HAL_FLASH_Unlock() != HAL_OK)
 456:Drivers/STM32L4xx_HAL_Driver/Src/flash_l4.c ****     {
 457:Drivers/STM32L4xx_HAL_Driver/Src/flash_l4.c ****       return HAL_ERROR;
 458:Drivers/STM32L4xx_HAL_Driver/Src/flash_l4.c **** 
 459:Drivers/STM32L4xx_HAL_Driver/Src/flash_l4.c ****     }
 460:Drivers/STM32L4xx_HAL_Driver/Src/flash_l4.c ****     else
 461:Drivers/STM32L4xx_HAL_Driver/Src/flash_l4.c ****     {
 462:Drivers/STM32L4xx_HAL_Driver/Src/flash_l4.c **** 
 463:Drivers/STM32L4xx_HAL_Driver/Src/flash_l4.c ****       /* DataLength must be a multiple of 64 bit */
 464:Drivers/STM32L4xx_HAL_Driver/Src/flash_l4.c ****       for (i = 0U; i < uLength / 8U; i++)
 465:Drivers/STM32L4xx_HAL_Driver/Src/flash_l4.c ****       {
 466:Drivers/STM32L4xx_HAL_Driver/Src/flash_l4.c ****         /* Device voltage range supposed to be [2.7V to 3.6V], the operation will
 467:Drivers/STM32L4xx_HAL_Driver/Src/flash_l4.c ****         be done by word */
 468:Drivers/STM32L4xx_HAL_Driver/Src/flash_l4.c ****         if (HAL_FLASH_Program(FLASH_TYPEPROGRAM_DOUBLEWORD, uDestination, *((uint64_t *)(pSource + 
 469:Drivers/STM32L4xx_HAL_Driver/Src/flash_l4.c ****         {
 470:Drivers/STM32L4xx_HAL_Driver/Src/flash_l4.c ****           /* Check the written value */
 471:Drivers/STM32L4xx_HAL_Driver/Src/flash_l4.c ****           if (*(uint64_t *)uDestination != *(uint64_t *)(pSource + 2U * i))
 472:Drivers/STM32L4xx_HAL_Driver/Src/flash_l4.c ****           {
ARM GAS  C:\cygwin64\tmp\ccFBQtVc.s 			page 36


 473:Drivers/STM32L4xx_HAL_Driver/Src/flash_l4.c ****             /* Flash content doesn't match SRAM content */
 474:Drivers/STM32L4xx_HAL_Driver/Src/flash_l4.c ****             e_ret_status = HAL_ERROR;
 475:Drivers/STM32L4xx_HAL_Driver/Src/flash_l4.c ****             break;
 476:Drivers/STM32L4xx_HAL_Driver/Src/flash_l4.c ****           }
 477:Drivers/STM32L4xx_HAL_Driver/Src/flash_l4.c ****           /* Increment FLASH Destination address */
 478:Drivers/STM32L4xx_HAL_Driver/Src/flash_l4.c ****           uDestination += 8U;
 479:Drivers/STM32L4xx_HAL_Driver/Src/flash_l4.c ****         }
 480:Drivers/STM32L4xx_HAL_Driver/Src/flash_l4.c ****         else
 481:Drivers/STM32L4xx_HAL_Driver/Src/flash_l4.c ****         {
 482:Drivers/STM32L4xx_HAL_Driver/Src/flash_l4.c ****           /* Error occurred while writing data in Flash memory */
 483:Drivers/STM32L4xx_HAL_Driver/Src/flash_l4.c ****           e_ret_status = HAL_ERROR;
 484:Drivers/STM32L4xx_HAL_Driver/Src/flash_l4.c ****           break;
 485:Drivers/STM32L4xx_HAL_Driver/Src/flash_l4.c ****         }
 486:Drivers/STM32L4xx_HAL_Driver/Src/flash_l4.c ****       }
 487:Drivers/STM32L4xx_HAL_Driver/Src/flash_l4.c ****       /* Lock the Flash to disable the flash control register access (recommended
 488:Drivers/STM32L4xx_HAL_Driver/Src/flash_l4.c ****       to protect the FLASH memory against possible unwanted operation) *********/
 489:Drivers/STM32L4xx_HAL_Driver/Src/flash_l4.c ****       HAL_FLASH_Lock();
 490:Drivers/STM32L4xx_HAL_Driver/Src/flash_l4.c ****     }
 491:Drivers/STM32L4xx_HAL_Driver/Src/flash_l4.c ****   }
 492:Drivers/STM32L4xx_HAL_Driver/Src/flash_l4.c ****   return e_ret_status;
 493:Drivers/STM32L4xx_HAL_Driver/Src/flash_l4.c **** }
 1207              		.loc 1 493 1 view .LVU323
 1208 0012 4846     		mov	r0, r9
 1209 0014 BDE8F883 		pop	{r3, r4, r5, r6, r7, r8, r9, pc}
 1210              	.LVL119:
 1211              	.L104:
 455:Drivers/STM32L4xx_HAL_Driver/Src/flash_l4.c ****     {
 1212              		.loc 1 455 5 is_stmt 1 view .LVU324
 455:Drivers/STM32L4xx_HAL_Driver/Src/flash_l4.c ****     {
 1213              		.loc 1 455 9 is_stmt 0 view .LVU325
 1214 0018 FFF7FEFF 		bl	HAL_FLASH_Unlock
 1215              	.LVL120:
 455:Drivers/STM32L4xx_HAL_Driver/Src/flash_l4.c ****     {
 1216              		.loc 1 455 8 view .LVU326
 1217 001c F8B9     		cbnz	r0, .L100
 464:Drivers/STM32L4xx_HAL_Driver/Src/flash_l4.c ****       {
 1218              		.loc 1 464 14 view .LVU327
 1219 001e 4D46     		mov	r5, r9
 1220 0020 01E0     		b	.L97
 1221              	.LVL121:
 1222              	.L105:
 478:Drivers/STM32L4xx_HAL_Driver/Src/flash_l4.c ****         }
 1223              		.loc 1 478 11 is_stmt 1 view .LVU328
 478:Drivers/STM32L4xx_HAL_Driver/Src/flash_l4.c ****         }
 1224              		.loc 1 478 24 is_stmt 0 view .LVU329
 1225 0022 0834     		adds	r4, r4, #8
 1226              	.LVL122:
 464:Drivers/STM32L4xx_HAL_Driver/Src/flash_l4.c ****       {
 1227              		.loc 1 464 38 is_stmt 1 view .LVU330
 464:Drivers/STM32L4xx_HAL_Driver/Src/flash_l4.c ****       {
 1228              		.loc 1 464 39 is_stmt 0 view .LVU331
 1229 0024 0135     		adds	r5, r5, #1
 1230              	.LVL123:
 1231              	.L97:
 464:Drivers/STM32L4xx_HAL_Driver/Src/flash_l4.c ****       {
 1232              		.loc 1 464 20 is_stmt 1 discriminator 1 view .LVU332
 464:Drivers/STM32L4xx_HAL_Driver/Src/flash_l4.c ****       {
ARM GAS  C:\cygwin64\tmp\ccFBQtVc.s 			page 37


 1233              		.loc 1 464 7 is_stmt 0 discriminator 1 view .LVU333
 1234 0026 B5EBD70F 		cmp	r5, r7, lsr #3
 1235 002a 15D2     		bcs	.L98
 468:Drivers/STM32L4xx_HAL_Driver/Src/flash_l4.c ****         {
 1236              		.loc 1 468 9 is_stmt 1 view .LVU334
 468:Drivers/STM32L4xx_HAL_Driver/Src/flash_l4.c ****         {
 1237              		.loc 1 468 98 is_stmt 0 view .LVU335
 1238 002c 08EBC506 		add	r6, r8, r5, lsl #3
 468:Drivers/STM32L4xx_HAL_Driver/Src/flash_l4.c ****         {
 1239              		.loc 1 468 13 view .LVU336
 1240 0030 D6E90023 		ldrd	r2, [r6]
 1241 0034 2146     		mov	r1, r4
 1242 0036 0020     		movs	r0, #0
 1243 0038 FFF7FEFF 		bl	HAL_FLASH_Program
 1244              	.LVL124:
 468:Drivers/STM32L4xx_HAL_Driver/Src/flash_l4.c ****         {
 1245              		.loc 1 468 12 view .LVU337
 1246 003c 50B9     		cbnz	r0, .L101
 471:Drivers/STM32L4xx_HAL_Driver/Src/flash_l4.c ****           {
 1247              		.loc 1 471 11 is_stmt 1 view .LVU338
 471:Drivers/STM32L4xx_HAL_Driver/Src/flash_l4.c ****           {
 1248              		.loc 1 471 15 is_stmt 0 view .LVU339
 1249 003e D4E90023 		ldrd	r2, [r4]
 471:Drivers/STM32L4xx_HAL_Driver/Src/flash_l4.c ****           {
 1250              		.loc 1 471 44 view .LVU340
 1251 0042 D6E90001 		ldrd	r0, [r6]
 471:Drivers/STM32L4xx_HAL_Driver/Src/flash_l4.c ****           {
 1252              		.loc 1 471 14 view .LVU341
 1253 0046 8B42     		cmp	r3, r1
 1254 0048 08BF     		it	eq
 1255 004a 8242     		cmpeq	r2, r0
 1256 004c E9D0     		beq	.L105
 474:Drivers/STM32L4xx_HAL_Driver/Src/flash_l4.c ****             break;
 1257              		.loc 1 474 26 view .LVU342
 1258 004e 4FF00109 		mov	r9, #1
 1259              	.LVL125:
 474:Drivers/STM32L4xx_HAL_Driver/Src/flash_l4.c ****             break;
 1260              		.loc 1 474 26 view .LVU343
 1261 0052 01E0     		b	.L98
 1262              	.LVL126:
 1263              	.L101:
 483:Drivers/STM32L4xx_HAL_Driver/Src/flash_l4.c ****           break;
 1264              		.loc 1 483 24 view .LVU344
 1265 0054 4FF00109 		mov	r9, #1
 1266              	.LVL127:
 1267              	.L98:
 489:Drivers/STM32L4xx_HAL_Driver/Src/flash_l4.c ****     }
 1268              		.loc 1 489 7 is_stmt 1 view .LVU345
 1269 0058 FFF7FEFF 		bl	HAL_FLASH_Lock
 1270              	.LVL128:
 1271 005c D9E7     		b	.L95
 1272              	.LVL129:
 1273              	.L100:
 457:Drivers/STM32L4xx_HAL_Driver/Src/flash_l4.c **** 
 1274              		.loc 1 457 14 is_stmt 0 view .LVU346
 1275 005e 4FF00109 		mov	r9, #1
 1276              	.LVL130:
ARM GAS  C:\cygwin64\tmp\ccFBQtVc.s 			page 38


 457:Drivers/STM32L4xx_HAL_Driver/Src/flash_l4.c **** 
 1277              		.loc 1 457 14 view .LVU347
 1278 0062 D6E7     		b	.L95
 1279              		.cfi_endproc
 1280              	.LFE327:
 1282              		.text
 1283              	.Letext0:
 1284              		.file 3 "c:\\program files (x86)\\gnu arm embedded toolchain\\9 2020-q2-update\\arm-none-eabi\\inc
 1285              		.file 4 "c:\\program files (x86)\\gnu arm embedded toolchain\\9 2020-q2-update\\arm-none-eabi\\inc
 1286              		.file 5 "Drivers/CMSIS/Include/core_cm4.h"
 1287              		.file 6 "Drivers/CMSIS/Device/ST/STM32L4xx/Include/system_stm32l4xx.h"
 1288              		.file 7 "Drivers/CMSIS/Device/ST/STM32L4xx/Include/stm32l475xx.h"
 1289              		.file 8 "Drivers/STM32L4xx_HAL_Driver/Inc/stm32l4xx_hal_def.h"
 1290              		.file 9 "Drivers/STM32L4xx_HAL_Driver/Inc/stm32l4xx_hal_dma.h"
 1291              		.file 10 "Drivers/STM32L4xx_HAL_Driver/Inc/stm32l4xx_hal_flash.h"
 1292              		.file 11 "Drivers/STM32L4xx_HAL_Driver/Inc/stm32l4xx_hal_spi.h"
 1293              		.file 12 "Drivers/STM32L4xx_HAL_Driver/Inc/stm32l4xx_hal.h"
 1294              		.file 13 "c:\\program files (x86)\\gnu arm embedded toolchain\\9 2020-q2-update\\lib\\gcc\\arm-non
 1295              		.file 14 "c:\\program files (x86)\\gnu arm embedded toolchain\\9 2020-q2-update\\arm-none-eabi\\in
 1296              		.file 15 "c:\\program files (x86)\\gnu arm embedded toolchain\\9 2020-q2-update\\arm-none-eabi\\in
 1297              		.file 16 "c:\\program files (x86)\\gnu arm embedded toolchain\\9 2020-q2-update\\arm-none-eabi\\in
 1298              		.file 17 "c:\\program files (x86)\\gnu arm embedded toolchain\\9 2020-q2-update\\arm-none-eabi\\in
 1299              		.file 18 "Drivers/STM32CubeL4_libs/Inc/net.h"
 1300              		.file 19 "Drivers/STM32CubeL4_libs/Inc/iot_flash_config.h"
 1301              		.file 20 "Inc/main.h"
 1302              		.file 21 "Drivers/STM32L4xx_HAL_Driver/Inc/stm32l4xx_hal_flash_ex.h"
 1303              		.file 22 "<built-in>"
 1304              		.file 23 "c:\\program files (x86)\\gnu arm embedded toolchain\\9 2020-q2-update\\arm-none-eabi\\in
ARM GAS  C:\cygwin64\tmp\ccFBQtVc.s 			page 39


DEFINED SYMBOLS
                            *ABS*:00000000 flash_l4.c
C:\cygwin64\tmp\ccFBQtVc.s:18     .text.FLASH_get_bank:00000000 $t
C:\cygwin64\tmp\ccFBQtVc.s:25     .text.FLASH_get_bank:00000000 FLASH_get_bank
C:\cygwin64\tmp\ccFBQtVc.s:116    .text.FLASH_get_bank:0000005c $d
C:\cygwin64\tmp\ccFBQtVc.s:124    .text.FLASH_get_pageInBank:00000000 $t
C:\cygwin64\tmp\ccFBQtVc.s:130    .text.FLASH_get_pageInBank:00000000 FLASH_get_pageInBank
C:\cygwin64\tmp\ccFBQtVc.s:234    .text.FLASH_get_pageInBank:00000074 $d
C:\cygwin64\tmp\ccFBQtVc.s:242    .text.GetPage:00000000 $t
C:\cygwin64\tmp\ccFBQtVc.s:248    .text.GetPage:00000000 GetPage
C:\cygwin64\tmp\ccFBQtVc.s:303    .text.GetPage:00000030 $d
C:\cygwin64\tmp\ccFBQtVc.s:310    .text.GetBank:00000000 $t
C:\cygwin64\tmp\ccFBQtVc.s:316    .text.GetBank:00000000 GetBank
C:\cygwin64\tmp\ccFBQtVc.s:406    .text.GetBank:0000005c $d
C:\cygwin64\tmp\ccFBQtVc.s:414    .rodata.FLASH_unlock_erase.str1.4:00000000 $d
C:\cygwin64\tmp\ccFBQtVc.s:421    .text.FLASH_unlock_erase:00000000 $t
C:\cygwin64\tmp\ccFBQtVc.s:427    .text.FLASH_unlock_erase:00000000 FLASH_unlock_erase
C:\cygwin64\tmp\ccFBQtVc.s:541    .text.FLASH_unlock_erase:00000068 $d
C:\cygwin64\tmp\ccFBQtVc.s:547    .rodata.FLASH_write_at.str1.4:00000000 $d
C:\cygwin64\tmp\ccFBQtVc.s:552    .text.FLASH_write_at:00000000 $t
C:\cygwin64\tmp\ccFBQtVc.s:558    .text.FLASH_write_at:00000000 FLASH_write_at
C:\cygwin64\tmp\ccFBQtVc.s:722    .text.FLASH_write_at:00000070 $d
C:\cygwin64\tmp\ccFBQtVc.s:727    .rodata.FLASH_Init.str1.4:00000000 $d
C:\cygwin64\tmp\ccFBQtVc.s:734    .text.FLASH_Init:00000000 $t
C:\cygwin64\tmp\ccFBQtVc.s:740    .text.FLASH_Init:00000000 FLASH_Init
C:\cygwin64\tmp\ccFBQtVc.s:813    .text.FLASH_Init:0000003c $d
C:\cygwin64\tmp\ccFBQtVc.s:820    .rodata.FLASH_update.str1.4:00000000 $d
C:\cygwin64\tmp\ccFBQtVc.s:824    .text.FLASH_update:00000000 $t
C:\cygwin64\tmp\ccFBQtVc.s:831    .text.FLASH_update:00000000 FLASH_update
C:\cygwin64\tmp\ccFBQtVc.s:995    .text.FLASH_update:000000a4 $d
C:\cygwin64\tmp\ccFBQtVc.s:1002   .rodata.FLASH_Erase_Size.str1.4:00000000 $d
C:\cygwin64\tmp\ccFBQtVc.s:1012   .text.FLASH_Erase_Size:00000000 $t
C:\cygwin64\tmp\ccFBQtVc.s:1019   .text.FLASH_Erase_Size:00000000 FLASH_Erase_Size
C:\cygwin64\tmp\ccFBQtVc.s:1158   .text.FLASH_Erase_Size:00000070 $d
C:\cygwin64\tmp\ccFBQtVc.s:1165   .text.FLASH_Write:00000000 $t
C:\cygwin64\tmp\ccFBQtVc.s:1172   .text.FLASH_Write:00000000 FLASH_Write

UNDEFINED SYMBOLS
HAL_FLASH_Unlock
HAL_FLASHEx_Erase
puts
printf
HAL_FLASH_Program
HAL_FLASH_Lock
memcpy
HAL_FLASH_GetError
