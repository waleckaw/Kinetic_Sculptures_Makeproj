ARM GAS  C:\cygwin64\tmp\ccR4YQzD.s 			page 1


   1              		.cpu cortex-m4
   2              		.eabi_attribute 27, 1
   3              		.eabi_attribute 28, 1
   4              		.eabi_attribute 20, 1
   5              		.eabi_attribute 21, 1
   6              		.eabi_attribute 23, 3
   7              		.eabi_attribute 24, 1
   8              		.eabi_attribute 25, 1
   9              		.eabi_attribute 26, 1
  10              		.eabi_attribute 30, 1
  11              		.eabi_attribute 34, 1
  12              		.eabi_attribute 18, 4
  13              		.file	"iot_flash_config.c"
  14              		.text
  15              	.Ltext0:
  16              		.cfi_sections	.debug_frame
  17              		.section	.rodata.getInputString.str1.4,"aMS",%progbits,1
  18              		.align	2
  19              	.LC0:
  20 0000 200800   		.ascii	" \010\000"
  21              		.section	.text.getInputString,"ax",%progbits
  22              		.align	1
  23              		.global	getInputString
  24              		.arch armv7e-m
  25              		.syntax unified
  26              		.thumb
  27              		.thumb_func
  28              		.fpu fpv4-sp-d16
  30              	getInputString:
  31              	.LVL0:
  32              	.LFB318:
  33              		.file 1 "Drivers/STM32CubeL4_libs/Src/iot_flash_config.c"
   1:Drivers/STM32CubeL4_libs/Src/iot_flash_config.c **** /**
   2:Drivers/STM32CubeL4_libs/Src/iot_flash_config.c ****   ******************************************************************************
   3:Drivers/STM32CubeL4_libs/Src/iot_flash_config.c ****   * @file    iot_flash_config.c
   4:Drivers/STM32CubeL4_libs/Src/iot_flash_config.c ****   * @author  MCD Application Team
   5:Drivers/STM32CubeL4_libs/Src/iot_flash_config.c ****   * @brief   configuration in flash memory.
   6:Drivers/STM32CubeL4_libs/Src/iot_flash_config.c ****   ******************************************************************************
   7:Drivers/STM32CubeL4_libs/Src/iot_flash_config.c ****   * @attention
   8:Drivers/STM32CubeL4_libs/Src/iot_flash_config.c ****   *
   9:Drivers/STM32CubeL4_libs/Src/iot_flash_config.c ****   * <h2><center>&copy; Copyright (c) 2017 STMicroelectronics International N.V.
  10:Drivers/STM32CubeL4_libs/Src/iot_flash_config.c ****   * All rights reserved.</center></h2>
  11:Drivers/STM32CubeL4_libs/Src/iot_flash_config.c ****   *
  12:Drivers/STM32CubeL4_libs/Src/iot_flash_config.c ****   * Redistribution and use in source and binary forms, with or without
  13:Drivers/STM32CubeL4_libs/Src/iot_flash_config.c ****   * modification, are permitted, provided that the following conditions are met:
  14:Drivers/STM32CubeL4_libs/Src/iot_flash_config.c ****   *
  15:Drivers/STM32CubeL4_libs/Src/iot_flash_config.c ****   * 1. Redistribution of source code must retain the above copyright notice,
  16:Drivers/STM32CubeL4_libs/Src/iot_flash_config.c ****   *    this list of conditions and the following disclaimer.
  17:Drivers/STM32CubeL4_libs/Src/iot_flash_config.c ****   * 2. Redistributions in binary form must reproduce the above copyright notice,
  18:Drivers/STM32CubeL4_libs/Src/iot_flash_config.c ****   *    this list of conditions and the following disclaimer in the documentation
  19:Drivers/STM32CubeL4_libs/Src/iot_flash_config.c ****   *    and/or other materials provided with the distribution.
  20:Drivers/STM32CubeL4_libs/Src/iot_flash_config.c ****   * 3. Neither the name of STMicroelectronics nor the names of other
  21:Drivers/STM32CubeL4_libs/Src/iot_flash_config.c ****   *    contributors to this software may be used to endorse or promote products
  22:Drivers/STM32CubeL4_libs/Src/iot_flash_config.c ****   *    derived from this software without specific written permission.
  23:Drivers/STM32CubeL4_libs/Src/iot_flash_config.c ****   * 4. This software, including modifications and/or derivative works of this
  24:Drivers/STM32CubeL4_libs/Src/iot_flash_config.c ****   *    software, must execute solely and exclusively on microcontroller or
  25:Drivers/STM32CubeL4_libs/Src/iot_flash_config.c ****   *    microprocessor devices manufactured by or for STMicroelectronics.
ARM GAS  C:\cygwin64\tmp\ccR4YQzD.s 			page 2


  26:Drivers/STM32CubeL4_libs/Src/iot_flash_config.c ****   * 5. Redistribution and use of this software other than as permitted under
  27:Drivers/STM32CubeL4_libs/Src/iot_flash_config.c ****   *    this license is void and will automatically terminate your rights under
  28:Drivers/STM32CubeL4_libs/Src/iot_flash_config.c ****   *    this license.
  29:Drivers/STM32CubeL4_libs/Src/iot_flash_config.c ****   *
  30:Drivers/STM32CubeL4_libs/Src/iot_flash_config.c ****   * THIS SOFTWARE IS PROVIDED BY STMICROELECTRONICS AND CONTRIBUTORS "AS IS"
  31:Drivers/STM32CubeL4_libs/Src/iot_flash_config.c ****   * AND ANY EXPRESS, IMPLIED OR STATUTORY WARRANTIES, INCLUDING, BUT NOT
  32:Drivers/STM32CubeL4_libs/Src/iot_flash_config.c ****   * LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY, FITNESS FOR A
  33:Drivers/STM32CubeL4_libs/Src/iot_flash_config.c ****   * PARTICULAR PURPOSE AND NON-INFRINGEMENT OF THIRD PARTY INTELLECTUAL PROPERTY
  34:Drivers/STM32CubeL4_libs/Src/iot_flash_config.c ****   * RIGHTS ARE DISCLAIMED TO THE FULLEST EXTENT PERMITTED BY LAW. IN NO EVENT
  35:Drivers/STM32CubeL4_libs/Src/iot_flash_config.c ****   * SHALL STMICROELECTRONICS OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT,
  36:Drivers/STM32CubeL4_libs/Src/iot_flash_config.c ****   * INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT
  37:Drivers/STM32CubeL4_libs/Src/iot_flash_config.c ****   * LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA,
  38:Drivers/STM32CubeL4_libs/Src/iot_flash_config.c ****   * OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF
  39:Drivers/STM32CubeL4_libs/Src/iot_flash_config.c ****   * LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING
  40:Drivers/STM32CubeL4_libs/Src/iot_flash_config.c ****   * NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE,
  41:Drivers/STM32CubeL4_libs/Src/iot_flash_config.c ****   * EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
  42:Drivers/STM32CubeL4_libs/Src/iot_flash_config.c ****   *
  43:Drivers/STM32CubeL4_libs/Src/iot_flash_config.c ****   ******************************************************************************
  44:Drivers/STM32CubeL4_libs/Src/iot_flash_config.c ****   */
  45:Drivers/STM32CubeL4_libs/Src/iot_flash_config.c **** 
  46:Drivers/STM32CubeL4_libs/Src/iot_flash_config.c **** /* Includes ------------------------------------------------------------------*/
  47:Drivers/STM32CubeL4_libs/Src/iot_flash_config.c **** #include <string.h>
  48:Drivers/STM32CubeL4_libs/Src/iot_flash_config.c **** #include <stdio.h>
  49:Drivers/STM32CubeL4_libs/Src/iot_flash_config.c **** #include <stdbool.h>
  50:Drivers/STM32CubeL4_libs/Src/iot_flash_config.c **** #include "main.h"
  51:Drivers/STM32CubeL4_libs/Src/iot_flash_config.c **** #include "rfu.h"
  52:Drivers/STM32CubeL4_libs/Src/iot_flash_config.c **** #ifdef USE_FIREWALL
  53:Drivers/STM32CubeL4_libs/Src/iot_flash_config.c **** #include "firewall_wrapper.h"
  54:Drivers/STM32CubeL4_libs/Src/iot_flash_config.c **** #endif
  55:Drivers/STM32CubeL4_libs/Src/iot_flash_config.c **** #include "flash.h"
  56:Drivers/STM32CubeL4_libs/Src/iot_flash_config.c **** #include "iot_flash_config.h"
  57:Drivers/STM32CubeL4_libs/Src/iot_flash_config.c **** #include "msg.h"
  58:Drivers/STM32CubeL4_libs/Src/iot_flash_config.c **** 
  59:Drivers/STM32CubeL4_libs/Src/iot_flash_config.c **** /* Private typedef -----------------------------------------------------------*/
  60:Drivers/STM32CubeL4_libs/Src/iot_flash_config.c **** /* Private defines -----------------------------------------------------------*/
  61:Drivers/STM32CubeL4_libs/Src/iot_flash_config.c **** #define PEM_READ_LINE_SIZE    120
  62:Drivers/STM32CubeL4_libs/Src/iot_flash_config.c **** #define PEM_READ_BUFFER_SIZE  8192  /**< Max size which can be got from the terminal in a single ge
  63:Drivers/STM32CubeL4_libs/Src/iot_flash_config.c **** 
  64:Drivers/STM32CubeL4_libs/Src/iot_flash_config.c **** /* Private macros ------------------------------------------------------------*/
  65:Drivers/STM32CubeL4_libs/Src/iot_flash_config.c **** #ifdef ENABLE_TRACE_FLASH
  66:Drivers/STM32CubeL4_libs/Src/iot_flash_config.c **** #define TRACE_FLASH msg_info
  67:Drivers/STM32CubeL4_libs/Src/iot_flash_config.c **** #else
  68:Drivers/STM32CubeL4_libs/Src/iot_flash_config.c **** #define TRACE_FLASH(...)
  69:Drivers/STM32CubeL4_libs/Src/iot_flash_config.c **** #endif
  70:Drivers/STM32CubeL4_libs/Src/iot_flash_config.c **** 
  71:Drivers/STM32CubeL4_libs/Src/iot_flash_config.c **** /* Private variables ---------------------------------------------------------*/
  72:Drivers/STM32CubeL4_libs/Src/iot_flash_config.c **** /** Do not zero-initialize the static user configuration.
  73:Drivers/STM32CubeL4_libs/Src/iot_flash_config.c ****  *  Otherwise, it must be entered manually each time the device FW is updated by STLink.
  74:Drivers/STM32CubeL4_libs/Src/iot_flash_config.c ****  */
  75:Drivers/STM32CubeL4_libs/Src/iot_flash_config.c **** 
  76:Drivers/STM32CubeL4_libs/Src/iot_flash_config.c **** /* to workaround a limitation of SFMI tools which support a single section      */
  77:Drivers/STM32CubeL4_libs/Src/iot_flash_config.c **** /* so do not mark structure as _no_init                                         */
  78:Drivers/STM32CubeL4_libs/Src/iot_flash_config.c **** #ifdef __ICCARM__ /* IAR */
  79:Drivers/STM32CubeL4_libs/Src/iot_flash_config.c **** extern void __ICFEDIT_region_FIXED_LOC_start__;
  80:Drivers/STM32CubeL4_libs/Src/iot_flash_config.c **** const  user_config_t	*lUserConfigPtr = &__ICFEDIT_region_FIXED_LOC_start__;
  81:Drivers/STM32CubeL4_libs/Src/iot_flash_config.c **** 
  82:Drivers/STM32CubeL4_libs/Src/iot_flash_config.c **** #elif defined (__CC_ARM ) /* Keil / armcc */
ARM GAS  C:\cygwin64\tmp\ccR4YQzD.s 			page 3


  83:Drivers/STM32CubeL4_libs/Src/iot_flash_config.c **** user_config_t __uninited_region_start__ __attribute__((section("UNINIT_FIXED_LOC"), zero_init));
  84:Drivers/STM32CubeL4_libs/Src/iot_flash_config.c **** const  user_config_t	*lUserConfigPtr = &__uninited_region_start__;
  85:Drivers/STM32CubeL4_libs/Src/iot_flash_config.c **** 
  86:Drivers/STM32CubeL4_libs/Src/iot_flash_config.c **** #elif defined (__GNUC__) /* GNU compiler */
  87:Drivers/STM32CubeL4_libs/Src/iot_flash_config.c **** user_config_t __uninited_region_start__ __attribute__((section("UNINIT_FIXED_LOC")));
  88:Drivers/STM32CubeL4_libs/Src/iot_flash_config.c **** const  user_config_t	*lUserConfigPtr = &__uninited_region_start__;
  89:Drivers/STM32CubeL4_libs/Src/iot_flash_config.c **** 
  90:Drivers/STM32CubeL4_libs/Src/iot_flash_config.c **** #endif
  91:Drivers/STM32CubeL4_libs/Src/iot_flash_config.c **** 
  92:Drivers/STM32CubeL4_libs/Src/iot_flash_config.c **** /* Private function prototypes -----------------------------------------------*/
  93:Drivers/STM32CubeL4_libs/Src/iot_flash_config.c **** int CaptureAndFlashPem(char *pem_name, char const *flash_addr, bool restricted_area);
  94:Drivers/STM32CubeL4_libs/Src/iot_flash_config.c **** /* Functions Definition ------------------------------------------------------*/
  95:Drivers/STM32CubeL4_libs/Src/iot_flash_config.c **** 
  96:Drivers/STM32CubeL4_libs/Src/iot_flash_config.c **** /**
  97:Drivers/STM32CubeL4_libs/Src/iot_flash_config.c ****   * @brief  Get a line from the console (user input).
  98:Drivers/STM32CubeL4_libs/Src/iot_flash_config.c ****   * @param  Out:  inputString   Pointer to buffer for input line.
  99:Drivers/STM32CubeL4_libs/Src/iot_flash_config.c ****   * @param  In:   len           Max length for line.
 100:Drivers/STM32CubeL4_libs/Src/iot_flash_config.c ****   * @retval Number of bytes read from the terminal.
 101:Drivers/STM32CubeL4_libs/Src/iot_flash_config.c ****   */
 102:Drivers/STM32CubeL4_libs/Src/iot_flash_config.c **** int getInputString(char *inputString, size_t len)
 103:Drivers/STM32CubeL4_libs/Src/iot_flash_config.c **** {
  34              		.loc 1 103 1 view -0
  35              		.cfi_startproc
  36              		@ args = 0, pretend = 0, frame = 0
  37              		@ frame_needed = 0, uses_anonymous_args = 0
  38              		.loc 1 103 1 is_stmt 0 view .LVU1
  39 0000 70B5     		push	{r4, r5, r6, lr}
  40              	.LCFI0:
  41              		.cfi_def_cfa_offset 16
  42              		.cfi_offset 4, -16
  43              		.cfi_offset 5, -12
  44              		.cfi_offset 6, -8
  45              		.cfi_offset 14, -4
  46 0002 0646     		mov	r6, r0
  47 0004 0D46     		mov	r5, r1
 104:Drivers/STM32CubeL4_libs/Src/iot_flash_config.c ****   size_t currLen = 0;
  48              		.loc 1 104 3 is_stmt 1 view .LVU2
  49              	.LVL1:
 105:Drivers/STM32CubeL4_libs/Src/iot_flash_config.c ****   int c = 0;
  50              		.loc 1 105 3 view .LVU3
 106:Drivers/STM32CubeL4_libs/Src/iot_flash_config.c **** 
 107:Drivers/STM32CubeL4_libs/Src/iot_flash_config.c ****   c = getchar();
  51              		.loc 1 107 3 view .LVU4
  52              		.loc 1 107 7 is_stmt 0 view .LVU5
  53 0006 FFF7FEFF 		bl	getchar
  54              	.LVL2:
 108:Drivers/STM32CubeL4_libs/Src/iot_flash_config.c **** 
 109:Drivers/STM32CubeL4_libs/Src/iot_flash_config.c ****   while ((c != EOF) && ((currLen + 1) < len) && (c != '\r') && (c != '\n') /*&& (c != 'v')*/ )
  55              		.loc 1 109 3 is_stmt 1 view .LVU6
 104:Drivers/STM32CubeL4_libs/Src/iot_flash_config.c ****   int c = 0;
  56              		.loc 1 104 10 is_stmt 0 view .LVU7
  57 000a 0024     		movs	r4, #0
  58              		.loc 1 109 9 view .LVU8
  59 000c 0AE0     		b	.L2
  60              	.LVL3:
  61              	.L11:
 110:Drivers/STM32CubeL4_libs/Src/iot_flash_config.c ****   {
ARM GAS  C:\cygwin64\tmp\ccR4YQzD.s 			page 4


 111:Drivers/STM32CubeL4_libs/Src/iot_flash_config.c ****     if (c == '\b')
 112:Drivers/STM32CubeL4_libs/Src/iot_flash_config.c ****     {
 113:Drivers/STM32CubeL4_libs/Src/iot_flash_config.c ****       if (currLen != 0)
  62              		.loc 1 113 7 is_stmt 1 view .LVU9
  63              		.loc 1 113 10 is_stmt 0 view .LVU10
  64 000e 3CB1     		cbz	r4, .L4
 114:Drivers/STM32CubeL4_libs/Src/iot_flash_config.c ****       {
 115:Drivers/STM32CubeL4_libs/Src/iot_flash_config.c ****         --currLen;
  65              		.loc 1 115 9 is_stmt 1 view .LVU11
  66 0010 013C     		subs	r4, r4, #1
  67              	.LVL4:
 116:Drivers/STM32CubeL4_libs/Src/iot_flash_config.c ****         inputString[currLen] = 0;
  68              		.loc 1 116 9 view .LVU12
  69              		.loc 1 116 30 is_stmt 0 view .LVU13
  70 0012 0023     		movs	r3, #0
  71 0014 3355     		strb	r3, [r6, r4]
 117:Drivers/STM32CubeL4_libs/Src/iot_flash_config.c ****         printf(" \b");
  72              		.loc 1 117 9 is_stmt 1 view .LVU14
  73 0016 1148     		ldr	r0, .L13
  74              	.LVL5:
  75              		.loc 1 117 9 is_stmt 0 view .LVU15
  76 0018 FFF7FEFF 		bl	printf
  77              	.LVL6:
  78 001c 00E0     		b	.L4
  79              	.LVL7:
  80              	.L9:
 118:Drivers/STM32CubeL4_libs/Src/iot_flash_config.c ****       }
 119:Drivers/STM32CubeL4_libs/Src/iot_flash_config.c ****     }
 120:Drivers/STM32CubeL4_libs/Src/iot_flash_config.c ****     else
 121:Drivers/STM32CubeL4_libs/Src/iot_flash_config.c ****     {
 122:Drivers/STM32CubeL4_libs/Src/iot_flash_config.c ****       if (currLen < (len-1))
 123:Drivers/STM32CubeL4_libs/Src/iot_flash_config.c ****       {
 124:Drivers/STM32CubeL4_libs/Src/iot_flash_config.c ****         inputString[currLen] = c;
 125:Drivers/STM32CubeL4_libs/Src/iot_flash_config.c ****       }
 126:Drivers/STM32CubeL4_libs/Src/iot_flash_config.c **** 
 127:Drivers/STM32CubeL4_libs/Src/iot_flash_config.c ****       ++currLen;
  81              		.loc 1 127 7 view .LVU16
  82 001e 1C46     		mov	r4, r3
  83              	.LVL8:
  84              	.L4:
 128:Drivers/STM32CubeL4_libs/Src/iot_flash_config.c ****     }
 129:Drivers/STM32CubeL4_libs/Src/iot_flash_config.c ****     c = getchar();
  85              		.loc 1 129 5 is_stmt 1 view .LVU17
  86              		.loc 1 129 9 is_stmt 0 view .LVU18
  87 0020 FFF7FEFF 		bl	getchar
  88              	.LVL9:
  89              	.L2:
 109:Drivers/STM32CubeL4_libs/Src/iot_flash_config.c ****   {
  90              		.loc 1 109 9 is_stmt 1 view .LVU19
  91 0024 B0F1FF3F 		cmp	r0, #-1
  92 0028 0ED0     		beq	.L5
 109:Drivers/STM32CubeL4_libs/Src/iot_flash_config.c ****   {
  93              		.loc 1 109 34 is_stmt 0 discriminator 1 view .LVU20
  94 002a 631C     		adds	r3, r4, #1
 109:Drivers/STM32CubeL4_libs/Src/iot_flash_config.c ****   {
  95              		.loc 1 109 21 discriminator 1 view .LVU21
  96 002c AB42     		cmp	r3, r5
ARM GAS  C:\cygwin64\tmp\ccR4YQzD.s 			page 5


  97 002e 0BD2     		bcs	.L5
 109:Drivers/STM32CubeL4_libs/Src/iot_flash_config.c ****   {
  98              		.loc 1 109 46 discriminator 2 view .LVU22
  99 0030 0D28     		cmp	r0, #13
 100 0032 09D0     		beq	.L5
 109:Drivers/STM32CubeL4_libs/Src/iot_flash_config.c ****   {
 101              		.loc 1 109 61 discriminator 3 view .LVU23
 102 0034 0A28     		cmp	r0, #10
 103 0036 07D0     		beq	.L5
 111:Drivers/STM32CubeL4_libs/Src/iot_flash_config.c ****     {
 104              		.loc 1 111 5 is_stmt 1 view .LVU24
 111:Drivers/STM32CubeL4_libs/Src/iot_flash_config.c ****     {
 105              		.loc 1 111 8 is_stmt 0 view .LVU25
 106 0038 0828     		cmp	r0, #8
 107 003a E8D0     		beq	.L11
 122:Drivers/STM32CubeL4_libs/Src/iot_flash_config.c ****       {
 108              		.loc 1 122 7 is_stmt 1 view .LVU26
 122:Drivers/STM32CubeL4_libs/Src/iot_flash_config.c ****       {
 109              		.loc 1 122 25 is_stmt 0 view .LVU27
 110 003c 6A1E     		subs	r2, r5, #1
 122:Drivers/STM32CubeL4_libs/Src/iot_flash_config.c ****       {
 111              		.loc 1 122 10 view .LVU28
 112 003e A242     		cmp	r2, r4
 113 0040 EDD9     		bls	.L9
 124:Drivers/STM32CubeL4_libs/Src/iot_flash_config.c ****       }
 114              		.loc 1 124 9 is_stmt 1 view .LVU29
 124:Drivers/STM32CubeL4_libs/Src/iot_flash_config.c ****       }
 115              		.loc 1 124 30 is_stmt 0 view .LVU30
 116 0042 3055     		strb	r0, [r6, r4]
 127:Drivers/STM32CubeL4_libs/Src/iot_flash_config.c ****     }
 117              		.loc 1 127 7 view .LVU31
 118 0044 1C46     		mov	r4, r3
 119              	.LVL10:
 127:Drivers/STM32CubeL4_libs/Src/iot_flash_config.c ****     }
 120              		.loc 1 127 7 view .LVU32
 121 0046 EBE7     		b	.L4
 122              	.LVL11:
 123              	.L5:
 130:Drivers/STM32CubeL4_libs/Src/iot_flash_config.c ****   }
 131:Drivers/STM32CubeL4_libs/Src/iot_flash_config.c ****   if (currLen != 0)
 124              		.loc 1 131 3 is_stmt 1 view .LVU33
 125              		.loc 1 131 6 is_stmt 0 view .LVU34
 126 0048 0CB1     		cbz	r4, .L7
 132:Drivers/STM32CubeL4_libs/Src/iot_flash_config.c ****   { /* Close the string in the input buffer... only if a string was written to it. */
 133:Drivers/STM32CubeL4_libs/Src/iot_flash_config.c ****     inputString[currLen] = '\0';
 127              		.loc 1 133 5 is_stmt 1 view .LVU35
 128              		.loc 1 133 26 is_stmt 0 view .LVU36
 129 004a 0023     		movs	r3, #0
 130 004c 3355     		strb	r3, [r6, r4]
 131              	.L7:
 134:Drivers/STM32CubeL4_libs/Src/iot_flash_config.c ****   }
 135:Drivers/STM32CubeL4_libs/Src/iot_flash_config.c ****   if (c == '\r')
 132              		.loc 1 135 3 is_stmt 1 view .LVU37
 133              		.loc 1 135 6 is_stmt 0 view .LVU38
 134 004e 0D28     		cmp	r0, #13
 135 0050 01D0     		beq	.L12
 136              	.LVL12:
ARM GAS  C:\cygwin64\tmp\ccR4YQzD.s 			page 6


 137              	.L8:
 136:Drivers/STM32CubeL4_libs/Src/iot_flash_config.c ****   {
 137:Drivers/STM32CubeL4_libs/Src/iot_flash_config.c ****     c = getchar(); /* assume there is '\n' after '\r'. Just discard it. */
 138:Drivers/STM32CubeL4_libs/Src/iot_flash_config.c ****   }
 139:Drivers/STM32CubeL4_libs/Src/iot_flash_config.c **** 
 140:Drivers/STM32CubeL4_libs/Src/iot_flash_config.c ****   return currLen;
 138              		.loc 1 140 3 is_stmt 1 view .LVU39
 141:Drivers/STM32CubeL4_libs/Src/iot_flash_config.c **** }
 139              		.loc 1 141 1 is_stmt 0 view .LVU40
 140 0052 2046     		mov	r0, r4
 141 0054 70BD     		pop	{r4, r5, r6, pc}
 142              	.LVL13:
 143              	.L12:
 137:Drivers/STM32CubeL4_libs/Src/iot_flash_config.c ****   }
 144              		.loc 1 137 5 is_stmt 1 view .LVU41
 137:Drivers/STM32CubeL4_libs/Src/iot_flash_config.c ****   }
 145              		.loc 1 137 9 is_stmt 0 view .LVU42
 146 0056 FFF7FEFF 		bl	getchar
 147              	.LVL14:
 137:Drivers/STM32CubeL4_libs/Src/iot_flash_config.c ****   }
 148              		.loc 1 137 9 view .LVU43
 149 005a FAE7     		b	.L8
 150              	.L14:
 151              		.align	2
 152              	.L13:
 153 005c 00000000 		.word	.LC0
 154              		.cfi_endproc
 155              	.LFE318:
 157              		.section	.rodata.checkWiFiCredentials.str1.4,"aMS",%progbits,1
 158              		.align	2
 159              	.LC1:
 160 0000 696E645F 		.ascii	"ind_study_pi\000"
 160      73747564 
 160      795F7069 
 160      00
 161 000d 000000   		.align	2
 162              	.LC2:
 163 0010 6C616D70 		.ascii	"lamp_password\000"
 163      5F706173 
 163      73776F72 
 163      6400
 164              		.section	.text.checkWiFiCredentials,"ax",%progbits
 165              		.align	1
 166              		.global	checkWiFiCredentials
 167              		.syntax unified
 168              		.thumb
 169              		.thumb_func
 170              		.fpu fpv4-sp-d16
 172              	checkWiFiCredentials:
 173              	.LVL15:
 174              	.LFB319:
 142:Drivers/STM32CubeL4_libs/Src/iot_flash_config.c **** 
 143:Drivers/STM32CubeL4_libs/Src/iot_flash_config.c **** #ifdef USE_C2C
 144:Drivers/STM32CubeL4_libs/Src/iot_flash_config.c **** /**
 145:Drivers/STM32CubeL4_libs/Src/iot_flash_config.c ****   * @brief  Check whether the C2C parameters are present in Flash memory.
 146:Drivers/STM32CubeL4_libs/Src/iot_flash_config.c ****   *         Returns the parameters if present.
 147:Drivers/STM32CubeL4_libs/Src/iot_flash_config.c ****   * @param  Out:  oper_ap_code       SIM operator Access Point code
ARM GAS  C:\cygwin64\tmp\ccR4YQzD.s 			page 7


 148:Drivers/STM32CubeL4_libs/Src/iot_flash_config.c ****   * @param  Out:  username           username
 149:Drivers/STM32CubeL4_libs/Src/iot_flash_config.c ****   * @param  Out:  password           password
 150:Drivers/STM32CubeL4_libs/Src/iot_flash_config.c ****   * @param  Out:  use_internal_sim  Use the embedded SIM rather than the external slot
 151:Drivers/STM32CubeL4_libs/Src/iot_flash_config.c ****   * @retval   0 if the parameters are present in Flash.
 152:Drivers/STM32CubeL4_libs/Src/iot_flash_config.c ****   *          -1 if the parameters are not present in Flash.
 153:Drivers/STM32CubeL4_libs/Src/iot_flash_config.c ****   */
 154:Drivers/STM32CubeL4_libs/Src/iot_flash_config.c **** int checkC2cCredentials(const char ** const oper_ap_code, const char ** const username, const char 
 155:Drivers/STM32CubeL4_libs/Src/iot_flash_config.c **** {
 156:Drivers/STM32CubeL4_libs/Src/iot_flash_config.c ****   bool is_soapc_present = 0;
 157:Drivers/STM32CubeL4_libs/Src/iot_flash_config.c **** 
 158:Drivers/STM32CubeL4_libs/Src/iot_flash_config.c ****   if (lUserConfigPtr->c2c_config.magic == USER_CONF_MAGIC)
 159:Drivers/STM32CubeL4_libs/Src/iot_flash_config.c ****   {
 160:Drivers/STM32CubeL4_libs/Src/iot_flash_config.c ****     is_soapc_present = true;
 161:Drivers/STM32CubeL4_libs/Src/iot_flash_config.c ****     if (oper_ap_code == NULL)
 162:Drivers/STM32CubeL4_libs/Src/iot_flash_config.c ****     {
 163:Drivers/STM32CubeL4_libs/Src/iot_flash_config.c ****       return -2;
 164:Drivers/STM32CubeL4_libs/Src/iot_flash_config.c ****     }
 165:Drivers/STM32CubeL4_libs/Src/iot_flash_config.c **** 
 166:Drivers/STM32CubeL4_libs/Src/iot_flash_config.c ****     *use_internal_sim = lUserConfigPtr->c2c_config.use_internal_sim;
 167:Drivers/STM32CubeL4_libs/Src/iot_flash_config.c ****     *oper_ap_code = lUserConfigPtr->c2c_config.oper_ap_code;
 168:Drivers/STM32CubeL4_libs/Src/iot_flash_config.c ****     *username = lUserConfigPtr->c2c_config.username;
 169:Drivers/STM32CubeL4_libs/Src/iot_flash_config.c ****     *password = lUserConfigPtr->c2c_config.password;
 170:Drivers/STM32CubeL4_libs/Src/iot_flash_config.c ****   }
 171:Drivers/STM32CubeL4_libs/Src/iot_flash_config.c **** 
 172:Drivers/STM32CubeL4_libs/Src/iot_flash_config.c ****   return (is_soapc_present) ? 0 : -1;
 173:Drivers/STM32CubeL4_libs/Src/iot_flash_config.c **** }
 174:Drivers/STM32CubeL4_libs/Src/iot_flash_config.c **** 
 175:Drivers/STM32CubeL4_libs/Src/iot_flash_config.c **** 
 176:Drivers/STM32CubeL4_libs/Src/iot_flash_config.c **** /**
 177:Drivers/STM32CubeL4_libs/Src/iot_flash_config.c ****   * @brief  Write the C2C parameters to the Flash memory.
 178:Drivers/STM32CubeL4_libs/Src/iot_flash_config.c ****   * @retval Error code
 179:Drivers/STM32CubeL4_libs/Src/iot_flash_config.c ****   *             0    Success
 180:Drivers/STM32CubeL4_libs/Src/iot_flash_config.c ****   *             <0   Unrecoverable error
 181:Drivers/STM32CubeL4_libs/Src/iot_flash_config.c ****   */
 182:Drivers/STM32CubeL4_libs/Src/iot_flash_config.c **** int updateC2cCredentials(void)
 183:Drivers/STM32CubeL4_libs/Src/iot_flash_config.c **** {
 184:Drivers/STM32CubeL4_libs/Src/iot_flash_config.c ****   c2c_config_t c2c_config;
 185:Drivers/STM32CubeL4_libs/Src/iot_flash_config.c ****   int ret = 0;
 186:Drivers/STM32CubeL4_libs/Src/iot_flash_config.c **** 
 187:Drivers/STM32CubeL4_libs/Src/iot_flash_config.c ****   memset(&c2c_config, 0, sizeof(c2c_config_t));
 188:Drivers/STM32CubeL4_libs/Src/iot_flash_config.c **** 
 189:Drivers/STM32CubeL4_libs/Src/iot_flash_config.c **** #if 0  /* Build this code if you want the user to choose the SIM slot. By default, the external slo
 190:Drivers/STM32CubeL4_libs/Src/iot_flash_config.c ****   {
 191:Drivers/STM32CubeL4_libs/Src/iot_flash_config.c ****     char c;
 192:Drivers/STM32CubeL4_libs/Src/iot_flash_config.c ****     do
 193:Drivers/STM32CubeL4_libs/Src/iot_flash_config.c ****     {
 194:Drivers/STM32CubeL4_libs/Src/iot_flash_config.c ****         printf("\rSelect the SIM slot (0 - External, 1 - Internal): \b");
 195:Drivers/STM32CubeL4_libs/Src/iot_flash_config.c ****         c = getchar();
 196:Drivers/STM32CubeL4_libs/Src/iot_flash_config.c ****     }
 197:Drivers/STM32CubeL4_libs/Src/iot_flash_config.c ****     while ( (c < '0')  || (c > '1'));
 198:Drivers/STM32CubeL4_libs/Src/iot_flash_config.c ****     c2c_config.use_internal_sim = (bool) (c - '0');
 199:Drivers/STM32CubeL4_libs/Src/iot_flash_config.c ****     printf("\nYou have selected the %s SIM.\n", (c2c_config.use_internal_sim == true) ? "external" 
 200:Drivers/STM32CubeL4_libs/Src/iot_flash_config.c ****   }
 201:Drivers/STM32CubeL4_libs/Src/iot_flash_config.c **** #endif
 202:Drivers/STM32CubeL4_libs/Src/iot_flash_config.c ****   
 203:Drivers/STM32CubeL4_libs/Src/iot_flash_config.c ****   printf("\nEnter Sim Operator Access Point Code (e.g. EM or ESEYE1 etc): ");
 204:Drivers/STM32CubeL4_libs/Src/iot_flash_config.c ****   getInputString(c2c_config.oper_ap_code, USER_CONF_C2C_SOAPC_MAX_LENGTH);
ARM GAS  C:\cygwin64\tmp\ccR4YQzD.s 			page 8


 205:Drivers/STM32CubeL4_libs/Src/iot_flash_config.c ****   printf("You have entered <%s> as the Sim Operator Access Point Code.\n", c2c_config.oper_ap_code)
 206:Drivers/STM32CubeL4_libs/Src/iot_flash_config.c **** 
 207:Drivers/STM32CubeL4_libs/Src/iot_flash_config.c ****   printf("\nEnter the username (it can be NULL) (max 16 char):  ");
 208:Drivers/STM32CubeL4_libs/Src/iot_flash_config.c ****   getInputString(c2c_config.username, USER_CONF_C2C_USERID_MAX_LENGTH);
 209:Drivers/STM32CubeL4_libs/Src/iot_flash_config.c ****   printf("You have entered <%s> as the username.\n", c2c_config.username);
 210:Drivers/STM32CubeL4_libs/Src/iot_flash_config.c **** 
 211:Drivers/STM32CubeL4_libs/Src/iot_flash_config.c ****   printf("\nEnter the password (it can be NULL) (max 16 char):  ");
 212:Drivers/STM32CubeL4_libs/Src/iot_flash_config.c ****   getInputString(c2c_config.password, USER_CONF_C2C_PSW_MAX_LENGTH);
 213:Drivers/STM32CubeL4_libs/Src/iot_flash_config.c ****   printf("You have entered <%s> as the password.\n", c2c_config.password);
 214:Drivers/STM32CubeL4_libs/Src/iot_flash_config.c **** 
 215:Drivers/STM32CubeL4_libs/Src/iot_flash_config.c ****   c2c_config.magic = USER_CONF_MAGIC;
 216:Drivers/STM32CubeL4_libs/Src/iot_flash_config.c **** 
 217:Drivers/STM32CubeL4_libs/Src/iot_flash_config.c ****   ret = FLASH_update((uint32_t)&lUserConfigPtr->c2c_config, &c2c_config, sizeof(c2c_config_t));
 218:Drivers/STM32CubeL4_libs/Src/iot_flash_config.c **** 
 219:Drivers/STM32CubeL4_libs/Src/iot_flash_config.c ****   if (ret < 0)
 220:Drivers/STM32CubeL4_libs/Src/iot_flash_config.c ****   {
 221:Drivers/STM32CubeL4_libs/Src/iot_flash_config.c ****     msg_error("Failed updating the C2C configuration in Flash.\n");
 222:Drivers/STM32CubeL4_libs/Src/iot_flash_config.c ****   }
 223:Drivers/STM32CubeL4_libs/Src/iot_flash_config.c **** 
 224:Drivers/STM32CubeL4_libs/Src/iot_flash_config.c ****   msg_info("\n");
 225:Drivers/STM32CubeL4_libs/Src/iot_flash_config.c ****   return ret;
 226:Drivers/STM32CubeL4_libs/Src/iot_flash_config.c **** }
 227:Drivers/STM32CubeL4_libs/Src/iot_flash_config.c **** #endif /* USE_C2C */
 228:Drivers/STM32CubeL4_libs/Src/iot_flash_config.c **** 
 229:Drivers/STM32CubeL4_libs/Src/iot_flash_config.c **** #ifdef USE_WIFI
 230:Drivers/STM32CubeL4_libs/Src/iot_flash_config.c **** /**
 231:Drivers/STM32CubeL4_libs/Src/iot_flash_config.c ****   * @brief  Check whether the Wifi parameters are present in Flash memory.
 232:Drivers/STM32CubeL4_libs/Src/iot_flash_config.c ****   *         Returns the parameters if present.
 233:Drivers/STM32CubeL4_libs/Src/iot_flash_config.c ****   * @param  Out:  ssid              Wifi SSID.
 234:Drivers/STM32CubeL4_libs/Src/iot_flash_config.c ****   * @param  Out:  psk               Wifi security password.
 235:Drivers/STM32CubeL4_libs/Src/iot_flash_config.c ****   * @param  Out:  security_mode     See @ref wifi_network_security_t definition.
 236:Drivers/STM32CubeL4_libs/Src/iot_flash_config.c ****   * @retval   0 if the parameters are present in Flash.
 237:Drivers/STM32CubeL4_libs/Src/iot_flash_config.c ****   *          -1 if the parameters are not present in Flash.
 238:Drivers/STM32CubeL4_libs/Src/iot_flash_config.c ****   */
 239:Drivers/STM32CubeL4_libs/Src/iot_flash_config.c **** int checkWiFiCredentials(const char ** const ssid, const char ** const psk, uint8_t * const securit
 240:Drivers/STM32CubeL4_libs/Src/iot_flash_config.c **** {
 175              		.loc 1 240 1 is_stmt 1 view -0
 176              		.cfi_startproc
 177              		@ args = 0, pretend = 0, frame = 0
 178              		@ frame_needed = 0, uses_anonymous_args = 0
 179              		@ link register save eliminated.
 180              		.loc 1 240 1 is_stmt 0 view .LVU45
 181 0000 F0B4     		push	{r4, r5, r6, r7}
 182              	.LCFI1:
 183              		.cfi_def_cfa_offset 16
 184              		.cfi_offset 4, -16
 185              		.cfi_offset 5, -12
 186              		.cfi_offset 6, -8
 187              		.cfi_offset 7, -4
 241:Drivers/STM32CubeL4_libs/Src/iot_flash_config.c ****   bool is_ssid_present = 0;
 188              		.loc 1 241 3 is_stmt 1 view .LVU46
 189              	.LVL16:
 242:Drivers/STM32CubeL4_libs/Src/iot_flash_config.c **** 
 243:Drivers/STM32CubeL4_libs/Src/iot_flash_config.c ****   if (lUserConfigPtr->wifi_config.magic == USER_CONF_MAGIC)
 190              		.loc 1 243 3 view .LVU47
 191              		.loc 1 243 21 is_stmt 0 view .LVU48
 192 0002 154B     		ldr	r3, .L23+8
ARM GAS  C:\cygwin64\tmp\ccR4YQzD.s 			page 9


 193 0004 1B68     		ldr	r3, [r3]
 194              		.loc 1 243 34 view .LVU49
 195 0006 03F52053 		add	r3, r3, #10240
 196 000a D3E90067 		ldrd	r6, [r3]
 197              		.loc 1 243 6 view .LVU50
 198 000e 10A5     		adr	r5, .L23
 199 0010 D5E90045 		ldrd	r4, [r5]
 200 0014 AF42     		cmp	r7, r5
 201 0016 08BF     		it	eq
 202 0018 A642     		cmpeq	r6, r4
 203 001a 02D0     		beq	.L22
 244:Drivers/STM32CubeL4_libs/Src/iot_flash_config.c ****   {
 245:Drivers/STM32CubeL4_libs/Src/iot_flash_config.c ****     is_ssid_present = true;
 246:Drivers/STM32CubeL4_libs/Src/iot_flash_config.c ****     if ((ssid == NULL) ||(psk == NULL) || (security_mode == NULL))
 247:Drivers/STM32CubeL4_libs/Src/iot_flash_config.c ****     {
 248:Drivers/STM32CubeL4_libs/Src/iot_flash_config.c ****       return -2;
 249:Drivers/STM32CubeL4_libs/Src/iot_flash_config.c ****     }
 250:Drivers/STM32CubeL4_libs/Src/iot_flash_config.c **** //    *ssid = lUserConfigPtr->wifi_config.ssid;
 251:Drivers/STM32CubeL4_libs/Src/iot_flash_config.c **** //    *psk = lUserConfigPtr->wifi_config.psk;
 252:Drivers/STM32CubeL4_libs/Src/iot_flash_config.c **** //    *security_mode = lUserConfigPtr->wifi_config.security_mode;
 253:Drivers/STM32CubeL4_libs/Src/iot_flash_config.c ****     *ssid = "ind_study_pi";
 254:Drivers/STM32CubeL4_libs/Src/iot_flash_config.c ****     *psk = "lamp_password";
 255:Drivers/STM32CubeL4_libs/Src/iot_flash_config.c ****     *security_mode = 3;
 256:Drivers/STM32CubeL4_libs/Src/iot_flash_config.c ****   }
 257:Drivers/STM32CubeL4_libs/Src/iot_flash_config.c **** 
 258:Drivers/STM32CubeL4_libs/Src/iot_flash_config.c ****   //return (is_ssid_present) ? 0 : -1;
 259:Drivers/STM32CubeL4_libs/Src/iot_flash_config.c ****   return 0;
 204              		.loc 1 259 10 view .LVU51
 205 001c 0020     		movs	r0, #0
 206              	.LVL17:
 207              	.L15:
 260:Drivers/STM32CubeL4_libs/Src/iot_flash_config.c **** }
 208              		.loc 1 260 1 view .LVU52
 209 001e F0BC     		pop	{r4, r5, r6, r7}
 210              	.LCFI2:
 211              		.cfi_remember_state
 212              		.cfi_restore 7
 213              		.cfi_restore 6
 214              		.cfi_restore 5
 215              		.cfi_restore 4
 216              		.cfi_def_cfa_offset 0
 217 0020 7047     		bx	lr
 218              	.LVL18:
 219              	.L22:
 220              	.LCFI3:
 221              		.cfi_restore_state
 245:Drivers/STM32CubeL4_libs/Src/iot_flash_config.c ****     if ((ssid == NULL) ||(psk == NULL) || (security_mode == NULL))
 222              		.loc 1 245 5 is_stmt 1 view .LVU53
 246:Drivers/STM32CubeL4_libs/Src/iot_flash_config.c ****     {
 223              		.loc 1 246 5 view .LVU54
 246:Drivers/STM32CubeL4_libs/Src/iot_flash_config.c ****     {
 224              		.loc 1 246 8 is_stmt 0 view .LVU55
 225 0022 48B1     		cbz	r0, .L18
 246:Drivers/STM32CubeL4_libs/Src/iot_flash_config.c ****     {
 226              		.loc 1 246 24 discriminator 1 view .LVU56
 227 0024 59B1     		cbz	r1, .L19
 246:Drivers/STM32CubeL4_libs/Src/iot_flash_config.c ****     {
ARM GAS  C:\cygwin64\tmp\ccR4YQzD.s 			page 10


 228              		.loc 1 246 40 discriminator 2 view .LVU57
 229 0026 6AB1     		cbz	r2, .L20
 253:Drivers/STM32CubeL4_libs/Src/iot_flash_config.c ****     *psk = "lamp_password";
 230              		.loc 1 253 5 is_stmt 1 view .LVU58
 253:Drivers/STM32CubeL4_libs/Src/iot_flash_config.c ****     *psk = "lamp_password";
 231              		.loc 1 253 11 is_stmt 0 view .LVU59
 232 0028 0C4B     		ldr	r3, .L23+12
 233 002a 0360     		str	r3, [r0]
 254:Drivers/STM32CubeL4_libs/Src/iot_flash_config.c ****     *security_mode = 3;
 234              		.loc 1 254 5 is_stmt 1 view .LVU60
 254:Drivers/STM32CubeL4_libs/Src/iot_flash_config.c ****     *security_mode = 3;
 235              		.loc 1 254 10 is_stmt 0 view .LVU61
 236 002c 0C4B     		ldr	r3, .L23+16
 237 002e 0B60     		str	r3, [r1]
 255:Drivers/STM32CubeL4_libs/Src/iot_flash_config.c ****   }
 238              		.loc 1 255 5 is_stmt 1 view .LVU62
 255:Drivers/STM32CubeL4_libs/Src/iot_flash_config.c ****   }
 239              		.loc 1 255 20 is_stmt 0 view .LVU63
 240 0030 0323     		movs	r3, #3
 241 0032 1370     		strb	r3, [r2]
 259:Drivers/STM32CubeL4_libs/Src/iot_flash_config.c **** }
 242              		.loc 1 259 10 view .LVU64
 243 0034 0020     		movs	r0, #0
 244              	.LVL19:
 259:Drivers/STM32CubeL4_libs/Src/iot_flash_config.c **** }
 245              		.loc 1 259 10 view .LVU65
 246 0036 F2E7     		b	.L15
 247              	.LVL20:
 248              	.L18:
 248:Drivers/STM32CubeL4_libs/Src/iot_flash_config.c ****     }
 249              		.loc 1 248 14 view .LVU66
 250 0038 6FF00100 		mvn	r0, #1
 251              	.LVL21:
 248:Drivers/STM32CubeL4_libs/Src/iot_flash_config.c ****     }
 252              		.loc 1 248 14 view .LVU67
 253 003c EFE7     		b	.L15
 254              	.LVL22:
 255              	.L19:
 248:Drivers/STM32CubeL4_libs/Src/iot_flash_config.c ****     }
 256              		.loc 1 248 14 view .LVU68
 257 003e 6FF00100 		mvn	r0, #1
 258              	.LVL23:
 248:Drivers/STM32CubeL4_libs/Src/iot_flash_config.c ****     }
 259              		.loc 1 248 14 view .LVU69
 260 0042 ECE7     		b	.L15
 261              	.LVL24:
 262              	.L20:
 248:Drivers/STM32CubeL4_libs/Src/iot_flash_config.c ****     }
 263              		.loc 1 248 14 view .LVU70
 264 0044 6FF00100 		mvn	r0, #1
 265              	.LVL25:
 248:Drivers/STM32CubeL4_libs/Src/iot_flash_config.c ****     }
 266              		.loc 1 248 14 view .LVU71
 267 0048 E9E7     		b	.L15
 268              	.L24:
 269 004a 00BFAFF3 		.align	3
 269      0080
ARM GAS  C:\cygwin64\tmp\ccR4YQzD.s 			page 11


 270              	.L23:
 271 0050 EFCDAB89 		.word	-1985229329
 272 0054 67452301 		.word	19088743
 273 0058 00000000 		.word	.LANCHOR0
 274 005c 00000000 		.word	.LC1
 275 0060 10000000 		.word	.LC2
 276              		.cfi_endproc
 277              	.LFE319:
 279              		.section	.rodata.updateWiFiCredentials.str1.4,"aMS",%progbits,1
 280              		.align	2
 281              	.LC3:
 282 0000 0A456E74 		.ascii	"\012Enter SSID: \000"
 282      65722053 
 282      5349443A 
 282      2000
 283 000e 0000     		.align	2
 284              	.LC4:
 285 0010 0D456E74 		.ascii	"\015Enter Security Mode (0 - Open, 1 - WEP, 2 - WPA"
 285      65722053 
 285      65637572 
 285      69747920 
 285      4D6F6465 
 286 0040 2C203320 		.ascii	", 3 - WPA2): \010\000"
 286      2D205750 
 286      4132293A 
 286      200800
 287 004f 00       		.align	2
 288              	.LC5:
 289 0050 0A456E74 		.ascii	"\012Enter password: \000"
 289      65722070 
 289      61737377 
 289      6F72643A 
 289      2000
 290              		.section	.text.updateWiFiCredentials,"ax",%progbits
 291              		.align	1
 292              		.global	updateWiFiCredentials
 293              		.syntax unified
 294              		.thumb
 295              		.thumb_func
 296              		.fpu fpv4-sp-d16
 298              	updateWiFiCredentials:
 299              	.LFB320:
 261:Drivers/STM32CubeL4_libs/Src/iot_flash_config.c **** 
 262:Drivers/STM32CubeL4_libs/Src/iot_flash_config.c **** 
 263:Drivers/STM32CubeL4_libs/Src/iot_flash_config.c **** /**
 264:Drivers/STM32CubeL4_libs/Src/iot_flash_config.c ****   * @brief  Write the Wifi parameters to the Flash memory.
 265:Drivers/STM32CubeL4_libs/Src/iot_flash_config.c ****   * @retval Error code
 266:Drivers/STM32CubeL4_libs/Src/iot_flash_config.c ****   *             0    Success
 267:Drivers/STM32CubeL4_libs/Src/iot_flash_config.c ****   *             <0   Unrecoverable error
 268:Drivers/STM32CubeL4_libs/Src/iot_flash_config.c ****   */
 269:Drivers/STM32CubeL4_libs/Src/iot_flash_config.c **** int updateWiFiCredentials(void)
 270:Drivers/STM32CubeL4_libs/Src/iot_flash_config.c **** {
 300              		.loc 1 270 1 is_stmt 1 view -0
 301              		.cfi_startproc
 302              		@ args = 0, pretend = 0, frame = 112
 303              		@ frame_needed = 0, uses_anonymous_args = 0
 304 0000 10B5     		push	{r4, lr}
ARM GAS  C:\cygwin64\tmp\ccR4YQzD.s 			page 12


 305              	.LCFI4:
 306              		.cfi_def_cfa_offset 8
 307              		.cfi_offset 4, -8
 308              		.cfi_offset 14, -4
 309 0002 9CB0     		sub	sp, sp, #112
 310              	.LCFI5:
 311              		.cfi_def_cfa_offset 120
 271:Drivers/STM32CubeL4_libs/Src/iot_flash_config.c ****   wifi_config_t wifi_config;
 312              		.loc 1 271 3 view .LVU73
 272:Drivers/STM32CubeL4_libs/Src/iot_flash_config.c ****   int ret = 0;
 313              		.loc 1 272 3 view .LVU74
 314              	.LVL26:
 273:Drivers/STM32CubeL4_libs/Src/iot_flash_config.c **** 
 274:Drivers/STM32CubeL4_libs/Src/iot_flash_config.c ****   memset(&wifi_config, 0, sizeof(wifi_config_t));
 315              		.loc 1 274 3 view .LVU75
 316 0004 7022     		movs	r2, #112
 317 0006 0021     		movs	r1, #0
 318 0008 6846     		mov	r0, sp
 319 000a FFF7FEFF 		bl	memset
 320              	.LVL27:
 275:Drivers/STM32CubeL4_libs/Src/iot_flash_config.c **** 
 276:Drivers/STM32CubeL4_libs/Src/iot_flash_config.c ****   printf("\nEnter SSID: ");
 321              		.loc 1 276 3 view .LVU76
 322 000e 1C48     		ldr	r0, .L30+8
 323 0010 FFF7FEFF 		bl	printf
 324              	.LVL28:
 277:Drivers/STM32CubeL4_libs/Src/iot_flash_config.c **** 
 278:Drivers/STM32CubeL4_libs/Src/iot_flash_config.c ****   getInputString(wifi_config.ssid, USER_CONF_WIFI_SSID_MAX_LENGTH);
 325              		.loc 1 278 3 view .LVU77
 326 0014 2021     		movs	r1, #32
 327 0016 02A8     		add	r0, sp, #8
 328 0018 FFF7FEFF 		bl	getInputString
 329              	.LVL29:
 279:Drivers/STM32CubeL4_libs/Src/iot_flash_config.c ****   msg_info("You have entered %s as the ssid.\n", wifi_config.ssid);
 330              		.loc 1 279 67 view .LVU78
 280:Drivers/STM32CubeL4_libs/Src/iot_flash_config.c **** 
 281:Drivers/STM32CubeL4_libs/Src/iot_flash_config.c ****   printf("\n");
 331              		.loc 1 281 3 view .LVU79
 332 001c 0A20     		movs	r0, #10
 333 001e FFF7FEFF 		bl	putchar
 334              	.LVL30:
 335              	.L26:
 282:Drivers/STM32CubeL4_libs/Src/iot_flash_config.c ****   char c;
 336              		.loc 1 282 3 discriminator 1 view .LVU80
 283:Drivers/STM32CubeL4_libs/Src/iot_flash_config.c ****   do
 337              		.loc 1 283 3 discriminator 1 view .LVU81
 284:Drivers/STM32CubeL4_libs/Src/iot_flash_config.c ****   {
 285:Drivers/STM32CubeL4_libs/Src/iot_flash_config.c ****       printf("\rEnter Security Mode (0 - Open, 1 - WEP, 2 - WPA, 3 - WPA2): \b");
 338              		.loc 1 285 7 discriminator 1 view .LVU82
 339 0022 1848     		ldr	r0, .L30+12
 340 0024 FFF7FEFF 		bl	printf
 341              	.LVL31:
 286:Drivers/STM32CubeL4_libs/Src/iot_flash_config.c ****       c = getchar();
 342              		.loc 1 286 7 discriminator 1 view .LVU83
 343              		.loc 1 286 11 is_stmt 0 discriminator 1 view .LVU84
 344 0028 FFF7FEFF 		bl	getchar
 345              	.LVL32:
ARM GAS  C:\cygwin64\tmp\ccR4YQzD.s 			page 13


 346              		.loc 1 286 9 discriminator 1 view .LVU85
 347 002c C0B2     		uxtb	r0, r0
 348              	.LVL33:
 287:Drivers/STM32CubeL4_libs/Src/iot_flash_config.c ****   }
 288:Drivers/STM32CubeL4_libs/Src/iot_flash_config.c ****   while ( (c < '0')  || (c > '3'));
 349              		.loc 1 288 9 is_stmt 1 discriminator 1 view .LVU86
 350              		.loc 1 288 22 is_stmt 0 discriminator 1 view .LVU87
 351 002e 3038     		subs	r0, r0, #48
 352              	.LVL34:
 353              		.loc 1 288 22 discriminator 1 view .LVU88
 354 0030 C0B2     		uxtb	r0, r0
 355              	.LVL35:
 356              		.loc 1 288 3 discriminator 1 view .LVU89
 357 0032 0328     		cmp	r0, #3
 358 0034 F5D8     		bhi	.L26
 289:Drivers/STM32CubeL4_libs/Src/iot_flash_config.c ****   wifi_config.security_mode = c - '0';
 359              		.loc 1 289 3 is_stmt 1 view .LVU90
 360              		.loc 1 289 29 is_stmt 0 view .LVU91
 361 0036 8DF86800 		strb	r0, [sp, #104]
 290:Drivers/STM32CubeL4_libs/Src/iot_flash_config.c ****   msg_info("\nYou have entered %d as the security mode.\n", wifi_config.security_mode);
 362              		.loc 1 290 87 is_stmt 1 view .LVU92
 291:Drivers/STM32CubeL4_libs/Src/iot_flash_config.c **** 
 292:Drivers/STM32CubeL4_libs/Src/iot_flash_config.c ****   if (wifi_config.security_mode != 0)
 363              		.loc 1 292 3 view .LVU93
 364              		.loc 1 292 6 is_stmt 0 view .LVU94
 365 003a 98B9     		cbnz	r0, .L29
 366              	.L27:
 293:Drivers/STM32CubeL4_libs/Src/iot_flash_config.c ****   {
 294:Drivers/STM32CubeL4_libs/Src/iot_flash_config.c ****     printf("\nEnter password: ");
 295:Drivers/STM32CubeL4_libs/Src/iot_flash_config.c ****     getInputString(wifi_config.psk, sizeof(wifi_config.psk));
 296:Drivers/STM32CubeL4_libs/Src/iot_flash_config.c ****   }
 297:Drivers/STM32CubeL4_libs/Src/iot_flash_config.c **** 
 298:Drivers/STM32CubeL4_libs/Src/iot_flash_config.c ****   wifi_config.magic = USER_CONF_MAGIC;
 367              		.loc 1 298 3 is_stmt 1 view .LVU95
 368              		.loc 1 298 21 is_stmt 0 view .LVU96
 369 003c 0EA3     		adr	r3, .L30
 370 003e D3E90023 		ldrd	r2, [r3]
 371 0042 CDE90023 		strd	r2, [sp]
 299:Drivers/STM32CubeL4_libs/Src/iot_flash_config.c **** 
 300:Drivers/STM32CubeL4_libs/Src/iot_flash_config.c ****   ret = FLASH_update((uint32_t)&lUserConfigPtr->wifi_config, &wifi_config, sizeof(wifi_config_t));
 372              		.loc 1 300 3 is_stmt 1 view .LVU97
 373              		.loc 1 300 47 is_stmt 0 view .LVU98
 374 0046 104B     		ldr	r3, .L30+16
 375 0048 1868     		ldr	r0, [r3]
 376              		.loc 1 300 9 view .LVU99
 377 004a 7022     		movs	r2, #112
 378 004c 6946     		mov	r1, sp
 379 004e 00F52050 		add	r0, r0, #10240
 380 0052 FFF7FEFF 		bl	FLASH_update
 381              	.LVL36:
 382 0056 0446     		mov	r4, r0
 383              	.LVL37:
 301:Drivers/STM32CubeL4_libs/Src/iot_flash_config.c **** 
 302:Drivers/STM32CubeL4_libs/Src/iot_flash_config.c ****   if (ret < 0)
 384              		.loc 1 302 3 is_stmt 1 view .LVU100
 303:Drivers/STM32CubeL4_libs/Src/iot_flash_config.c ****   {
 304:Drivers/STM32CubeL4_libs/Src/iot_flash_config.c ****     msg_error("Failed updating the wifi configuration in Flash.\n");
ARM GAS  C:\cygwin64\tmp\ccR4YQzD.s 			page 14


 385              		.loc 1 304 68 view .LVU101
 305:Drivers/STM32CubeL4_libs/Src/iot_flash_config.c ****   }
 306:Drivers/STM32CubeL4_libs/Src/iot_flash_config.c **** 
 307:Drivers/STM32CubeL4_libs/Src/iot_flash_config.c ****   printf("\n");
 386              		.loc 1 307 3 view .LVU102
 387 0058 0A20     		movs	r0, #10
 388              	.LVL38:
 389              		.loc 1 307 3 is_stmt 0 view .LVU103
 390 005a FFF7FEFF 		bl	putchar
 391              	.LVL39:
 308:Drivers/STM32CubeL4_libs/Src/iot_flash_config.c ****   return ret;
 392              		.loc 1 308 3 is_stmt 1 view .LVU104
 309:Drivers/STM32CubeL4_libs/Src/iot_flash_config.c **** }
 393              		.loc 1 309 1 is_stmt 0 view .LVU105
 394 005e 2046     		mov	r0, r4
 395 0060 1CB0     		add	sp, sp, #112
 396              	.LCFI6:
 397              		.cfi_remember_state
 398              		.cfi_def_cfa_offset 8
 399              		@ sp needed
 400 0062 10BD     		pop	{r4, pc}
 401              	.LVL40:
 402              	.L29:
 403              	.LCFI7:
 404              		.cfi_restore_state
 294:Drivers/STM32CubeL4_libs/Src/iot_flash_config.c ****     getInputString(wifi_config.psk, sizeof(wifi_config.psk));
 405              		.loc 1 294 5 is_stmt 1 view .LVU106
 406 0064 0948     		ldr	r0, .L30+20
 407 0066 FFF7FEFF 		bl	printf
 408              	.LVL41:
 295:Drivers/STM32CubeL4_libs/Src/iot_flash_config.c ****   }
 409              		.loc 1 295 5 view .LVU107
 410 006a 4021     		movs	r1, #64
 411 006c 0AA8     		add	r0, sp, #40
 412 006e FFF7FEFF 		bl	getInputString
 413              	.LVL42:
 414 0072 E3E7     		b	.L27
 415              	.L31:
 416 0074 AFF30080 		.align	3
 417              	.L30:
 418 0078 EFCDAB89 		.word	-1985229329
 419 007c 67452301 		.word	19088743
 420 0080 00000000 		.word	.LC3
 421 0084 10000000 		.word	.LC4
 422 0088 00000000 		.word	.LANCHOR0
 423 008c 50000000 		.word	.LC5
 424              		.cfi_endproc
 425              	.LFE320:
 427              		.section	.rodata.enterPemString.str1.4,"aMS",%progbits,1
 428              		.align	2
 429              	.LC6:
 430 0000 2D2D2D2D 		.ascii	"-----END\000"
 430      2D454E44 
 430      00
 431              		.section	.text.enterPemString,"ax",%progbits
 432              		.align	1
 433              		.global	enterPemString
ARM GAS  C:\cygwin64\tmp\ccR4YQzD.s 			page 15


 434              		.syntax unified
 435              		.thumb
 436              		.thumb_func
 437              		.fpu fpv4-sp-d16
 439              	enterPemString:
 440              	.LVL43:
 441              	.LFB321:
 310:Drivers/STM32CubeL4_libs/Src/iot_flash_config.c **** #endif /* USE_WIFI */
 311:Drivers/STM32CubeL4_libs/Src/iot_flash_config.c **** 
 312:Drivers/STM32CubeL4_libs/Src/iot_flash_config.c **** 
 313:Drivers/STM32CubeL4_libs/Src/iot_flash_config.c **** /**
 314:Drivers/STM32CubeL4_libs/Src/iot_flash_config.c ****   * @brief  Get one PEM string (ASCII format of TLS certificates and keys) from the console (user i
 315:Drivers/STM32CubeL4_libs/Src/iot_flash_config.c ****   * @param  Out: key_read_buffer    Destination buffer.
 316:Drivers/STM32CubeL4_libs/Src/iot_flash_config.c ****   * @param  In:  max_len            Maximum length to be written to the destination buffer.
 317:Drivers/STM32CubeL4_libs/Src/iot_flash_config.c ****   * @retval Number of characters read into the output buffer.
 318:Drivers/STM32CubeL4_libs/Src/iot_flash_config.c ****   */
 319:Drivers/STM32CubeL4_libs/Src/iot_flash_config.c **** int enterPemString(char * read_buffer, size_t max_len)
 320:Drivers/STM32CubeL4_libs/Src/iot_flash_config.c **** {
 442              		.loc 1 320 1 view -0
 443              		.cfi_startproc
 444              		@ args = 0, pretend = 0, frame = 0
 445              		@ frame_needed = 0, uses_anonymous_args = 0
 446              		.loc 1 320 1 is_stmt 0 view .LVU109
 447 0000 2DE9F843 		push	{r3, r4, r5, r6, r7, r8, r9, lr}
 448              	.LCFI8:
 449              		.cfi_def_cfa_offset 32
 450              		.cfi_offset 3, -32
 451              		.cfi_offset 4, -28
 452              		.cfi_offset 5, -24
 453              		.cfi_offset 6, -20
 454              		.cfi_offset 7, -16
 455              		.cfi_offset 8, -12
 456              		.cfi_offset 9, -8
 457              		.cfi_offset 14, -4
 458 0004 0746     		mov	r7, r0
 459 0006 8846     		mov	r8, r1
 321:Drivers/STM32CubeL4_libs/Src/iot_flash_config.c ****   int i = 0;
 460              		.loc 1 321 3 is_stmt 1 view .LVU110
 461              	.LVL44:
 322:Drivers/STM32CubeL4_libs/Src/iot_flash_config.c ****   int read_len = 0;
 462              		.loc 1 322 3 view .LVU111
 323:Drivers/STM32CubeL4_libs/Src/iot_flash_config.c ****   bool eof = false;
 463              		.loc 1 323 3 view .LVU112
 324:Drivers/STM32CubeL4_libs/Src/iot_flash_config.c ****   read_len = getInputString(&read_buffer[i], max_len);
 464              		.loc 1 324 3 view .LVU113
 465              		.loc 1 324 14 is_stmt 0 view .LVU114
 466 0008 FFF7FEFF 		bl	getInputString
 467              	.LVL45:
 468              		.loc 1 324 14 view .LVU115
 469 000c 0446     		mov	r4, r0
 470              	.LVL46:
 325:Drivers/STM32CubeL4_libs/Src/iot_flash_config.c **** 
 326:Drivers/STM32CubeL4_libs/Src/iot_flash_config.c ****   while ( (read_len >= 0) && (i < max_len) && !eof )
 471              		.loc 1 326 3 is_stmt 1 view .LVU116
 323:Drivers/STM32CubeL4_libs/Src/iot_flash_config.c ****   read_len = getInputString(&read_buffer[i], max_len);
 472              		.loc 1 323 8 is_stmt 0 view .LVU117
 473 000e 4FF00009 		mov	r9, #0
ARM GAS  C:\cygwin64\tmp\ccR4YQzD.s 			page 16


 321:Drivers/STM32CubeL4_libs/Src/iot_flash_config.c ****   int read_len = 0;
 474              		.loc 1 321 7 view .LVU118
 475 0012 4E46     		mov	r6, r9
 476              		.loc 1 326 9 view .LVU119
 477 0014 00E0     		b	.L33
 478              	.LVL47:
 479              	.L34:
 327:Drivers/STM32CubeL4_libs/Src/iot_flash_config.c ****   {
 328:Drivers/STM32CubeL4_libs/Src/iot_flash_config.c ****     i += read_len;
 329:Drivers/STM32CubeL4_libs/Src/iot_flash_config.c ****     read_buffer[i++] = '\n';
 330:Drivers/STM32CubeL4_libs/Src/iot_flash_config.c ****     read_len = getInputString(&read_buffer[i], max_len);
 331:Drivers/STM32CubeL4_libs/Src/iot_flash_config.c ****     eof = (strncmp(&read_buffer[i], "-----END",8) == 0);
 332:Drivers/STM32CubeL4_libs/Src/iot_flash_config.c ****     if (eof)
 333:Drivers/STM32CubeL4_libs/Src/iot_flash_config.c ****     {
 334:Drivers/STM32CubeL4_libs/Src/iot_flash_config.c ****         i += read_len;
 335:Drivers/STM32CubeL4_libs/Src/iot_flash_config.c ****         read_buffer[i++] = '\n';
 336:Drivers/STM32CubeL4_libs/Src/iot_flash_config.c ****         read_len = getInputString(&read_buffer[i], max_len);
 337:Drivers/STM32CubeL4_libs/Src/iot_flash_config.c ****         if (read_len != 0) eof =false;
 480              		.loc 1 337 32 view .LVU120
 481 0016 A946     		mov	r9, r5
 482              	.LVL48:
 483              	.L33:
 326:Drivers/STM32CubeL4_libs/Src/iot_flash_config.c ****   {
 484              		.loc 1 326 9 is_stmt 1 view .LVU121
 485 0018 002C     		cmp	r4, #0
 486 001a 25DB     		blt	.L35
 326:Drivers/STM32CubeL4_libs/Src/iot_flash_config.c ****   {
 487              		.loc 1 326 27 is_stmt 0 discriminator 1 view .LVU122
 488 001c 4645     		cmp	r6, r8
 489 001e 23D2     		bcs	.L35
 326:Drivers/STM32CubeL4_libs/Src/iot_flash_config.c ****   {
 490              		.loc 1 326 44 discriminator 2 view .LVU123
 491 0020 B9F1000F 		cmp	r9, #0
 492 0024 20D1     		bne	.L35
 328:Drivers/STM32CubeL4_libs/Src/iot_flash_config.c ****     read_buffer[i++] = '\n';
 493              		.loc 1 328 5 is_stmt 1 view .LVU124
 328:Drivers/STM32CubeL4_libs/Src/iot_flash_config.c ****     read_buffer[i++] = '\n';
 494              		.loc 1 328 7 is_stmt 0 view .LVU125
 495 0026 3444     		add	r4, r4, r6
 496              	.LVL49:
 329:Drivers/STM32CubeL4_libs/Src/iot_flash_config.c ****     read_len = getInputString(&read_buffer[i], max_len);
 497              		.loc 1 329 5 is_stmt 1 view .LVU126
 329:Drivers/STM32CubeL4_libs/Src/iot_flash_config.c ****     read_len = getInputString(&read_buffer[i], max_len);
 498              		.loc 1 329 18 is_stmt 0 view .LVU127
 499 0028 661C     		adds	r6, r4, #1
 500              	.LVL50:
 329:Drivers/STM32CubeL4_libs/Src/iot_flash_config.c ****     read_len = getInputString(&read_buffer[i], max_len);
 501              		.loc 1 329 22 view .LVU128
 502 002a 0A23     		movs	r3, #10
 503 002c 3B55     		strb	r3, [r7, r4]
 330:Drivers/STM32CubeL4_libs/Src/iot_flash_config.c ****     eof = (strncmp(&read_buffer[i], "-----END",8) == 0);
 504              		.loc 1 330 5 is_stmt 1 view .LVU129
 330:Drivers/STM32CubeL4_libs/Src/iot_flash_config.c ****     eof = (strncmp(&read_buffer[i], "-----END",8) == 0);
 505              		.loc 1 330 16 is_stmt 0 view .LVU130
 506 002e BD19     		adds	r5, r7, r6
 507 0030 4146     		mov	r1, r8
 508 0032 2846     		mov	r0, r5
ARM GAS  C:\cygwin64\tmp\ccR4YQzD.s 			page 17


 509 0034 FFF7FEFF 		bl	getInputString
 510              	.LVL51:
 511 0038 0446     		mov	r4, r0
 512              	.LVL52:
 331:Drivers/STM32CubeL4_libs/Src/iot_flash_config.c ****     if (eof)
 513              		.loc 1 331 5 is_stmt 1 view .LVU131
 331:Drivers/STM32CubeL4_libs/Src/iot_flash_config.c ****     if (eof)
 514              		.loc 1 331 12 is_stmt 0 view .LVU132
 515 003a 0822     		movs	r2, #8
 516 003c 0F49     		ldr	r1, .L41
 517 003e 2846     		mov	r0, r5
 518              	.LVL53:
 331:Drivers/STM32CubeL4_libs/Src/iot_flash_config.c ****     if (eof)
 519              		.loc 1 331 12 view .LVU133
 520 0040 FFF7FEFF 		bl	strncmp
 521              	.LVL54:
 331:Drivers/STM32CubeL4_libs/Src/iot_flash_config.c ****     if (eof)
 522              		.loc 1 331 9 view .LVU134
 523 0044 0028     		cmp	r0, #0
 524 0046 0CBF     		ite	eq
 525 0048 0125     		moveq	r5, #1
 526 004a 0025     		movne	r5, #0
 527              	.LVL55:
 332:Drivers/STM32CubeL4_libs/Src/iot_flash_config.c ****     {
 528              		.loc 1 332 5 is_stmt 1 view .LVU135
 332:Drivers/STM32CubeL4_libs/Src/iot_flash_config.c ****     {
 529              		.loc 1 332 8 is_stmt 0 view .LVU136
 530 004c E3D1     		bne	.L34
 334:Drivers/STM32CubeL4_libs/Src/iot_flash_config.c ****         read_buffer[i++] = '\n';
 531              		.loc 1 334 9 is_stmt 1 view .LVU137
 334:Drivers/STM32CubeL4_libs/Src/iot_flash_config.c ****         read_buffer[i++] = '\n';
 532              		.loc 1 334 11 is_stmt 0 view .LVU138
 533 004e 3444     		add	r4, r4, r6
 534              	.LVL56:
 335:Drivers/STM32CubeL4_libs/Src/iot_flash_config.c ****         read_len = getInputString(&read_buffer[i], max_len);
 535              		.loc 1 335 9 is_stmt 1 view .LVU139
 335:Drivers/STM32CubeL4_libs/Src/iot_flash_config.c ****         read_len = getInputString(&read_buffer[i], max_len);
 536              		.loc 1 335 22 is_stmt 0 view .LVU140
 537 0050 661C     		adds	r6, r4, #1
 538              	.LVL57:
 335:Drivers/STM32CubeL4_libs/Src/iot_flash_config.c ****         read_len = getInputString(&read_buffer[i], max_len);
 539              		.loc 1 335 26 view .LVU141
 540 0052 0A23     		movs	r3, #10
 541 0054 3B55     		strb	r3, [r7, r4]
 336:Drivers/STM32CubeL4_libs/Src/iot_flash_config.c ****         if (read_len != 0) eof =false;
 542              		.loc 1 336 9 is_stmt 1 view .LVU142
 336:Drivers/STM32CubeL4_libs/Src/iot_flash_config.c ****         if (read_len != 0) eof =false;
 543              		.loc 1 336 20 is_stmt 0 view .LVU143
 544 0056 4146     		mov	r1, r8
 545 0058 B819     		adds	r0, r7, r6
 546 005a FFF7FEFF 		bl	getInputString
 547              	.LVL58:
 548              		.loc 1 337 9 is_stmt 1 view .LVU144
 549              		.loc 1 337 12 is_stmt 0 view .LVU145
 550 005e 0446     		mov	r4, r0
 551 0060 0028     		cmp	r0, #0
 552 0062 D8D0     		beq	.L34
ARM GAS  C:\cygwin64\tmp\ccR4YQzD.s 			page 18


 553              		.loc 1 337 32 view .LVU146
 554 0064 4D46     		mov	r5, r9
 555              	.LVL59:
 556              		.loc 1 337 32 view .LVU147
 557 0066 D6E7     		b	.L34
 558              	.LVL60:
 559              	.L35:
 338:Drivers/STM32CubeL4_libs/Src/iot_flash_config.c ****     }
 339:Drivers/STM32CubeL4_libs/Src/iot_flash_config.c ****   }
 340:Drivers/STM32CubeL4_libs/Src/iot_flash_config.c **** 
 341:Drivers/STM32CubeL4_libs/Src/iot_flash_config.c ****   if (i >= max_len)
 560              		.loc 1 341 3 is_stmt 1 view .LVU148
 561              		.loc 1 341 6 is_stmt 0 view .LVU149
 562 0068 4645     		cmp	r6, r8
 563 006a 04D2     		bcs	.L39
 342:Drivers/STM32CubeL4_libs/Src/iot_flash_config.c ****   {
 343:Drivers/STM32CubeL4_libs/Src/iot_flash_config.c ****    msg_error("Certificate is too long , allocated size is %d\n",max_len);
 344:Drivers/STM32CubeL4_libs/Src/iot_flash_config.c ****    return 0;
 345:Drivers/STM32CubeL4_libs/Src/iot_flash_config.c ****   }
 346:Drivers/STM32CubeL4_libs/Src/iot_flash_config.c ****   read_buffer[++i] = '\0';
 564              		.loc 1 346 3 is_stmt 1 view .LVU150
 565              		.loc 1 346 20 is_stmt 0 view .LVU151
 566 006c 701C     		adds	r0, r6, #1
 567              	.LVL61:
 568              		.loc 1 346 20 view .LVU152
 569 006e 0023     		movs	r3, #0
 570 0070 3B54     		strb	r3, [r7, r0]
 347:Drivers/STM32CubeL4_libs/Src/iot_flash_config.c ****   return i;
 571              		.loc 1 347 3 is_stmt 1 view .LVU153
 572              	.LVL62:
 573              	.L32:
 348:Drivers/STM32CubeL4_libs/Src/iot_flash_config.c **** }
 574              		.loc 1 348 1 is_stmt 0 view .LVU154
 575 0072 BDE8F883 		pop	{r3, r4, r5, r6, r7, r8, r9, pc}
 576              	.LVL63:
 577              	.L39:
 344:Drivers/STM32CubeL4_libs/Src/iot_flash_config.c ****   }
 578              		.loc 1 344 11 view .LVU155
 579 0076 0020     		movs	r0, #0
 580 0078 FBE7     		b	.L32
 581              	.L42:
 582 007a 00BF     		.align	2
 583              	.L41:
 584 007c 00000000 		.word	.LC6
 585              		.cfi_endproc
 586              	.LFE321:
 588              		.section	.rodata.CaptureAndFlashPem.str1.4,"aMS",%progbits,1
 589              		.align	2
 590              	.LC7:
 591 0000 0A456E74 		.ascii	"\012Enter your %s: \012\000"
 591      65722079 
 591      6F757220 
 591      25733A20 
 591      0A00
 592              		.section	.text.CaptureAndFlashPem,"ax",%progbits
 593              		.align	1
 594              		.global	CaptureAndFlashPem
ARM GAS  C:\cygwin64\tmp\ccR4YQzD.s 			page 19


 595              		.syntax unified
 596              		.thumb
 597              		.thumb_func
 598              		.fpu fpv4-sp-d16
 600              	CaptureAndFlashPem:
 601              	.LVL64:
 602              	.LFB322:
 349:Drivers/STM32CubeL4_libs/Src/iot_flash_config.c **** 
 350:Drivers/STM32CubeL4_libs/Src/iot_flash_config.c **** 
 351:Drivers/STM32CubeL4_libs/Src/iot_flash_config.c **** /**
 352:Drivers/STM32CubeL4_libs/Src/iot_flash_config.c ****   * @brief  Ask user and write the TLS certificates and key to the Flash memory.
 353:Drivers/STM32CubeL4_libs/Src/iot_flash_config.c ****   * @param  none
 354:Drivers/STM32CubeL4_libs/Src/iot_flash_config.c ****   * @retval Error code
 355:Drivers/STM32CubeL4_libs/Src/iot_flash_config.c ****   *             0    Success
 356:Drivers/STM32CubeL4_libs/Src/iot_flash_config.c ****   *             <0   Unrecoverable error
 357:Drivers/STM32CubeL4_libs/Src/iot_flash_config.c ****   */
 358:Drivers/STM32CubeL4_libs/Src/iot_flash_config.c **** 
 359:Drivers/STM32CubeL4_libs/Src/iot_flash_config.c ****  int CaptureAndFlashPem(char *pem_name, char const *flash_addr, bool restricted_area)
 360:Drivers/STM32CubeL4_libs/Src/iot_flash_config.c ****  {
 603              		.loc 1 360 2 is_stmt 1 view -0
 604              		.cfi_startproc
 605              		@ args = 0, pretend = 0, frame = 0
 606              		@ frame_needed = 0, uses_anonymous_args = 0
 607              		.loc 1 360 2 is_stmt 0 view .LVU157
 608 0000 F8B5     		push	{r3, r4, r5, r6, r7, lr}
 609              	.LCFI9:
 610              		.cfi_def_cfa_offset 24
 611              		.cfi_offset 3, -24
 612              		.cfi_offset 4, -20
 613              		.cfi_offset 5, -16
 614              		.cfi_offset 6, -12
 615              		.cfi_offset 7, -8
 616              		.cfi_offset 14, -4
 617 0002 0646     		mov	r6, r0
 618 0004 0D46     		mov	r5, r1
 361:Drivers/STM32CubeL4_libs/Src/iot_flash_config.c ****   char * key_read_buffer = NULL;
 619              		.loc 1 361 3 is_stmt 1 view .LVU158
 620              	.LVL65:
 362:Drivers/STM32CubeL4_libs/Src/iot_flash_config.c ****   int    ret = 0;
 621              		.loc 1 362 3 view .LVU159
 363:Drivers/STM32CubeL4_libs/Src/iot_flash_config.c ****   key_read_buffer = malloc(PEM_READ_BUFFER_SIZE);
 622              		.loc 1 363 3 view .LVU160
 623              		.loc 1 363 21 is_stmt 0 view .LVU161
 624 0006 4FF40050 		mov	r0, #8192
 625              	.LVL66:
 626              		.loc 1 363 21 view .LVU162
 627 000a FFF7FEFF 		bl	malloc
 628              	.LVL67:
 364:Drivers/STM32CubeL4_libs/Src/iot_flash_config.c ****   if (key_read_buffer == NULL)
 629              		.loc 1 364 3 is_stmt 1 view .LVU163
 630              		.loc 1 364 6 is_stmt 0 view .LVU164
 631 000e E0B1     		cbz	r0, .L45
 632 0010 0446     		mov	r4, r0
 365:Drivers/STM32CubeL4_libs/Src/iot_flash_config.c ****   {
 366:Drivers/STM32CubeL4_libs/Src/iot_flash_config.c ****     msg_error("Could not allocate %d bytes for the console readbuffer.\n", PEM_READ_BUFFER_SIZE);
 367:Drivers/STM32CubeL4_libs/Src/iot_flash_config.c ****     return -1;
 368:Drivers/STM32CubeL4_libs/Src/iot_flash_config.c ****   }
ARM GAS  C:\cygwin64\tmp\ccR4YQzD.s 			page 20


 369:Drivers/STM32CubeL4_libs/Src/iot_flash_config.c **** 
 370:Drivers/STM32CubeL4_libs/Src/iot_flash_config.c ****   memset(key_read_buffer, 0, PEM_READ_BUFFER_SIZE);
 633              		.loc 1 370 3 is_stmt 1 view .LVU165
 634 0012 4FF40057 		mov	r7, #8192
 635 0016 3A46     		mov	r2, r7
 636 0018 0021     		movs	r1, #0
 637 001a FFF7FEFF 		bl	memset
 638              	.LVL68:
 371:Drivers/STM32CubeL4_libs/Src/iot_flash_config.c ****   printf("\nEnter your %s: \n",pem_name);
 639              		.loc 1 371 3 view .LVU166
 640 001e 3146     		mov	r1, r6
 641 0020 0B48     		ldr	r0, .L47
 642 0022 FFF7FEFF 		bl	printf
 643              	.LVL69:
 372:Drivers/STM32CubeL4_libs/Src/iot_flash_config.c ****   enterPemString(key_read_buffer, PEM_READ_BUFFER_SIZE);
 644              		.loc 1 372 3 view .LVU167
 645 0026 3946     		mov	r1, r7
 646 0028 2046     		mov	r0, r4
 647 002a FFF7FEFF 		bl	enterPemString
 648              	.LVL70:
 373:Drivers/STM32CubeL4_libs/Src/iot_flash_config.c **** 
 374:Drivers/STM32CubeL4_libs/Src/iot_flash_config.c ****   msg_info("read: --->\n%s\n<---\n", key_read_buffer);
 649              		.loc 1 374 54 view .LVU168
 375:Drivers/STM32CubeL4_libs/Src/iot_flash_config.c **** 
 376:Drivers/STM32CubeL4_libs/Src/iot_flash_config.c ****   /* Write to Flash. */
 377:Drivers/STM32CubeL4_libs/Src/iot_flash_config.c ****   TRACE_FLASH("writing to %lx\n", flash_addr);
 650              		.loc 1 377 46 view .LVU169
 378:Drivers/STM32CubeL4_libs/Src/iot_flash_config.c **** 
 379:Drivers/STM32CubeL4_libs/Src/iot_flash_config.c **** #ifdef FIREWALL_MBEDLIB
 380:Drivers/STM32CubeL4_libs/Src/iot_flash_config.c ****   if (restricted_area)
 381:Drivers/STM32CubeL4_libs/Src/iot_flash_config.c ****   {
 382:Drivers/STM32CubeL4_libs/Src/iot_flash_config.c ****     ret = FLASH_firewall_update((uint32_t)flash_addr, key_read_buffer, strlen(key_read_buffer) + 1)
 383:Drivers/STM32CubeL4_libs/Src/iot_flash_config.c ****   }
 384:Drivers/STM32CubeL4_libs/Src/iot_flash_config.c ****   else
 385:Drivers/STM32CubeL4_libs/Src/iot_flash_config.c **** #endif
 386:Drivers/STM32CubeL4_libs/Src/iot_flash_config.c ****   {
 387:Drivers/STM32CubeL4_libs/Src/iot_flash_config.c ****     ret = FLASH_update((uint32_t)flash_addr, key_read_buffer, strlen(key_read_buffer) + 1);  /* App
 651              		.loc 1 387 5 view .LVU170
 652              		.loc 1 387 63 is_stmt 0 view .LVU171
 653 002e 2046     		mov	r0, r4
 654 0030 FFF7FEFF 		bl	strlen
 655              	.LVL71:
 656              		.loc 1 387 11 view .LVU172
 657 0034 421C     		adds	r2, r0, #1
 658 0036 2146     		mov	r1, r4
 659 0038 2846     		mov	r0, r5
 660 003a FFF7FEFF 		bl	FLASH_update
 661              	.LVL72:
 662 003e 0546     		mov	r5, r0
 663              	.LVL73:
 388:Drivers/STM32CubeL4_libs/Src/iot_flash_config.c ****   }
 389:Drivers/STM32CubeL4_libs/Src/iot_flash_config.c **** 
 390:Drivers/STM32CubeL4_libs/Src/iot_flash_config.c ****   free(key_read_buffer);
 664              		.loc 1 390 3 is_stmt 1 view .LVU173
 665 0040 2046     		mov	r0, r4
 666              	.LVL74:
 667              		.loc 1 390 3 is_stmt 0 view .LVU174
ARM GAS  C:\cygwin64\tmp\ccR4YQzD.s 			page 21


 668 0042 FFF7FEFF 		bl	free
 669              	.LVL75:
 391:Drivers/STM32CubeL4_libs/Src/iot_flash_config.c **** 
 392:Drivers/STM32CubeL4_libs/Src/iot_flash_config.c ****   return ret;
 670              		.loc 1 392 3 is_stmt 1 view .LVU175
 671              	.L43:
 393:Drivers/STM32CubeL4_libs/Src/iot_flash_config.c ****  }
 672              		.loc 1 393 2 is_stmt 0 view .LVU176
 673 0046 2846     		mov	r0, r5
 674 0048 F8BD     		pop	{r3, r4, r5, r6, r7, pc}
 675              	.LVL76:
 676              	.L45:
 367:Drivers/STM32CubeL4_libs/Src/iot_flash_config.c ****   }
 677              		.loc 1 367 12 view .LVU177
 678 004a 4FF0FF35 		mov	r5, #-1
 679              	.LVL77:
 367:Drivers/STM32CubeL4_libs/Src/iot_flash_config.c ****   }
 680              		.loc 1 367 12 view .LVU178
 681 004e FAE7     		b	.L43
 682              	.L48:
 683              		.align	2
 684              	.L47:
 685 0050 00000000 		.word	.LC7
 686              		.cfi_endproc
 687              	.LFE322:
 689              		.section	.text.checkTLSRootCA,"ax",%progbits
 690              		.align	1
 691              		.global	checkTLSRootCA
 692              		.syntax unified
 693              		.thumb
 694              		.thumb_func
 695              		.fpu fpv4-sp-d16
 697              	checkTLSRootCA:
 698              	.LFB324:
 394:Drivers/STM32CubeL4_libs/Src/iot_flash_config.c **** 
 395:Drivers/STM32CubeL4_libs/Src/iot_flash_config.c **** /* Warning:
 396:Drivers/STM32CubeL4_libs/Src/iot_flash_config.c ****  *  The device key pair should only be updated if the application uses it.
 397:Drivers/STM32CubeL4_libs/Src/iot_flash_config.c ****  *  The connection security mode may chosen by the user during the device configuration.
 398:Drivers/STM32CubeL4_libs/Src/iot_flash_config.c ****  *  Therefore, updateTLSCredentials() must be called only after the IoT device configuration has be
 399:Drivers/STM32CubeL4_libs/Src/iot_flash_config.c ****  */
 400:Drivers/STM32CubeL4_libs/Src/iot_flash_config.c **** int updateTLSCredentials(void)
 401:Drivers/STM32CubeL4_libs/Src/iot_flash_config.c **** {
 402:Drivers/STM32CubeL4_libs/Src/iot_flash_config.c ****   int ret = 0;
 403:Drivers/STM32CubeL4_libs/Src/iot_flash_config.c **** 
 404:Drivers/STM32CubeL4_libs/Src/iot_flash_config.c ****   if ( (checkTLSRootCA() == -1)
 405:Drivers/STM32CubeL4_libs/Src/iot_flash_config.c ****       || dialog_ask("\nDo you want to update the root CA certificate(s)? [y/n]\n") )
 406:Drivers/STM32CubeL4_libs/Src/iot_flash_config.c ****   {
 407:Drivers/STM32CubeL4_libs/Src/iot_flash_config.c ****     printf("\nUpdating TLS security credentials.\n");
 408:Drivers/STM32CubeL4_libs/Src/iot_flash_config.c ****     printf("\nEnter the x509 certificates or keys as per the following format:\n");
 409:Drivers/STM32CubeL4_libs/Src/iot_flash_config.c ****     printf("-----BEGIN CERTIFICATE-----\n");
 410:Drivers/STM32CubeL4_libs/Src/iot_flash_config.c ****     printf("YMPGn8u67GB9t+aEMr5P+1gmIgNb1LTV+/Xjli5wwOQuvfwu7uJBVcA0Ln0kcmnL\n");
 411:Drivers/STM32CubeL4_libs/Src/iot_flash_config.c ****     printf("R7EUQIN9Z/SG9jGr8XmksrUuEvmEF/Bibyc+E1ixVA0hmnM3oTDPb5Lc9un8rNsu\n");
 412:Drivers/STM32CubeL4_libs/Src/iot_flash_config.c ****     printf(".......\n");
 413:Drivers/STM32CubeL4_libs/Src/iot_flash_config.c ****     printf("-----END CERTIFICATE-----\n");
 414:Drivers/STM32CubeL4_libs/Src/iot_flash_config.c ****     printf("-----BEGIN CERTIFICATE-----\n");
 415:Drivers/STM32CubeL4_libs/Src/iot_flash_config.c ****     printf("YMPGn8u67GB9t+aEMr5P+1gmIgNb1LTV+/Xjli5wwOQuvfwu7uJBVcA0Ln0kcmnL\n");
 416:Drivers/STM32CubeL4_libs/Src/iot_flash_config.c ****     printf(".......\n");
ARM GAS  C:\cygwin64\tmp\ccR4YQzD.s 			page 22


 417:Drivers/STM32CubeL4_libs/Src/iot_flash_config.c ****     printf("-----END CERTIFICATE-----\n");
 418:Drivers/STM32CubeL4_libs/Src/iot_flash_config.c ****     printf("\n.......\n");
 419:Drivers/STM32CubeL4_libs/Src/iot_flash_config.c **** 
 420:Drivers/STM32CubeL4_libs/Src/iot_flash_config.c ****     ret = CaptureAndFlashPem("root CA",lUserConfigPtr->tls_root_ca_cert, false);
 421:Drivers/STM32CubeL4_libs/Src/iot_flash_config.c ****     if (ret == 0)
 422:Drivers/STM32CubeL4_libs/Src/iot_flash_config.c ****     {
 423:Drivers/STM32CubeL4_libs/Src/iot_flash_config.c ****       uint64_t magic = USER_CONF_MAGIC;
 424:Drivers/STM32CubeL4_libs/Src/iot_flash_config.c ****       ret = FLASH_update((uint32_t)&lUserConfigPtr->ca_tls_magic, &magic, sizeof(uint64_t));
 425:Drivers/STM32CubeL4_libs/Src/iot_flash_config.c ****     }
 426:Drivers/STM32CubeL4_libs/Src/iot_flash_config.c ****   }
 427:Drivers/STM32CubeL4_libs/Src/iot_flash_config.c **** 
 428:Drivers/STM32CubeL4_libs/Src/iot_flash_config.c ****   if ( (ret == 0) && app_needs_device_keypair() )
 429:Drivers/STM32CubeL4_libs/Src/iot_flash_config.c ****   {
 430:Drivers/STM32CubeL4_libs/Src/iot_flash_config.c ****     if (checkTLSDeviceConfig() == -1)
 431:Drivers/STM32CubeL4_libs/Src/iot_flash_config.c ****     {
 432:Drivers/STM32CubeL4_libs/Src/iot_flash_config.c ****       ret |= CaptureAndFlashPem("device certificate",lUserConfigPtr->tls_device_cert, false);
 433:Drivers/STM32CubeL4_libs/Src/iot_flash_config.c ****       ret |= CaptureAndFlashPem("device key",lUserConfigPtr->tls_device_key, true);
 434:Drivers/STM32CubeL4_libs/Src/iot_flash_config.c ****     }
 435:Drivers/STM32CubeL4_libs/Src/iot_flash_config.c ****     else
 436:Drivers/STM32CubeL4_libs/Src/iot_flash_config.c ****     {
 437:Drivers/STM32CubeL4_libs/Src/iot_flash_config.c ****       if (dialog_ask("Do you want to update the device certificate? [y/n]\n"))
 438:Drivers/STM32CubeL4_libs/Src/iot_flash_config.c ****       {
 439:Drivers/STM32CubeL4_libs/Src/iot_flash_config.c ****         ret |= CaptureAndFlashPem("device certificate",lUserConfigPtr->tls_device_cert, false);
 440:Drivers/STM32CubeL4_libs/Src/iot_flash_config.c ****       }
 441:Drivers/STM32CubeL4_libs/Src/iot_flash_config.c **** 
 442:Drivers/STM32CubeL4_libs/Src/iot_flash_config.c ****       if (dialog_ask("Do you want to update the device key? [y/n]\n"))
 443:Drivers/STM32CubeL4_libs/Src/iot_flash_config.c ****       {
 444:Drivers/STM32CubeL4_libs/Src/iot_flash_config.c ****         ret |= CaptureAndFlashPem("device key",lUserConfigPtr->tls_device_key, true);
 445:Drivers/STM32CubeL4_libs/Src/iot_flash_config.c ****       }
 446:Drivers/STM32CubeL4_libs/Src/iot_flash_config.c ****     }
 447:Drivers/STM32CubeL4_libs/Src/iot_flash_config.c **** 
 448:Drivers/STM32CubeL4_libs/Src/iot_flash_config.c ****     if (ret == 0)
 449:Drivers/STM32CubeL4_libs/Src/iot_flash_config.c ****     {
 450:Drivers/STM32CubeL4_libs/Src/iot_flash_config.c ****       uint64_t magic = USER_CONF_MAGIC;
 451:Drivers/STM32CubeL4_libs/Src/iot_flash_config.c ****       ret = FLASH_update((uint32_t)&lUserConfigPtr->device_tls_magic, &magic, sizeof(uint64_t));
 452:Drivers/STM32CubeL4_libs/Src/iot_flash_config.c ****     }
 453:Drivers/STM32CubeL4_libs/Src/iot_flash_config.c ****   }
 454:Drivers/STM32CubeL4_libs/Src/iot_flash_config.c **** 
 455:Drivers/STM32CubeL4_libs/Src/iot_flash_config.c ****   if (ret < 0)
 456:Drivers/STM32CubeL4_libs/Src/iot_flash_config.c ****   {
 457:Drivers/STM32CubeL4_libs/Src/iot_flash_config.c ****     msg_error("Failed updating the TLS configuration in Flash.\n");
 458:Drivers/STM32CubeL4_libs/Src/iot_flash_config.c ****   }
 459:Drivers/STM32CubeL4_libs/Src/iot_flash_config.c **** 
 460:Drivers/STM32CubeL4_libs/Src/iot_flash_config.c ****   return ret;
 461:Drivers/STM32CubeL4_libs/Src/iot_flash_config.c **** }
 462:Drivers/STM32CubeL4_libs/Src/iot_flash_config.c **** 
 463:Drivers/STM32CubeL4_libs/Src/iot_flash_config.c **** 
 464:Drivers/STM32CubeL4_libs/Src/iot_flash_config.c **** /**
 465:Drivers/STM32CubeL4_libs/Src/iot_flash_config.c ****   * @brief  Check if TLS root CA certificates are present in Flash memory.
 466:Drivers/STM32CubeL4_libs/Src/iot_flash_config.c ****   * @param  void
 467:Drivers/STM32CubeL4_libs/Src/iot_flash_config.c ****   * @retval 0 Configured,
 468:Drivers/STM32CubeL4_libs/Src/iot_flash_config.c ****            -1 Not configured.
 469:Drivers/STM32CubeL4_libs/Src/iot_flash_config.c ****   */
 470:Drivers/STM32CubeL4_libs/Src/iot_flash_config.c **** int checkTLSRootCA()
 471:Drivers/STM32CubeL4_libs/Src/iot_flash_config.c **** {
 699              		.loc 1 471 1 is_stmt 1 view -0
 700              		.cfi_startproc
ARM GAS  C:\cygwin64\tmp\ccR4YQzD.s 			page 23


 701              		@ args = 0, pretend = 0, frame = 0
 702              		@ frame_needed = 0, uses_anonymous_args = 0
 703              		@ link register save eliminated.
 472:Drivers/STM32CubeL4_libs/Src/iot_flash_config.c ****   return (lUserConfigPtr->ca_tls_magic == USER_CONF_MAGIC) ? 0 : -1;
 704              		.loc 1 472 3 view .LVU180
 705              		.loc 1 472 25 is_stmt 0 view .LVU181
 706 0000 0B4B     		ldr	r3, .L52+8
 707 0002 1B68     		ldr	r3, [r3]
 708 0004 03F52853 		add	r3, r3, #10752
 709 0008 D3E90A01 		ldrd	r0, [r3, #40]
 710              		.loc 1 472 64 view .LVU182
 711 000c 06A3     		adr	r3, .L52
 712 000e D3E90023 		ldrd	r2, [r3]
 713 0012 9942     		cmp	r1, r3
 714 0014 08BF     		it	eq
 715 0016 9042     		cmpeq	r0, r2
 716 0018 01D1     		bne	.L51
 717 001a 0020     		movs	r0, #0
 718 001c 7047     		bx	lr
 719              	.L51:
 720 001e 4FF0FF30 		mov	r0, #-1
 473:Drivers/STM32CubeL4_libs/Src/iot_flash_config.c **** }
 721              		.loc 1 473 1 view .LVU183
 722 0022 7047     		bx	lr
 723              	.L53:
 724 0024 AFF30080 		.align	3
 725              	.L52:
 726 0028 EFCDAB89 		.word	-1985229329
 727 002c 67452301 		.word	19088743
 728 0030 00000000 		.word	.LANCHOR0
 729              		.cfi_endproc
 730              	.LFE324:
 732              		.section	.text.checkTLSDeviceConfig,"ax",%progbits
 733              		.align	1
 734              		.global	checkTLSDeviceConfig
 735              		.syntax unified
 736              		.thumb
 737              		.thumb_func
 738              		.fpu fpv4-sp-d16
 740              	checkTLSDeviceConfig:
 741              	.LFB325:
 474:Drivers/STM32CubeL4_libs/Src/iot_flash_config.c **** 
 475:Drivers/STM32CubeL4_libs/Src/iot_flash_config.c **** 
 476:Drivers/STM32CubeL4_libs/Src/iot_flash_config.c **** /**
 477:Drivers/STM32CubeL4_libs/Src/iot_flash_config.c ****   * @brief  Check if the device TLS credentials (device certificate and device private key)
 478:Drivers/STM32CubeL4_libs/Src/iot_flash_config.c ****             are present in Flash memory.
 479:Drivers/STM32CubeL4_libs/Src/iot_flash_config.c ****   * @param  void
 480:Drivers/STM32CubeL4_libs/Src/iot_flash_config.c ****   * @retval 0 Configured,
 481:Drivers/STM32CubeL4_libs/Src/iot_flash_config.c ****            -1 Not configured.
 482:Drivers/STM32CubeL4_libs/Src/iot_flash_config.c ****   */
 483:Drivers/STM32CubeL4_libs/Src/iot_flash_config.c **** int checkTLSDeviceConfig()
 484:Drivers/STM32CubeL4_libs/Src/iot_flash_config.c **** {
 742              		.loc 1 484 1 is_stmt 1 view -0
 743              		.cfi_startproc
 744              		@ args = 0, pretend = 0, frame = 0
 745              		@ frame_needed = 0, uses_anonymous_args = 0
 746              		@ link register save eliminated.
ARM GAS  C:\cygwin64\tmp\ccR4YQzD.s 			page 24


 485:Drivers/STM32CubeL4_libs/Src/iot_flash_config.c ****   return (lUserConfigPtr->device_tls_magic == USER_CONF_MAGIC) ? 0 : -1;
 747              		.loc 1 485 3 view .LVU185
 748              		.loc 1 485 25 is_stmt 0 view .LVU186
 749 0000 0B4B     		ldr	r3, .L57+8
 750 0002 1B68     		ldr	r3, [r3]
 751 0004 03F52853 		add	r3, r3, #10752
 752 0008 D3E90C01 		ldrd	r0, [r3, #48]
 753              		.loc 1 485 68 view .LVU187
 754 000c 06A3     		adr	r3, .L57
 755 000e D3E90023 		ldrd	r2, [r3]
 756 0012 9942     		cmp	r1, r3
 757 0014 08BF     		it	eq
 758 0016 9042     		cmpeq	r0, r2
 759 0018 01D1     		bne	.L56
 760 001a 0020     		movs	r0, #0
 761 001c 7047     		bx	lr
 762              	.L56:
 763 001e 4FF0FF30 		mov	r0, #-1
 486:Drivers/STM32CubeL4_libs/Src/iot_flash_config.c **** }
 764              		.loc 1 486 1 view .LVU188
 765 0022 7047     		bx	lr
 766              	.L58:
 767 0024 AFF30080 		.align	3
 768              	.L57:
 769 0028 EFCDAB89 		.word	-1985229329
 770 002c 67452301 		.word	19088743
 771 0030 00000000 		.word	.LANCHOR0
 772              		.cfi_endproc
 773              	.LFE325:
 775              		.section	.rodata.updateTLSCredentials.str1.4,"aMS",%progbits,1
 776              		.align	2
 777              	.LC8:
 778 0000 0A446F20 		.ascii	"\012Do you want to update the root CA certificate(s"
 778      796F7520 
 778      77616E74 
 778      20746F20 
 778      75706461 
 779 0030 293F205B 		.ascii	")? [y/n]\012\000"
 779      792F6E5D 
 779      0A00
 780 003a 0000     		.align	2
 781              	.LC9:
 782 003c 0A557064 		.ascii	"\012Updating TLS security credentials.\000"
 782      6174696E 
 782      6720544C 
 782      53207365 
 782      63757269 
 783              		.align	2
 784              	.LC10:
 785 0060 0A456E74 		.ascii	"\012Enter the x509 certificates or keys as per the "
 785      65722074 
 785      68652078 
 785      35303920 
 785      63657274 
 786 0090 666F6C6C 		.ascii	"following format:\000"
 786      6F77696E 
 786      6720666F 
ARM GAS  C:\cygwin64\tmp\ccR4YQzD.s 			page 25


 786      726D6174 
 786      3A00
 787 00a2 0000     		.align	2
 788              	.LC11:
 789 00a4 2D2D2D2D 		.ascii	"-----BEGIN CERTIFICATE-----\000"
 789      2D424547 
 789      494E2043 
 789      45525449 
 789      46494341 
 790              		.align	2
 791              	.LC12:
 792 00c0 594D5047 		.ascii	"YMPGn8u67GB9t+aEMr5P+1gmIgNb1LTV+/Xjli5wwOQuvfwu7uJ"
 792      6E387536 
 792      37474239 
 792      742B6145 
 792      4D723550 
 793 00f3 42566341 		.ascii	"BVcA0Ln0kcmnL\000"
 793      304C6E30 
 793      6B636D6E 
 793      4C00
 794 0101 000000   		.align	2
 795              	.LC13:
 796 0104 52374555 		.ascii	"R7EUQIN9Z/SG9jGr8XmksrUuEvmEF/Bibyc+E1ixVA0hmnM3oTD"
 796      51494E39 
 796      5A2F5347 
 796      396A4772 
 796      38586D6B 
 797 0137 5062354C 		.ascii	"Pb5Lc9un8rNsu\000"
 797      6339756E 
 797      38724E73 
 797      7500
 798 0145 000000   		.align	2
 799              	.LC14:
 800 0148 2E2E2E2E 		.ascii	".......\000"
 800      2E2E2E00 
 801              		.align	2
 802              	.LC15:
 803 0150 2D2D2D2D 		.ascii	"-----END CERTIFICATE-----\000"
 803      2D454E44 
 803      20434552 
 803      54494649 
 803      43415445 
 804 016a 0000     		.align	2
 805              	.LC16:
 806 016c 0A2E2E2E 		.ascii	"\012.......\000"
 806      2E2E2E2E 
 806      00
 807 0175 000000   		.align	2
 808              	.LC17:
 809 0178 726F6F74 		.ascii	"root CA\000"
 809      20434100 
 810              		.align	2
 811              	.LC18:
 812 0180 64657669 		.ascii	"device certificate\000"
 812      63652063 
 812      65727469 
 812      66696361 
ARM GAS  C:\cygwin64\tmp\ccR4YQzD.s 			page 26


 812      746500
 813 0193 00       		.align	2
 814              	.LC19:
 815 0194 64657669 		.ascii	"device key\000"
 815      6365206B 
 815      657900
 816 019f 00       		.align	2
 817              	.LC20:
 818 01a0 446F2079 		.ascii	"Do you want to update the device certificate? [y/n]"
 818      6F752077 
 818      616E7420 
 818      746F2075 
 818      70646174 
 819 01d3 0A00     		.ascii	"\012\000"
 820 01d5 000000   		.align	2
 821              	.LC21:
 822 01d8 446F2079 		.ascii	"Do you want to update the device key? [y/n]\012\000"
 822      6F752077 
 822      616E7420 
 822      746F2075 
 822      70646174 
 823              		.section	.text.updateTLSCredentials,"ax",%progbits
 824              		.align	1
 825              		.global	updateTLSCredentials
 826              		.syntax unified
 827              		.thumb
 828              		.thumb_func
 829              		.fpu fpv4-sp-d16
 831              	updateTLSCredentials:
 832              	.LFB323:
 401:Drivers/STM32CubeL4_libs/Src/iot_flash_config.c ****   int ret = 0;
 833              		.loc 1 401 1 is_stmt 1 view -0
 834              		.cfi_startproc
 835              		@ args = 0, pretend = 0, frame = 8
 836              		@ frame_needed = 0, uses_anonymous_args = 0
 837 0000 F0B5     		push	{r4, r5, r6, r7, lr}
 838              	.LCFI10:
 839              		.cfi_def_cfa_offset 20
 840              		.cfi_offset 4, -20
 841              		.cfi_offset 5, -16
 842              		.cfi_offset 6, -12
 843              		.cfi_offset 7, -8
 844              		.cfi_offset 14, -4
 845 0002 83B0     		sub	sp, sp, #12
 846              	.LCFI11:
 847              		.cfi_def_cfa_offset 32
 402:Drivers/STM32CubeL4_libs/Src/iot_flash_config.c **** 
 848              		.loc 1 402 3 view .LVU190
 849              	.LVL78:
 404:Drivers/STM32CubeL4_libs/Src/iot_flash_config.c ****       || dialog_ask("\nDo you want to update the root CA certificate(s)? [y/n]\n") )
 850              		.loc 1 404 3 view .LVU191
 404:Drivers/STM32CubeL4_libs/Src/iot_flash_config.c ****       || dialog_ask("\nDo you want to update the root CA certificate(s)? [y/n]\n") )
 851              		.loc 1 404 9 is_stmt 0 view .LVU192
 852 0004 FFF7FEFF 		bl	checkTLSRootCA
 853              	.LVL79:
 404:Drivers/STM32CubeL4_libs/Src/iot_flash_config.c ****       || dialog_ask("\nDo you want to update the root CA certificate(s)? [y/n]\n") )
 854              		.loc 1 404 6 view .LVU193
ARM GAS  C:\cygwin64\tmp\ccR4YQzD.s 			page 27


 855 0008 B0F1FF3F 		cmp	r0, #-1
 856 000c 04D0     		beq	.L60
 405:Drivers/STM32CubeL4_libs/Src/iot_flash_config.c ****   {
 857              		.loc 1 405 10 view .LVU194
 858 000e 4C48     		ldr	r0, .L74+8
 859 0010 FFF7FEFF 		bl	dialog_ask
 860              	.LVL80:
 405:Drivers/STM32CubeL4_libs/Src/iot_flash_config.c ****   {
 861              		.loc 1 405 7 view .LVU195
 862 0014 0028     		cmp	r0, #0
 863 0016 56D0     		beq	.L67
 864              	.L60:
 407:Drivers/STM32CubeL4_libs/Src/iot_flash_config.c ****     printf("\nEnter the x509 certificates or keys as per the following format:\n");
 865              		.loc 1 407 5 is_stmt 1 view .LVU196
 866 0018 4A48     		ldr	r0, .L74+12
 867 001a FFF7FEFF 		bl	puts
 868              	.LVL81:
 408:Drivers/STM32CubeL4_libs/Src/iot_flash_config.c ****     printf("-----BEGIN CERTIFICATE-----\n");
 869              		.loc 1 408 5 view .LVU197
 870 001e 4A48     		ldr	r0, .L74+16
 871 0020 FFF7FEFF 		bl	puts
 872              	.LVL82:
 409:Drivers/STM32CubeL4_libs/Src/iot_flash_config.c ****     printf("YMPGn8u67GB9t+aEMr5P+1gmIgNb1LTV+/Xjli5wwOQuvfwu7uJBVcA0Ln0kcmnL\n");
 873              		.loc 1 409 5 view .LVU198
 874 0024 494F     		ldr	r7, .L74+20
 875 0026 3846     		mov	r0, r7
 876 0028 FFF7FEFF 		bl	puts
 877              	.LVL83:
 410:Drivers/STM32CubeL4_libs/Src/iot_flash_config.c ****     printf("R7EUQIN9Z/SG9jGr8XmksrUuEvmEF/Bibyc+E1ixVA0hmnM3oTDPb5Lc9un8rNsu\n");
 878              		.loc 1 410 5 view .LVU199
 879 002c 484E     		ldr	r6, .L74+24
 880 002e 3046     		mov	r0, r6
 881 0030 FFF7FEFF 		bl	puts
 882              	.LVL84:
 411:Drivers/STM32CubeL4_libs/Src/iot_flash_config.c ****     printf(".......\n");
 883              		.loc 1 411 5 view .LVU200
 884 0034 4748     		ldr	r0, .L74+28
 885 0036 FFF7FEFF 		bl	puts
 886              	.LVL85:
 412:Drivers/STM32CubeL4_libs/Src/iot_flash_config.c ****     printf("-----END CERTIFICATE-----\n");
 887              		.loc 1 412 5 view .LVU201
 888 003a 474D     		ldr	r5, .L74+32
 889 003c 2846     		mov	r0, r5
 890 003e FFF7FEFF 		bl	puts
 891              	.LVL86:
 413:Drivers/STM32CubeL4_libs/Src/iot_flash_config.c ****     printf("-----BEGIN CERTIFICATE-----\n");
 892              		.loc 1 413 5 view .LVU202
 893 0042 464C     		ldr	r4, .L74+36
 894 0044 2046     		mov	r0, r4
 895 0046 FFF7FEFF 		bl	puts
 896              	.LVL87:
 414:Drivers/STM32CubeL4_libs/Src/iot_flash_config.c ****     printf("YMPGn8u67GB9t+aEMr5P+1gmIgNb1LTV+/Xjli5wwOQuvfwu7uJBVcA0Ln0kcmnL\n");
 897              		.loc 1 414 5 view .LVU203
 898 004a 3846     		mov	r0, r7
 899 004c FFF7FEFF 		bl	puts
 900              	.LVL88:
 415:Drivers/STM32CubeL4_libs/Src/iot_flash_config.c ****     printf(".......\n");
ARM GAS  C:\cygwin64\tmp\ccR4YQzD.s 			page 28


 901              		.loc 1 415 5 view .LVU204
 902 0050 3046     		mov	r0, r6
 903 0052 FFF7FEFF 		bl	puts
 904              	.LVL89:
 416:Drivers/STM32CubeL4_libs/Src/iot_flash_config.c ****     printf("-----END CERTIFICATE-----\n");
 905              		.loc 1 416 5 view .LVU205
 906 0056 2846     		mov	r0, r5
 907 0058 FFF7FEFF 		bl	puts
 908              	.LVL90:
 417:Drivers/STM32CubeL4_libs/Src/iot_flash_config.c ****     printf("\n.......\n");
 909              		.loc 1 417 5 view .LVU206
 910 005c 2046     		mov	r0, r4
 911 005e FFF7FEFF 		bl	puts
 912              	.LVL91:
 418:Drivers/STM32CubeL4_libs/Src/iot_flash_config.c **** 
 913              		.loc 1 418 5 view .LVU207
 914 0062 3F48     		ldr	r0, .L74+40
 915 0064 FFF7FEFF 		bl	puts
 916              	.LVL92:
 420:Drivers/STM32CubeL4_libs/Src/iot_flash_config.c ****     if (ret == 0)
 917              		.loc 1 420 5 view .LVU208
 420:Drivers/STM32CubeL4_libs/Src/iot_flash_config.c ****     if (ret == 0)
 918              		.loc 1 420 11 is_stmt 0 view .LVU209
 919 0068 0022     		movs	r2, #0
 920 006a 3E4B     		ldr	r3, .L74+44
 921 006c 1968     		ldr	r1, [r3]
 922 006e 3E48     		ldr	r0, .L74+48
 923 0070 FFF7FEFF 		bl	CaptureAndFlashPem
 924              	.LVL93:
 421:Drivers/STM32CubeL4_libs/Src/iot_flash_config.c ****     {
 925              		.loc 1 421 5 is_stmt 1 view .LVU210
 421:Drivers/STM32CubeL4_libs/Src/iot_flash_config.c ****     {
 926              		.loc 1 421 8 is_stmt 0 view .LVU211
 927 0074 0446     		mov	r4, r0
 928 0076 B0B1     		cbz	r0, .L69
 929              	.L62:
 428:Drivers/STM32CubeL4_libs/Src/iot_flash_config.c ****   {
 930              		.loc 1 428 3 is_stmt 1 view .LVU212
 428:Drivers/STM32CubeL4_libs/Src/iot_flash_config.c ****   {
 931              		.loc 1 428 6 is_stmt 0 view .LVU213
 932 0078 94B9     		cbnz	r4, .L59
 933              	.LVL94:
 934              	.L61:
 428:Drivers/STM32CubeL4_libs/Src/iot_flash_config.c ****   {
 935              		.loc 1 428 22 discriminator 1 view .LVU214
 936 007a FFF7FEFF 		bl	app_needs_device_keypair
 937              	.LVL95:
 428:Drivers/STM32CubeL4_libs/Src/iot_flash_config.c ****   {
 938              		.loc 1 428 19 discriminator 1 view .LVU215
 939 007e 78B1     		cbz	r0, .L59
 430:Drivers/STM32CubeL4_libs/Src/iot_flash_config.c ****     {
 940              		.loc 1 430 5 is_stmt 1 view .LVU216
 430:Drivers/STM32CubeL4_libs/Src/iot_flash_config.c ****     {
 941              		.loc 1 430 9 is_stmt 0 view .LVU217
 942 0080 FFF7FEFF 		bl	checkTLSDeviceConfig
 943              	.LVL96:
 430:Drivers/STM32CubeL4_libs/Src/iot_flash_config.c ****     {
ARM GAS  C:\cygwin64\tmp\ccR4YQzD.s 			page 29


 944              		.loc 1 430 8 view .LVU218
 945 0084 B0F1FF3F 		cmp	r0, #-1
 946 0088 1FD0     		beq	.L70
 437:Drivers/STM32CubeL4_libs/Src/iot_flash_config.c ****       {
 947              		.loc 1 437 7 is_stmt 1 view .LVU219
 437:Drivers/STM32CubeL4_libs/Src/iot_flash_config.c ****       {
 948              		.loc 1 437 11 is_stmt 0 view .LVU220
 949 008a 3848     		ldr	r0, .L74+52
 950 008c FFF7FEFF 		bl	dialog_ask
 951              	.LVL97:
 437:Drivers/STM32CubeL4_libs/Src/iot_flash_config.c ****       {
 952              		.loc 1 437 10 view .LVU221
 953 0090 68BB     		cbnz	r0, .L71
 954              	.L66:
 955              	.LVL98:
 442:Drivers/STM32CubeL4_libs/Src/iot_flash_config.c ****       {
 956              		.loc 1 442 7 is_stmt 1 view .LVU222
 442:Drivers/STM32CubeL4_libs/Src/iot_flash_config.c ****       {
 957              		.loc 1 442 11 is_stmt 0 view .LVU223
 958 0092 3748     		ldr	r0, .L74+56
 959 0094 FFF7FEFF 		bl	dialog_ask
 960              	.LVL99:
 442:Drivers/STM32CubeL4_libs/Src/iot_flash_config.c ****       {
 961              		.loc 1 442 10 view .LVU224
 962 0098 0028     		cmp	r0, #0
 963 009a 32D1     		bne	.L72
 964              	.L65:
 448:Drivers/STM32CubeL4_libs/Src/iot_flash_config.c ****     {
 965              		.loc 1 448 5 is_stmt 1 view .LVU225
 448:Drivers/STM32CubeL4_libs/Src/iot_flash_config.c ****     {
 966              		.loc 1 448 8 is_stmt 0 view .LVU226
 967 009c 002C     		cmp	r4, #0
 968 009e 3AD0     		beq	.L73
 969              	.LVL100:
 970              	.L59:
 461:Drivers/STM32CubeL4_libs/Src/iot_flash_config.c **** 
 971              		.loc 1 461 1 view .LVU227
 972 00a0 2046     		mov	r0, r4
 973 00a2 03B0     		add	sp, sp, #12
 974              	.LCFI12:
 975              		.cfi_remember_state
 976              		.cfi_def_cfa_offset 20
 977              		@ sp needed
 978 00a4 F0BD     		pop	{r4, r5, r6, r7, pc}
 979              	.LVL101:
 980              	.L69:
 981              	.LCFI13:
 982              		.cfi_restore_state
 983              	.LBB2:
 423:Drivers/STM32CubeL4_libs/Src/iot_flash_config.c ****       ret = FLASH_update((uint32_t)&lUserConfigPtr->ca_tls_magic, &magic, sizeof(uint64_t));
 984              		.loc 1 423 7 is_stmt 1 view .LVU228
 423:Drivers/STM32CubeL4_libs/Src/iot_flash_config.c ****       ret = FLASH_update((uint32_t)&lUserConfigPtr->ca_tls_magic, &magic, sizeof(uint64_t));
 985              		.loc 1 423 16 is_stmt 0 view .LVU229
 986 00a6 24A3     		adr	r3, .L74
 987 00a8 D3E90023 		ldrd	r2, [r3]
 988 00ac CDE90023 		strd	r2, [sp]
 424:Drivers/STM32CubeL4_libs/Src/iot_flash_config.c ****     }
ARM GAS  C:\cygwin64\tmp\ccR4YQzD.s 			page 30


 989              		.loc 1 424 7 is_stmt 1 view .LVU230
 424:Drivers/STM32CubeL4_libs/Src/iot_flash_config.c ****     }
 990              		.loc 1 424 51 is_stmt 0 view .LVU231
 991 00b0 2C4B     		ldr	r3, .L74+44
 992 00b2 1868     		ldr	r0, [r3]
 993              	.LVL102:
 424:Drivers/STM32CubeL4_libs/Src/iot_flash_config.c ****     }
 994              		.loc 1 424 13 view .LVU232
 995 00b4 0822     		movs	r2, #8
 996 00b6 6946     		mov	r1, sp
 997 00b8 00F52850 		add	r0, r0, #10752
 998 00bc 2830     		adds	r0, r0, #40
 999 00be FFF7FEFF 		bl	FLASH_update
 1000              	.LVL103:
 1001 00c2 0446     		mov	r4, r0
 1002              	.LVL104:
 424:Drivers/STM32CubeL4_libs/Src/iot_flash_config.c ****     }
 1003              		.loc 1 424 13 view .LVU233
 1004 00c4 D8E7     		b	.L62
 1005              	.LVL105:
 1006              	.L67:
 424:Drivers/STM32CubeL4_libs/Src/iot_flash_config.c ****     }
 1007              		.loc 1 424 13 view .LVU234
 1008              	.LBE2:
 402:Drivers/STM32CubeL4_libs/Src/iot_flash_config.c **** 
 1009              		.loc 1 402 7 view .LVU235
 1010 00c6 0024     		movs	r4, #0
 1011 00c8 D7E7     		b	.L61
 1012              	.LVL106:
 1013              	.L70:
 432:Drivers/STM32CubeL4_libs/Src/iot_flash_config.c ****       ret |= CaptureAndFlashPem("device key",lUserConfigPtr->tls_device_key, true);
 1014              		.loc 1 432 7 is_stmt 1 view .LVU236
 432:Drivers/STM32CubeL4_libs/Src/iot_flash_config.c ****       ret |= CaptureAndFlashPem("device key",lUserConfigPtr->tls_device_key, true);
 1015              		.loc 1 432 68 is_stmt 0 view .LVU237
 1016 00ca 264D     		ldr	r5, .L74+44
 1017 00cc 2968     		ldr	r1, [r5]
 432:Drivers/STM32CubeL4_libs/Src/iot_flash_config.c ****       ret |= CaptureAndFlashPem("device key",lUserConfigPtr->tls_device_key, true);
 1018              		.loc 1 432 14 view .LVU238
 1019 00ce 0022     		movs	r2, #0
 1020 00d0 01F5C051 		add	r1, r1, #6144
 1021 00d4 2748     		ldr	r0, .L74+60
 1022 00d6 FFF7FEFF 		bl	CaptureAndFlashPem
 1023              	.LVL107:
 432:Drivers/STM32CubeL4_libs/Src/iot_flash_config.c ****       ret |= CaptureAndFlashPem("device key",lUserConfigPtr->tls_device_key, true);
 1024              		.loc 1 432 11 view .LVU239
 1025 00da 0443     		orrs	r4, r4, r0
 1026              	.LVL108:
 433:Drivers/STM32CubeL4_libs/Src/iot_flash_config.c ****     }
 1027              		.loc 1 433 7 is_stmt 1 view .LVU240
 433:Drivers/STM32CubeL4_libs/Src/iot_flash_config.c ****     }
 1028              		.loc 1 433 60 is_stmt 0 view .LVU241
 1029 00dc 2968     		ldr	r1, [r5]
 433:Drivers/STM32CubeL4_libs/Src/iot_flash_config.c ****     }
 1030              		.loc 1 433 14 view .LVU242
 1031 00de 0122     		movs	r2, #1
 1032 00e0 01F50051 		add	r1, r1, #8192
 1033 00e4 2448     		ldr	r0, .L74+64
ARM GAS  C:\cygwin64\tmp\ccR4YQzD.s 			page 31


 1034 00e6 FFF7FEFF 		bl	CaptureAndFlashPem
 1035              	.LVL109:
 433:Drivers/STM32CubeL4_libs/Src/iot_flash_config.c ****     }
 1036              		.loc 1 433 11 view .LVU243
 1037 00ea 0443     		orrs	r4, r4, r0
 1038              	.LVL110:
 433:Drivers/STM32CubeL4_libs/Src/iot_flash_config.c ****     }
 1039              		.loc 1 433 11 view .LVU244
 1040 00ec D6E7     		b	.L65
 1041              	.LVL111:
 1042              	.L71:
 439:Drivers/STM32CubeL4_libs/Src/iot_flash_config.c ****       }
 1043              		.loc 1 439 9 is_stmt 1 view .LVU245
 439:Drivers/STM32CubeL4_libs/Src/iot_flash_config.c ****       }
 1044              		.loc 1 439 70 is_stmt 0 view .LVU246
 1045 00ee 1D4B     		ldr	r3, .L74+44
 1046 00f0 1968     		ldr	r1, [r3]
 439:Drivers/STM32CubeL4_libs/Src/iot_flash_config.c ****       }
 1047              		.loc 1 439 16 view .LVU247
 1048 00f2 0022     		movs	r2, #0
 1049 00f4 01F5C051 		add	r1, r1, #6144
 1050 00f8 1E48     		ldr	r0, .L74+60
 1051 00fa FFF7FEFF 		bl	CaptureAndFlashPem
 1052              	.LVL112:
 439:Drivers/STM32CubeL4_libs/Src/iot_flash_config.c ****       }
 1053              		.loc 1 439 13 view .LVU248
 1054 00fe 0443     		orrs	r4, r4, r0
 1055              	.LVL113:
 439:Drivers/STM32CubeL4_libs/Src/iot_flash_config.c ****       }
 1056              		.loc 1 439 13 view .LVU249
 1057 0100 C7E7     		b	.L66
 1058              	.L72:
 444:Drivers/STM32CubeL4_libs/Src/iot_flash_config.c ****       }
 1059              		.loc 1 444 9 is_stmt 1 view .LVU250
 444:Drivers/STM32CubeL4_libs/Src/iot_flash_config.c ****       }
 1060              		.loc 1 444 62 is_stmt 0 view .LVU251
 1061 0102 184B     		ldr	r3, .L74+44
 1062 0104 1968     		ldr	r1, [r3]
 444:Drivers/STM32CubeL4_libs/Src/iot_flash_config.c ****       }
 1063              		.loc 1 444 16 view .LVU252
 1064 0106 0122     		movs	r2, #1
 1065 0108 01F50051 		add	r1, r1, #8192
 1066 010c 1A48     		ldr	r0, .L74+64
 1067 010e FFF7FEFF 		bl	CaptureAndFlashPem
 1068              	.LVL114:
 444:Drivers/STM32CubeL4_libs/Src/iot_flash_config.c ****       }
 1069              		.loc 1 444 13 view .LVU253
 1070 0112 0443     		orrs	r4, r4, r0
 1071              	.LVL115:
 444:Drivers/STM32CubeL4_libs/Src/iot_flash_config.c ****       }
 1072              		.loc 1 444 13 view .LVU254
 1073 0114 C2E7     		b	.L65
 1074              	.L73:
 1075              	.LBB3:
 450:Drivers/STM32CubeL4_libs/Src/iot_flash_config.c ****       ret = FLASH_update((uint32_t)&lUserConfigPtr->device_tls_magic, &magic, sizeof(uint64_t));
 1076              		.loc 1 450 7 is_stmt 1 view .LVU255
 450:Drivers/STM32CubeL4_libs/Src/iot_flash_config.c ****       ret = FLASH_update((uint32_t)&lUserConfigPtr->device_tls_magic, &magic, sizeof(uint64_t));
ARM GAS  C:\cygwin64\tmp\ccR4YQzD.s 			page 32


 1077              		.loc 1 450 16 is_stmt 0 view .LVU256
 1078 0116 08A3     		adr	r3, .L74
 1079 0118 D3E90023 		ldrd	r2, [r3]
 1080 011c CDE90023 		strd	r2, [sp]
 451:Drivers/STM32CubeL4_libs/Src/iot_flash_config.c ****     }
 1081              		.loc 1 451 7 is_stmt 1 view .LVU257
 451:Drivers/STM32CubeL4_libs/Src/iot_flash_config.c ****     }
 1082              		.loc 1 451 51 is_stmt 0 view .LVU258
 1083 0120 104B     		ldr	r3, .L74+44
 1084 0122 1868     		ldr	r0, [r3]
 451:Drivers/STM32CubeL4_libs/Src/iot_flash_config.c ****     }
 1085              		.loc 1 451 13 view .LVU259
 1086 0124 0822     		movs	r2, #8
 1087 0126 6946     		mov	r1, sp
 1088 0128 00F52850 		add	r0, r0, #10752
 1089 012c 3030     		adds	r0, r0, #48
 1090 012e FFF7FEFF 		bl	FLASH_update
 1091              	.LVL116:
 1092 0132 0446     		mov	r4, r0
 1093              	.LVL117:
 451:Drivers/STM32CubeL4_libs/Src/iot_flash_config.c ****     }
 1094              		.loc 1 451 13 view .LVU260
 1095              	.LBE3:
 455:Drivers/STM32CubeL4_libs/Src/iot_flash_config.c ****   {
 1096              		.loc 1 455 3 is_stmt 1 view .LVU261
 457:Drivers/STM32CubeL4_libs/Src/iot_flash_config.c ****   }
 1097              		.loc 1 457 67 view .LVU262
 460:Drivers/STM32CubeL4_libs/Src/iot_flash_config.c **** }
 1098              		.loc 1 460 3 view .LVU263
 460:Drivers/STM32CubeL4_libs/Src/iot_flash_config.c **** }
 1099              		.loc 1 460 10 is_stmt 0 view .LVU264
 1100 0134 B4E7     		b	.L59
 1101              	.L75:
 1102 0136 00BF     		.align	3
 1103              	.L74:
 1104 0138 EFCDAB89 		.word	-1985229329
 1105 013c 67452301 		.word	19088743
 1106 0140 00000000 		.word	.LC8
 1107 0144 3C000000 		.word	.LC9
 1108 0148 60000000 		.word	.LC10
 1109 014c A4000000 		.word	.LC11
 1110 0150 C0000000 		.word	.LC12
 1111 0154 04010000 		.word	.LC13
 1112 0158 48010000 		.word	.LC14
 1113 015c 50010000 		.word	.LC15
 1114 0160 6C010000 		.word	.LC16
 1115 0164 00000000 		.word	.LANCHOR0
 1116 0168 78010000 		.word	.LC17
 1117 016c A0010000 		.word	.LC20
 1118 0170 D8010000 		.word	.LC21
 1119 0174 80010000 		.word	.LC18
 1120 0178 94010000 		.word	.LC19
 1121              		.cfi_endproc
 1122              	.LFE323:
 1124              		.section	.text.setIoTDeviceConfig,"ax",%progbits
 1125              		.align	1
 1126              		.global	setIoTDeviceConfig
ARM GAS  C:\cygwin64\tmp\ccR4YQzD.s 			page 33


 1127              		.syntax unified
 1128              		.thumb
 1129              		.thumb_func
 1130              		.fpu fpv4-sp-d16
 1132              	setIoTDeviceConfig:
 1133              	.LVL118:
 1134              	.LFB326:
 487:Drivers/STM32CubeL4_libs/Src/iot_flash_config.c **** 
 488:Drivers/STM32CubeL4_libs/Src/iot_flash_config.c **** 
 489:Drivers/STM32CubeL4_libs/Src/iot_flash_config.c **** /**
 490:Drivers/STM32CubeL4_libs/Src/iot_flash_config.c ****   * @brief  Store the IoT device configuration in Flash.
 491:Drivers/STM32CubeL4_libs/Src/iot_flash_config.c ****   * @param  In: config    Configuration data.
 492:Drivers/STM32CubeL4_libs/Src/iot_flash_config.c ****   * @retval  0  Success
 493:Drivers/STM32CubeL4_libs/Src/iot_flash_config.c ****   *         -1  Error
 494:Drivers/STM32CubeL4_libs/Src/iot_flash_config.c ****   */
 495:Drivers/STM32CubeL4_libs/Src/iot_flash_config.c **** int setIoTDeviceConfig(iot_config_t *config)
 496:Drivers/STM32CubeL4_libs/Src/iot_flash_config.c **** {
 1135              		.loc 1 496 1 is_stmt 1 view -0
 1136              		.cfi_startproc
 1137              		@ args = 0, pretend = 0, frame = 0
 1138              		@ frame_needed = 0, uses_anonymous_args = 0
 1139              		.loc 1 496 1 is_stmt 0 view .LVU266
 1140 0000 08B5     		push	{r3, lr}
 1141              	.LCFI14:
 1142              		.cfi_def_cfa_offset 8
 1143              		.cfi_offset 3, -8
 1144              		.cfi_offset 14, -4
 1145 0002 0146     		mov	r1, r0
 497:Drivers/STM32CubeL4_libs/Src/iot_flash_config.c ****   int ret = 0;
 1146              		.loc 1 497 3 is_stmt 1 view .LVU267
 1147              	.LVL119:
 498:Drivers/STM32CubeL4_libs/Src/iot_flash_config.c ****   config->magic = USER_CONF_MAGIC;
 1148              		.loc 1 498 3 view .LVU268
 1149              		.loc 1 498 17 is_stmt 0 view .LVU269
 1150 0004 0BA3     		adr	r3, .L80+4
 1151 0006 D3E90023 		ldrd	r2, [r3]
 1152 000a C0E90023 		strd	r2, [r0]
 499:Drivers/STM32CubeL4_libs/Src/iot_flash_config.c **** 
 500:Drivers/STM32CubeL4_libs/Src/iot_flash_config.c ****   if (FLASH_update((uint32_t)&lUserConfigPtr->iot_config, config, sizeof(iot_config_t)) < 0)
 1153              		.loc 1 500 3 is_stmt 1 view .LVU270
 1154              		.loc 1 500 45 is_stmt 0 view .LVU271
 1155 000e 084B     		ldr	r3, .L80
 1156 0010 1868     		ldr	r0, [r3]
 1157              	.LVL120:
 1158              		.loc 1 500 7 view .LVU272
 1159 0012 4FF4DC72 		mov	r2, #440
 1160 0016 00F52150 		add	r0, r0, #10304
 1161 001a 3030     		adds	r0, r0, #48
 1162 001c FFF7FEFF 		bl	FLASH_update
 1163              	.LVL121:
 1164              		.loc 1 500 6 view .LVU273
 1165 0020 0028     		cmp	r0, #0
 1166 0022 01DB     		blt	.L78
 497:Drivers/STM32CubeL4_libs/Src/iot_flash_config.c ****   config->magic = USER_CONF_MAGIC;
 1167              		.loc 1 497 7 view .LVU274
 1168 0024 0020     		movs	r0, #0
 1169              	.LVL122:
ARM GAS  C:\cygwin64\tmp\ccR4YQzD.s 			page 34


 1170              	.L76:
 501:Drivers/STM32CubeL4_libs/Src/iot_flash_config.c ****   {
 502:Drivers/STM32CubeL4_libs/Src/iot_flash_config.c ****     msg_error("Failed programming the IOT config into Flash.\n");
 503:Drivers/STM32CubeL4_libs/Src/iot_flash_config.c ****     ret = -1;
 504:Drivers/STM32CubeL4_libs/Src/iot_flash_config.c ****   }
 505:Drivers/STM32CubeL4_libs/Src/iot_flash_config.c **** 
 506:Drivers/STM32CubeL4_libs/Src/iot_flash_config.c ****   return ret;
 507:Drivers/STM32CubeL4_libs/Src/iot_flash_config.c **** }
 1171              		.loc 1 507 1 view .LVU275
 1172 0026 08BD     		pop	{r3, pc}
 1173              	.LVL123:
 1174              	.L78:
 503:Drivers/STM32CubeL4_libs/Src/iot_flash_config.c ****   }
 1175              		.loc 1 503 9 view .LVU276
 1176 0028 4FF0FF30 		mov	r0, #-1
 1177              	.LVL124:
 506:Drivers/STM32CubeL4_libs/Src/iot_flash_config.c **** }
 1178              		.loc 1 506 3 is_stmt 1 view .LVU277
 506:Drivers/STM32CubeL4_libs/Src/iot_flash_config.c **** }
 1179              		.loc 1 506 10 is_stmt 0 view .LVU278
 1180 002c FBE7     		b	.L76
 1181              	.L81:
 1182 002e 00BF     		.align	3
 1183              	.L80:
 1184 0030 00000000 		.word	.LANCHOR0
 1185 0034 EFCDAB89 		.word	-1985229329
 1186 0038 67452301 		.word	19088743
 1187              		.cfi_endproc
 1188              	.LFE326:
 1190              		.section	.text.getIoTDeviceConfig,"ax",%progbits
 1191              		.align	1
 1192              		.global	getIoTDeviceConfig
 1193              		.syntax unified
 1194              		.thumb
 1195              		.thumb_func
 1196              		.fpu fpv4-sp-d16
 1198              	getIoTDeviceConfig:
 1199              	.LVL125:
 1200              	.LFB327:
 508:Drivers/STM32CubeL4_libs/Src/iot_flash_config.c **** 
 509:Drivers/STM32CubeL4_libs/Src/iot_flash_config.c **** #ifdef AWS
 510:Drivers/STM32CubeL4_libs/Src/iot_flash_config.c **** /* Deprecated; only for AWS. */
 511:Drivers/STM32CubeL4_libs/Src/iot_flash_config.c **** /**
 512:Drivers/STM32CubeL4_libs/Src/iot_flash_config.c ****   * @brief  Get the MQTT broker address (AWS endpoint) from Flash memory.
 513:Drivers/STM32CubeL4_libs/Src/iot_flash_config.c ****   * @param  Out:  address   Pointer to location of the server address.
 514:Drivers/STM32CubeL4_libs/Src/iot_flash_config.c ****   * @retval  0  Success:  The server address is configured and returned to the caller.
 515:Drivers/STM32CubeL4_libs/Src/iot_flash_config.c ****   *         -1  Error:    No server address is configured.
 516:Drivers/STM32CubeL4_libs/Src/iot_flash_config.c ****   */
 517:Drivers/STM32CubeL4_libs/Src/iot_flash_config.c **** int getServerAddress(const char ** const address)
 518:Drivers/STM32CubeL4_libs/Src/iot_flash_config.c **** {
 519:Drivers/STM32CubeL4_libs/Src/iot_flash_config.c ****   int ret = -1;
 520:Drivers/STM32CubeL4_libs/Src/iot_flash_config.c **** 
 521:Drivers/STM32CubeL4_libs/Src/iot_flash_config.c ****   if (address != NULL)
 522:Drivers/STM32CubeL4_libs/Src/iot_flash_config.c ****   {
 523:Drivers/STM32CubeL4_libs/Src/iot_flash_config.c ****     if (lUserConfigPtr->iot_config.magic == USER_CONF_MAGIC)
 524:Drivers/STM32CubeL4_libs/Src/iot_flash_config.c ****     {
 525:Drivers/STM32CubeL4_libs/Src/iot_flash_config.c ****       *address = lUserConfigPtr->iot_config.server_name;
ARM GAS  C:\cygwin64\tmp\ccR4YQzD.s 			page 35


 526:Drivers/STM32CubeL4_libs/Src/iot_flash_config.c ****       ret = 0;
 527:Drivers/STM32CubeL4_libs/Src/iot_flash_config.c ****     } else {
 528:Drivers/STM32CubeL4_libs/Src/iot_flash_config.c ****       *address = NULL;
 529:Drivers/STM32CubeL4_libs/Src/iot_flash_config.c ****     }
 530:Drivers/STM32CubeL4_libs/Src/iot_flash_config.c ****   }
 531:Drivers/STM32CubeL4_libs/Src/iot_flash_config.c ****   return ret;
 532:Drivers/STM32CubeL4_libs/Src/iot_flash_config.c **** }
 533:Drivers/STM32CubeL4_libs/Src/iot_flash_config.c **** #endif /* AWS */
 534:Drivers/STM32CubeL4_libs/Src/iot_flash_config.c **** 
 535:Drivers/STM32CubeL4_libs/Src/iot_flash_config.c **** /**
 536:Drivers/STM32CubeL4_libs/Src/iot_flash_config.c ****   * @brief  Get the device configuration from Flash.
 537:Drivers/STM32CubeL4_libs/Src/iot_flash_config.c ****   * @param  Out:  name    Pointer to the location of the device configuration. NULL if absent.
 538:Drivers/STM32CubeL4_libs/Src/iot_flash_config.c ****   * @retval   0   Success:  The device configuration is configured and returned to the caller.
 539:Drivers/STM32CubeL4_libs/Src/iot_flash_config.c ****   *          -1   Error:    Device configuration absent.
 540:Drivers/STM32CubeL4_libs/Src/iot_flash_config.c **** 
 541:Drivers/STM32CubeL4_libs/Src/iot_flash_config.c ****   */
 542:Drivers/STM32CubeL4_libs/Src/iot_flash_config.c **** int getIoTDeviceConfig(const char ** const name)
 543:Drivers/STM32CubeL4_libs/Src/iot_flash_config.c **** {
 1201              		.loc 1 543 1 is_stmt 1 view -0
 1202              		.cfi_startproc
 1203              		@ args = 0, pretend = 0, frame = 0
 1204              		@ frame_needed = 0, uses_anonymous_args = 0
 1205              		@ link register save eliminated.
 544:Drivers/STM32CubeL4_libs/Src/iot_flash_config.c ****   int ret = -1;
 1206              		.loc 1 544 3 view .LVU280
 545:Drivers/STM32CubeL4_libs/Src/iot_flash_config.c **** 
 546:Drivers/STM32CubeL4_libs/Src/iot_flash_config.c ****   if (name != NULL)
 1207              		.loc 1 546 3 view .LVU281
 1208              		.loc 1 546 6 is_stmt 0 view .LVU282
 1209 0000 C8B1     		cbz	r0, .L85
 543:Drivers/STM32CubeL4_libs/Src/iot_flash_config.c ****   int ret = -1;
 1210              		.loc 1 543 1 view .LVU283
 1211 0002 F0B4     		push	{r4, r5, r6, r7}
 1212              	.LCFI15:
 1213              		.cfi_def_cfa_offset 16
 1214              		.cfi_offset 4, -16
 1215              		.cfi_offset 5, -12
 1216              		.cfi_offset 6, -8
 1217              		.cfi_offset 7, -4
 547:Drivers/STM32CubeL4_libs/Src/iot_flash_config.c ****   {
 548:Drivers/STM32CubeL4_libs/Src/iot_flash_config.c ****     if (lUserConfigPtr->iot_config.magic == USER_CONF_MAGIC)
 1218              		.loc 1 548 5 is_stmt 1 view .LVU284
 1219              		.loc 1 548 23 is_stmt 0 view .LVU285
 1220 0004 104B     		ldr	r3, .L90+8
 1221 0006 1B68     		ldr	r3, [r3]
 1222              		.loc 1 548 35 view .LVU286
 1223 0008 03F52152 		add	r2, r3, #10304
 1224 000c D2E90C67 		ldrd	r6, [r2, #48]
 1225              		.loc 1 548 8 view .LVU287
 1226 0010 0BA5     		adr	r5, .L90
 1227 0012 D5E90045 		ldrd	r4, [r5]
 1228 0016 AF42     		cmp	r7, r5
 1229 0018 08BF     		it	eq
 1230 001a A642     		cmpeq	r6, r4
 1231 001c 06D1     		bne	.L84
 549:Drivers/STM32CubeL4_libs/Src/iot_flash_config.c ****     {
 550:Drivers/STM32CubeL4_libs/Src/iot_flash_config.c ****       *name = lUserConfigPtr->iot_config.device_name;
ARM GAS  C:\cygwin64\tmp\ccR4YQzD.s 			page 36


 1232              		.loc 1 550 7 is_stmt 1 view .LVU288
 1233              		.loc 1 550 15 is_stmt 0 view .LVU289
 1234 001e 03F52153 		add	r3, r3, #10304
 1235 0022 3833     		adds	r3, r3, #56
 1236              		.loc 1 550 13 view .LVU290
 1237 0024 0360     		str	r3, [r0]
 551:Drivers/STM32CubeL4_libs/Src/iot_flash_config.c ****       ret = 0;
 1238              		.loc 1 551 7 is_stmt 1 view .LVU291
 1239              	.LVL126:
 1240              		.loc 1 551 11 is_stmt 0 view .LVU292
 1241 0026 0020     		movs	r0, #0
 1242              	.LVL127:
 1243              	.L82:
 552:Drivers/STM32CubeL4_libs/Src/iot_flash_config.c ****     } else {
 553:Drivers/STM32CubeL4_libs/Src/iot_flash_config.c ****       *name = NULL;
 554:Drivers/STM32CubeL4_libs/Src/iot_flash_config.c ****     }
 555:Drivers/STM32CubeL4_libs/Src/iot_flash_config.c ****   }
 556:Drivers/STM32CubeL4_libs/Src/iot_flash_config.c ****   return ret;
 557:Drivers/STM32CubeL4_libs/Src/iot_flash_config.c **** }
 1244              		.loc 1 557 1 view .LVU293
 1245 0028 F0BC     		pop	{r4, r5, r6, r7}
 1246              	.LCFI16:
 1247              		.cfi_remember_state
 1248              		.cfi_restore 7
 1249              		.cfi_restore 6
 1250              		.cfi_restore 5
 1251              		.cfi_restore 4
 1252              		.cfi_def_cfa_offset 0
 1253 002a 7047     		bx	lr
 1254              	.LVL128:
 1255              	.L84:
 1256              	.LCFI17:
 1257              		.cfi_restore_state
 553:Drivers/STM32CubeL4_libs/Src/iot_flash_config.c ****     }
 1258              		.loc 1 553 7 is_stmt 1 view .LVU294
 553:Drivers/STM32CubeL4_libs/Src/iot_flash_config.c ****     }
 1259              		.loc 1 553 13 is_stmt 0 view .LVU295
 1260 002c 0023     		movs	r3, #0
 1261 002e 0360     		str	r3, [r0]
 544:Drivers/STM32CubeL4_libs/Src/iot_flash_config.c **** 
 1262              		.loc 1 544 7 view .LVU296
 1263 0030 4FF0FF30 		mov	r0, #-1
 1264              	.LVL129:
 544:Drivers/STM32CubeL4_libs/Src/iot_flash_config.c **** 
 1265              		.loc 1 544 7 view .LVU297
 1266 0034 F8E7     		b	.L82
 1267              	.LVL130:
 1268              	.L85:
 1269              	.LCFI18:
 1270              		.cfi_def_cfa_offset 0
 1271              		.cfi_restore 4
 1272              		.cfi_restore 5
 1273              		.cfi_restore 6
 1274              		.cfi_restore 7
 544:Drivers/STM32CubeL4_libs/Src/iot_flash_config.c **** 
 1275              		.loc 1 544 7 view .LVU298
 1276 0036 4FF0FF30 		mov	r0, #-1
ARM GAS  C:\cygwin64\tmp\ccR4YQzD.s 			page 37


 1277              	.LVL131:
 556:Drivers/STM32CubeL4_libs/Src/iot_flash_config.c **** }
 1278              		.loc 1 556 3 is_stmt 1 view .LVU299
 1279              		.loc 1 557 1 is_stmt 0 view .LVU300
 1280 003a 7047     		bx	lr
 1281              	.L91:
 1282 003c AFF30080 		.align	3
 1283              	.L90:
 1284 0040 EFCDAB89 		.word	-1985229329
 1285 0044 67452301 		.word	19088743
 1286 0048 00000000 		.word	.LANCHOR0
 1287              		.cfi_endproc
 1288              	.LFE327:
 1290              		.section	.text.checkIoTDeviceConfig,"ax",%progbits
 1291              		.align	1
 1292              		.global	checkIoTDeviceConfig
 1293              		.syntax unified
 1294              		.thumb
 1295              		.thumb_func
 1296              		.fpu fpv4-sp-d16
 1298              	checkIoTDeviceConfig:
 1299              	.LFB328:
 558:Drivers/STM32CubeL4_libs/Src/iot_flash_config.c **** 
 559:Drivers/STM32CubeL4_libs/Src/iot_flash_config.c **** /**
 560:Drivers/STM32CubeL4_libs/Src/iot_flash_config.c ****   * @brief  Check if an IoT device configuration is present in Flash memory.
 561:Drivers/STM32CubeL4_libs/Src/iot_flash_config.c ****   * @retval 0:  Configuration present.
 562:Drivers/STM32CubeL4_libs/Src/iot_flash_config.c ****   *        -1:  No configuration.
 563:Drivers/STM32CubeL4_libs/Src/iot_flash_config.c ****   */
 564:Drivers/STM32CubeL4_libs/Src/iot_flash_config.c **** int checkIoTDeviceConfig()
 565:Drivers/STM32CubeL4_libs/Src/iot_flash_config.c **** {
 1300              		.loc 1 565 1 is_stmt 1 view -0
 1301              		.cfi_startproc
 1302              		@ args = 0, pretend = 0, frame = 0
 1303              		@ frame_needed = 0, uses_anonymous_args = 0
 1304              		@ link register save eliminated.
 566:Drivers/STM32CubeL4_libs/Src/iot_flash_config.c ****   return (lUserConfigPtr->iot_config.magic == USER_CONF_MAGIC) ? 0 : -1;
 1305              		.loc 1 566 3 view .LVU302
 1306              		.loc 1 566 25 is_stmt 0 view .LVU303
 1307 0000 0B4B     		ldr	r3, .L95+8
 1308 0002 1B68     		ldr	r3, [r3]
 1309              		.loc 1 566 37 view .LVU304
 1310 0004 03F52153 		add	r3, r3, #10304
 1311 0008 D3E90C01 		ldrd	r0, [r3, #48]
 1312              		.loc 1 566 68 view .LVU305
 1313 000c 06A3     		adr	r3, .L95
 1314 000e D3E90023 		ldrd	r2, [r3]
 1315 0012 9942     		cmp	r1, r3
 1316 0014 08BF     		it	eq
 1317 0016 9042     		cmpeq	r0, r2
 1318 0018 01D1     		bne	.L94
 1319 001a 0020     		movs	r0, #0
 1320 001c 7047     		bx	lr
 1321              	.L94:
 1322 001e 4FF0FF30 		mov	r0, #-1
 567:Drivers/STM32CubeL4_libs/Src/iot_flash_config.c **** }
 1323              		.loc 1 567 1 view .LVU306
 1324 0022 7047     		bx	lr
ARM GAS  C:\cygwin64\tmp\ccR4YQzD.s 			page 38


 1325              	.L96:
 1326 0024 AFF30080 		.align	3
 1327              	.L95:
 1328 0028 EFCDAB89 		.word	-1985229329
 1329 002c 67452301 		.word	19088743
 1330 0030 00000000 		.word	.LANCHOR0
 1331              		.cfi_endproc
 1332              	.LFE328:
 1334              		.section	.text.getTLSKeys,"ax",%progbits
 1335              		.align	1
 1336              		.global	getTLSKeys
 1337              		.syntax unified
 1338              		.thumb
 1339              		.thumb_func
 1340              		.fpu fpv4-sp-d16
 1342              	getTLSKeys:
 1343              	.LVL132:
 1344              	.LFB329:
 568:Drivers/STM32CubeL4_libs/Src/iot_flash_config.c **** 
 569:Drivers/STM32CubeL4_libs/Src/iot_flash_config.c **** 
 570:Drivers/STM32CubeL4_libs/Src/iot_flash_config.c **** /**
 571:Drivers/STM32CubeL4_libs/Src/iot_flash_config.c ****   * @brief  Get the TLS certificates and private key addresses in the Flash memory.
 572:Drivers/STM32CubeL4_libs/Src/iot_flash_config.c ****   * @param  Out: ca_cert        CA certificate / trust chain (PEM format: string)
 573:Drivers/STM32CubeL4_libs/Src/iot_flash_config.c ****   * @param  Out: device_cert    Device certificate (PEM format: string)
 574:Drivers/STM32CubeL4_libs/Src/iot_flash_config.c ****   * @param  Out: private_key    Device private key (PEM format: string)
 575:Drivers/STM32CubeL4_libs/Src/iot_flash_config.c ****   * @retval 0:    TLS credentials found, and passed back to the caller.
 576:Drivers/STM32CubeL4_libs/Src/iot_flash_config.c ****   *        -1:    TLS credentials not found.
 577:Drivers/STM32CubeL4_libs/Src/iot_flash_config.c ****   */
 578:Drivers/STM32CubeL4_libs/Src/iot_flash_config.c **** int getTLSKeys(const char ** const root_ca_cert, const char ** const device_cert, const char ** con
 579:Drivers/STM32CubeL4_libs/Src/iot_flash_config.c **** {
 1345              		.loc 1 579 1 is_stmt 1 view -0
 1346              		.cfi_startproc
 1347              		@ args = 0, pretend = 0, frame = 0
 1348              		@ frame_needed = 0, uses_anonymous_args = 0
 1349              		.loc 1 579 1 is_stmt 0 view .LVU308
 1350 0000 2DE97043 		push	{r4, r5, r6, r8, r9, lr}
 1351              	.LCFI19:
 1352              		.cfi_def_cfa_offset 24
 1353              		.cfi_offset 4, -24
 1354              		.cfi_offset 5, -20
 1355              		.cfi_offset 6, -16
 1356              		.cfi_offset 8, -12
 1357              		.cfi_offset 9, -8
 1358              		.cfi_offset 14, -4
 1359 0004 0646     		mov	r6, r0
 1360 0006 0D46     		mov	r5, r1
 1361 0008 1446     		mov	r4, r2
 580:Drivers/STM32CubeL4_libs/Src/iot_flash_config.c ****   int rc = -1;
 1362              		.loc 1 580 3 is_stmt 1 view .LVU309
 1363              	.LVL133:
 581:Drivers/STM32CubeL4_libs/Src/iot_flash_config.c ****   if (  (lUserConfigPtr->ca_tls_magic == USER_CONF_MAGIC)
 1364              		.loc 1 581 3 view .LVU310
 1365              		.loc 1 581 24 is_stmt 0 view .LVU311
 1366 000a 234B     		ldr	r3, .L110+8
 1367 000c 1A68     		ldr	r2, [r3]
 1368              	.LVL134:
 1369              		.loc 1 581 24 view .LVU312
ARM GAS  C:\cygwin64\tmp\ccR4YQzD.s 			page 39


 1370 000e 02F52853 		add	r3, r2, #10752
 1371 0012 D3E90A89 		ldrd	r8, [r3, #40]
 1372              		.loc 1 581 6 view .LVU313
 1373 0016 1EA1     		adr	r1, .L110
 1374 0018 D1E90001 		ldrd	r0, [r1]
 1375              	.LVL135:
 1376              		.loc 1 581 6 view .LVU314
 1377 001c 8945     		cmp	r9, r1
 1378 001e 08BF     		it	eq
 1379 0020 8045     		cmpeq	r8, r0
 1380 0022 0CD0     		beq	.L108
 1381              	.LVL136:
 1382              	.L98:
 582:Drivers/STM32CubeL4_libs/Src/iot_flash_config.c ****       && ( (lUserConfigPtr->device_tls_magic == USER_CONF_MAGIC) || !app_needs_device_keypair() )  
 583:Drivers/STM32CubeL4_libs/Src/iot_flash_config.c ****   {
 584:Drivers/STM32CubeL4_libs/Src/iot_flash_config.c ****     if (root_ca_cert != NULL)    *root_ca_cert = lUserConfigPtr->tls_root_ca_cert;
 585:Drivers/STM32CubeL4_libs/Src/iot_flash_config.c ****     if (device_cert !=NULL)      *device_cert = lUserConfigPtr->tls_device_cert;
 586:Drivers/STM32CubeL4_libs/Src/iot_flash_config.c ****     if (private_key!= NULL)      *private_key = lUserConfigPtr->tls_device_key;
 587:Drivers/STM32CubeL4_libs/Src/iot_flash_config.c ****     rc = 0;
 588:Drivers/STM32CubeL4_libs/Src/iot_flash_config.c ****   }
 589:Drivers/STM32CubeL4_libs/Src/iot_flash_config.c ****   else
 590:Drivers/STM32CubeL4_libs/Src/iot_flash_config.c ****   {
 591:Drivers/STM32CubeL4_libs/Src/iot_flash_config.c ****     if (root_ca_cert != NULL)    *root_ca_cert = NULL;
 1383              		.loc 1 591 5 is_stmt 1 view .LVU315
 1384              		.loc 1 591 8 is_stmt 0 view .LVU316
 1385 0024 0EB1     		cbz	r6, .L103
 1386              		.loc 1 591 34 is_stmt 1 discriminator 1 view .LVU317
 1387              		.loc 1 591 48 is_stmt 0 discriminator 1 view .LVU318
 1388 0026 0023     		movs	r3, #0
 1389 0028 3360     		str	r3, [r6]
 1390              	.L103:
 592:Drivers/STM32CubeL4_libs/Src/iot_flash_config.c ****     if (device_cert !=NULL)      *device_cert = NULL;
 1391              		.loc 1 592 5 is_stmt 1 view .LVU319
 1392              		.loc 1 592 8 is_stmt 0 view .LVU320
 1393 002a 0DB1     		cbz	r5, .L104
 1394              		.loc 1 592 34 is_stmt 1 discriminator 1 view .LVU321
 1395              		.loc 1 592 47 is_stmt 0 discriminator 1 view .LVU322
 1396 002c 0023     		movs	r3, #0
 1397 002e 2B60     		str	r3, [r5]
 1398              	.L104:
 593:Drivers/STM32CubeL4_libs/Src/iot_flash_config.c ****     if (private_key!= NULL)      *private_key = NULL;
 1399              		.loc 1 593 5 is_stmt 1 view .LVU323
 1400              		.loc 1 593 8 is_stmt 0 view .LVU324
 1401 0030 4CB3     		cbz	r4, .L106
 1402              		.loc 1 593 34 is_stmt 1 discriminator 1 view .LVU325
 1403              		.loc 1 593 47 is_stmt 0 discriminator 1 view .LVU326
 1404 0032 0023     		movs	r3, #0
 1405 0034 2360     		str	r3, [r4]
 580:Drivers/STM32CubeL4_libs/Src/iot_flash_config.c ****   if (  (lUserConfigPtr->ca_tls_magic == USER_CONF_MAGIC)
 1406              		.loc 1 580 7 discriminator 1 view .LVU327
 1407 0036 4FF0FF30 		mov	r0, #-1
 1408              	.L97:
 594:Drivers/STM32CubeL4_libs/Src/iot_flash_config.c ****   }
 595:Drivers/STM32CubeL4_libs/Src/iot_flash_config.c ****   return rc;
 596:Drivers/STM32CubeL4_libs/Src/iot_flash_config.c **** }
 1409              		.loc 1 596 1 view .LVU328
 1410 003a BDE87083 		pop	{r4, r5, r6, r8, r9, pc}
ARM GAS  C:\cygwin64\tmp\ccR4YQzD.s 			page 40


 1411              	.LVL137:
 1412              	.L108:
 582:Drivers/STM32CubeL4_libs/Src/iot_flash_config.c ****   {
 1413              		.loc 1 582 27 view .LVU329
 1414 003e 02F52852 		add	r2, r2, #10752
 1415 0042 D2E90C01 		ldrd	r0, [r2, #48]
 582:Drivers/STM32CubeL4_libs/Src/iot_flash_config.c ****   {
 1416              		.loc 1 582 7 view .LVU330
 1417 0046 12A3     		adr	r3, .L110
 1418 0048 D3E90023 		ldrd	r2, [r3]
 1419 004c 9942     		cmp	r1, r3
 1420 004e 08BF     		it	eq
 1421 0050 9042     		cmpeq	r0, r2
 1422 0052 11D1     		bne	.L109
 1423              	.LVL138:
 1424              	.L99:
 584:Drivers/STM32CubeL4_libs/Src/iot_flash_config.c ****     if (device_cert !=NULL)      *device_cert = lUserConfigPtr->tls_device_cert;
 1425              		.loc 1 584 5 is_stmt 1 view .LVU331
 584:Drivers/STM32CubeL4_libs/Src/iot_flash_config.c ****     if (device_cert !=NULL)      *device_cert = lUserConfigPtr->tls_device_cert;
 1426              		.loc 1 584 8 is_stmt 0 view .LVU332
 1427 0054 16B1     		cbz	r6, .L100
 584:Drivers/STM32CubeL4_libs/Src/iot_flash_config.c ****     if (device_cert !=NULL)      *device_cert = lUserConfigPtr->tls_device_cert;
 1428              		.loc 1 584 34 is_stmt 1 discriminator 1 view .LVU333
 584:Drivers/STM32CubeL4_libs/Src/iot_flash_config.c ****     if (device_cert !=NULL)      *device_cert = lUserConfigPtr->tls_device_cert;
 1429              		.loc 1 584 64 is_stmt 0 discriminator 1 view .LVU334
 1430 0056 104B     		ldr	r3, .L110+8
 1431 0058 1B68     		ldr	r3, [r3]
 584:Drivers/STM32CubeL4_libs/Src/iot_flash_config.c ****     if (device_cert !=NULL)      *device_cert = lUserConfigPtr->tls_device_cert;
 1432              		.loc 1 584 48 discriminator 1 view .LVU335
 1433 005a 3360     		str	r3, [r6]
 1434              	.L100:
 585:Drivers/STM32CubeL4_libs/Src/iot_flash_config.c ****     if (private_key!= NULL)      *private_key = lUserConfigPtr->tls_device_key;
 1435              		.loc 1 585 5 is_stmt 1 view .LVU336
 585:Drivers/STM32CubeL4_libs/Src/iot_flash_config.c ****     if (private_key!= NULL)      *private_key = lUserConfigPtr->tls_device_key;
 1436              		.loc 1 585 8 is_stmt 0 view .LVU337
 1437 005c 25B1     		cbz	r5, .L101
 585:Drivers/STM32CubeL4_libs/Src/iot_flash_config.c ****     if (private_key!= NULL)      *private_key = lUserConfigPtr->tls_device_key;
 1438              		.loc 1 585 34 is_stmt 1 discriminator 1 view .LVU338
 585:Drivers/STM32CubeL4_libs/Src/iot_flash_config.c ****     if (private_key!= NULL)      *private_key = lUserConfigPtr->tls_device_key;
 1439              		.loc 1 585 63 is_stmt 0 discriminator 1 view .LVU339
 1440 005e 0E4B     		ldr	r3, .L110+8
 1441 0060 1B68     		ldr	r3, [r3]
 585:Drivers/STM32CubeL4_libs/Src/iot_flash_config.c ****     if (private_key!= NULL)      *private_key = lUserConfigPtr->tls_device_key;
 1442              		.loc 1 585 49 discriminator 1 view .LVU340
 1443 0062 03F5C053 		add	r3, r3, #6144
 585:Drivers/STM32CubeL4_libs/Src/iot_flash_config.c ****     if (private_key!= NULL)      *private_key = lUserConfigPtr->tls_device_key;
 1444              		.loc 1 585 47 discriminator 1 view .LVU341
 1445 0066 2B60     		str	r3, [r5]
 1446              	.L101:
 586:Drivers/STM32CubeL4_libs/Src/iot_flash_config.c ****     rc = 0;
 1447              		.loc 1 586 5 is_stmt 1 view .LVU342
 586:Drivers/STM32CubeL4_libs/Src/iot_flash_config.c ****     rc = 0;
 1448              		.loc 1 586 8 is_stmt 0 view .LVU343
 1449 0068 5CB1     		cbz	r4, .L105
 586:Drivers/STM32CubeL4_libs/Src/iot_flash_config.c ****     rc = 0;
 1450              		.loc 1 586 34 is_stmt 1 discriminator 1 view .LVU344
 586:Drivers/STM32CubeL4_libs/Src/iot_flash_config.c ****     rc = 0;
ARM GAS  C:\cygwin64\tmp\ccR4YQzD.s 			page 41


 1451              		.loc 1 586 63 is_stmt 0 discriminator 1 view .LVU345
 1452 006a 0B4B     		ldr	r3, .L110+8
 1453 006c 1B68     		ldr	r3, [r3]
 586:Drivers/STM32CubeL4_libs/Src/iot_flash_config.c ****     rc = 0;
 1454              		.loc 1 586 49 discriminator 1 view .LVU346
 1455 006e 03F50053 		add	r3, r3, #8192
 586:Drivers/STM32CubeL4_libs/Src/iot_flash_config.c ****     rc = 0;
 1456              		.loc 1 586 47 discriminator 1 view .LVU347
 1457 0072 2360     		str	r3, [r4]
 587:Drivers/STM32CubeL4_libs/Src/iot_flash_config.c ****   }
 1458              		.loc 1 587 8 discriminator 1 view .LVU348
 1459 0074 0020     		movs	r0, #0
 1460 0076 E0E7     		b	.L97
 1461              	.LVL139:
 1462              	.L109:
 582:Drivers/STM32CubeL4_libs/Src/iot_flash_config.c ****   {
 1463              		.loc 1 582 70 discriminator 1 view .LVU349
 1464 0078 FFF7FEFF 		bl	app_needs_device_keypair
 1465              	.LVL140:
 582:Drivers/STM32CubeL4_libs/Src/iot_flash_config.c ****   {
 1466              		.loc 1 582 66 discriminator 1 view .LVU350
 1467 007c 0028     		cmp	r0, #0
 1468 007e D1D1     		bne	.L98
 1469 0080 E8E7     		b	.L99
 1470              	.L105:
 587:Drivers/STM32CubeL4_libs/Src/iot_flash_config.c ****   }
 1471              		.loc 1 587 8 view .LVU351
 1472 0082 0020     		movs	r0, #0
 1473 0084 D9E7     		b	.L97
 1474              	.L106:
 580:Drivers/STM32CubeL4_libs/Src/iot_flash_config.c ****   if (  (lUserConfigPtr->ca_tls_magic == USER_CONF_MAGIC)
 1475              		.loc 1 580 7 view .LVU352
 1476 0086 4FF0FF30 		mov	r0, #-1
 595:Drivers/STM32CubeL4_libs/Src/iot_flash_config.c **** }
 1477              		.loc 1 595 3 is_stmt 1 view .LVU353
 595:Drivers/STM32CubeL4_libs/Src/iot_flash_config.c **** }
 1478              		.loc 1 595 10 is_stmt 0 view .LVU354
 1479 008a D6E7     		b	.L97
 1480              	.L111:
 1481 008c AFF30080 		.align	3
 1482              	.L110:
 1483 0090 EFCDAB89 		.word	-1985229329
 1484 0094 67452301 		.word	19088743
 1485 0098 00000000 		.word	.LANCHOR0
 1486              		.cfi_endproc
 1487              	.LFE329:
 1489              		.global	lUserConfigPtr
 1490              		.global	__uninited_region_start__
 1491              		.section	.data.lUserConfigPtr,"aw"
 1492              		.align	2
 1493              		.set	.LANCHOR0,. + 0
 1496              	lUserConfigPtr:
 1497 0000 00000000 		.word	__uninited_region_start__
 1498              		.section	UNINIT_FIXED_LOC,"aw"
 1499              		.align	3
 1502              	__uninited_region_start__:
 1503 0000 00000000 		.space	10808
ARM GAS  C:\cygwin64\tmp\ccR4YQzD.s 			page 42


 1503      00000000 
 1503      00000000 
 1503      00000000 
 1503      00000000 
 1504              		.text
 1505              	.Letext0:
 1506              		.file 2 "c:\\program files (x86)\\gnu arm embedded toolchain\\9 2020-q2-update\\lib\\gcc\\arm-none
 1507              		.file 3 "c:\\program files (x86)\\gnu arm embedded toolchain\\9 2020-q2-update\\arm-none-eabi\\inc
 1508              		.file 4 "c:\\program files (x86)\\gnu arm embedded toolchain\\9 2020-q2-update\\arm-none-eabi\\inc
 1509              		.file 5 "c:\\program files (x86)\\gnu arm embedded toolchain\\9 2020-q2-update\\arm-none-eabi\\inc
 1510              		.file 6 "c:\\program files (x86)\\gnu arm embedded toolchain\\9 2020-q2-update\\arm-none-eabi\\inc
 1511              		.file 7 "c:\\program files (x86)\\gnu arm embedded toolchain\\9 2020-q2-update\\arm-none-eabi\\inc
 1512              		.file 8 "Drivers/CMSIS/Include/core_cm4.h"
 1513              		.file 9 "Drivers/CMSIS/Device/ST/STM32L4xx/Include/system_stm32l4xx.h"
 1514              		.file 10 "Drivers/CMSIS/Device/ST/STM32L4xx/Include/stm32l475xx.h"
 1515              		.file 11 "Drivers/STM32L4xx_HAL_Driver/Inc/stm32l4xx_hal_def.h"
 1516              		.file 12 "Drivers/STM32L4xx_HAL_Driver/Inc/stm32l4xx_hal_dma.h"
 1517              		.file 13 "Drivers/STM32L4xx_HAL_Driver/Inc/stm32l4xx_hal_flash.h"
 1518              		.file 14 "Drivers/STM32L4xx_HAL_Driver/Inc/stm32l4xx_hal_spi.h"
 1519              		.file 15 "Drivers/STM32L4xx_HAL_Driver/Inc/stm32l4xx_hal.h"
 1520              		.file 16 "c:\\program files (x86)\\gnu arm embedded toolchain\\9 2020-q2-update\\arm-none-eabi\\in
 1521              		.file 17 "Drivers/STM32CubeL4_libs/Inc/net.h"
 1522              		.file 18 "Drivers/STM32CubeL4_libs/Inc/iot_flash_config.h"
 1523              		.file 19 "Inc/main.h"
 1524              		.file 20 "Drivers/STM32CubeL4_libs/Inc/cloud.h"
 1525              		.file 21 "Drivers/STM32CubeL4_libs/Inc/flash.h"
 1526              		.file 22 "<built-in>"
 1527              		.file 23 "c:\\program files (x86)\\gnu arm embedded toolchain\\9 2020-q2-update\\arm-none-eabi\\in
 1528              		.file 24 "c:\\program files (x86)\\gnu arm embedded toolchain\\9 2020-q2-update\\arm-none-eabi\\in
ARM GAS  C:\cygwin64\tmp\ccR4YQzD.s 			page 43


DEFINED SYMBOLS
                            *ABS*:00000000 iot_flash_config.c
C:\cygwin64\tmp\ccR4YQzD.s:18     .rodata.getInputString.str1.4:00000000 $d
C:\cygwin64\tmp\ccR4YQzD.s:22     .text.getInputString:00000000 $t
C:\cygwin64\tmp\ccR4YQzD.s:30     .text.getInputString:00000000 getInputString
C:\cygwin64\tmp\ccR4YQzD.s:153    .text.getInputString:0000005c $d
C:\cygwin64\tmp\ccR4YQzD.s:158    .rodata.checkWiFiCredentials.str1.4:00000000 $d
C:\cygwin64\tmp\ccR4YQzD.s:165    .text.checkWiFiCredentials:00000000 $t
C:\cygwin64\tmp\ccR4YQzD.s:172    .text.checkWiFiCredentials:00000000 checkWiFiCredentials
C:\cygwin64\tmp\ccR4YQzD.s:271    .text.checkWiFiCredentials:00000050 $d
C:\cygwin64\tmp\ccR4YQzD.s:280    .rodata.updateWiFiCredentials.str1.4:00000000 $d
C:\cygwin64\tmp\ccR4YQzD.s:291    .text.updateWiFiCredentials:00000000 $t
C:\cygwin64\tmp\ccR4YQzD.s:298    .text.updateWiFiCredentials:00000000 updateWiFiCredentials
C:\cygwin64\tmp\ccR4YQzD.s:418    .text.updateWiFiCredentials:00000078 $d
C:\cygwin64\tmp\ccR4YQzD.s:428    .rodata.enterPemString.str1.4:00000000 $d
C:\cygwin64\tmp\ccR4YQzD.s:432    .text.enterPemString:00000000 $t
C:\cygwin64\tmp\ccR4YQzD.s:439    .text.enterPemString:00000000 enterPemString
C:\cygwin64\tmp\ccR4YQzD.s:584    .text.enterPemString:0000007c $d
C:\cygwin64\tmp\ccR4YQzD.s:589    .rodata.CaptureAndFlashPem.str1.4:00000000 $d
C:\cygwin64\tmp\ccR4YQzD.s:593    .text.CaptureAndFlashPem:00000000 $t
C:\cygwin64\tmp\ccR4YQzD.s:600    .text.CaptureAndFlashPem:00000000 CaptureAndFlashPem
C:\cygwin64\tmp\ccR4YQzD.s:685    .text.CaptureAndFlashPem:00000050 $d
C:\cygwin64\tmp\ccR4YQzD.s:690    .text.checkTLSRootCA:00000000 $t
C:\cygwin64\tmp\ccR4YQzD.s:697    .text.checkTLSRootCA:00000000 checkTLSRootCA
C:\cygwin64\tmp\ccR4YQzD.s:726    .text.checkTLSRootCA:00000028 $d
C:\cygwin64\tmp\ccR4YQzD.s:733    .text.checkTLSDeviceConfig:00000000 $t
C:\cygwin64\tmp\ccR4YQzD.s:740    .text.checkTLSDeviceConfig:00000000 checkTLSDeviceConfig
C:\cygwin64\tmp\ccR4YQzD.s:769    .text.checkTLSDeviceConfig:00000028 $d
C:\cygwin64\tmp\ccR4YQzD.s:776    .rodata.updateTLSCredentials.str1.4:00000000 $d
C:\cygwin64\tmp\ccR4YQzD.s:824    .text.updateTLSCredentials:00000000 $t
C:\cygwin64\tmp\ccR4YQzD.s:831    .text.updateTLSCredentials:00000000 updateTLSCredentials
C:\cygwin64\tmp\ccR4YQzD.s:1104   .text.updateTLSCredentials:00000138 $d
C:\cygwin64\tmp\ccR4YQzD.s:1125   .text.setIoTDeviceConfig:00000000 $t
C:\cygwin64\tmp\ccR4YQzD.s:1132   .text.setIoTDeviceConfig:00000000 setIoTDeviceConfig
C:\cygwin64\tmp\ccR4YQzD.s:1184   .text.setIoTDeviceConfig:00000030 $d
C:\cygwin64\tmp\ccR4YQzD.s:1191   .text.getIoTDeviceConfig:00000000 $t
C:\cygwin64\tmp\ccR4YQzD.s:1198   .text.getIoTDeviceConfig:00000000 getIoTDeviceConfig
C:\cygwin64\tmp\ccR4YQzD.s:1284   .text.getIoTDeviceConfig:00000040 $d
C:\cygwin64\tmp\ccR4YQzD.s:1291   .text.checkIoTDeviceConfig:00000000 $t
C:\cygwin64\tmp\ccR4YQzD.s:1298   .text.checkIoTDeviceConfig:00000000 checkIoTDeviceConfig
C:\cygwin64\tmp\ccR4YQzD.s:1328   .text.checkIoTDeviceConfig:00000028 $d
C:\cygwin64\tmp\ccR4YQzD.s:1335   .text.getTLSKeys:00000000 $t
C:\cygwin64\tmp\ccR4YQzD.s:1342   .text.getTLSKeys:00000000 getTLSKeys
C:\cygwin64\tmp\ccR4YQzD.s:1483   .text.getTLSKeys:00000090 $d
C:\cygwin64\tmp\ccR4YQzD.s:1496   .data.lUserConfigPtr:00000000 lUserConfigPtr
C:\cygwin64\tmp\ccR4YQzD.s:1502   UNINIT_FIXED_LOC:00000000 __uninited_region_start__
C:\cygwin64\tmp\ccR4YQzD.s:1492   .data.lUserConfigPtr:00000000 $d
C:\cygwin64\tmp\ccR4YQzD.s:1499   UNINIT_FIXED_LOC:00000000 $d

UNDEFINED SYMBOLS
getchar
printf
memset
putchar
FLASH_update
strncmp
malloc
ARM GAS  C:\cygwin64\tmp\ccR4YQzD.s 			page 44


strlen
free
dialog_ask
puts
app_needs_device_keypair
